<?xml version="1.0"?>
  <database name="VIEW ESCM_DELIVERY_V">
    <view name="ESCM_DELIVERY_V"><![CDATA[SELECT initrec.escm_initialreceipt_id AS escm_delivery_v_id, initrec.ad_client_id, initrec.ad_org_id, initrec.isactive, initrec.created, initrec.createdby, initrec.updated, initrec.updatedby, rec.documentno, initrec.m_product_id, initrec.line, initrec.quantity AS initial_qty, initrec.accepted_qty + initrec.delivered_qty AS accepted_qty, initrec.delivered_qty AS deliveredqty, uom.name AS uom, initrec.custody_item, initrec.description, COALESCE(newiniti.quantity, initrec.accepted_qty + initrec.delivered_qty - initrec.delivered_qty) AS qty, addrec.m_inout_id, prd.value AS productcode, COALESCE(newiniti.notes, '') AS notes, initrec.issummary, initrec.parent_line FROM escm_initialreceipt initrec LEFT JOIN (SELECT DISTINCT addrec_1.receipt, addrec_1.m_inout_id FROM escm_addreceipt addrec_1) addrec ON initrec.m_inout_id = addrec.receipt LEFT JOIN escm_initialreceipt newiniti ON newiniti.m_inout_id = addrec.m_inout_id AND initrec.m_product_id = newiniti.m_product_id AND newiniti.source_ref = initrec.escm_initialreceipt_id LEFT JOIN c_uom uom ON uom.c_uom_id = initrec.c_uom_id LEFT JOIN m_inout rec ON rec.m_inout_id = initrec.m_inout_id LEFT JOIN m_product prd ON prd.m_product_id = initrec.m_product_id WHERE initrec.accepted_qty > 0 ORDER BY initrec.line]]></view>
  </database>
