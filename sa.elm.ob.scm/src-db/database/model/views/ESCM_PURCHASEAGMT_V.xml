<?xml version="1.0"?>
  <database name="VIEW ESCM_PURCHASEAGMT_V">
    <view name="ESCM_PURCHASEAGMT_V"><![CDATA[SELECT get_uuid() AS escm_purchaseagmt_v_id, c_order.ad_client_id, c_order.ad_org_id, c_order.isactive, c_order.created, c_order.createdby, c_order.updated, c_order.updatedby, c_order.documentno, c_order.em_escm_purchaseagreement, sum(COALESCE(efin_rdvtxn.netmatch_amt, 0)) AS matchamt, max(c_order.em_escm_revision) AS max, c_order.grandtotal, c_order.em_escm_ordertype, c_order.em_escm_ispurchaseagreement, c_order.em_escm_tot_po_change_type, c_order.em_escm_tot_po_change_value, c_order.em_escm_tot_po_change_factor, c_order.em_escm_contact_type, c_order.em_escm_receivetype, c_order.c_bpartner_id, c_order.c_order_id FROM c_order LEFT JOIN efin_rdv ON efin_rdv.c_order_id = c_order.c_order_id LEFT JOIN efin_rdvtxn ON efin_rdvtxn.efin_rdv_id = efin_rdv.efin_rdv_id AND efin_rdvtxn.appstatus = 'APP' WHERE c_order.em_escm_ordertype = 'PUR_REL' AND c_order.em_escm_ispurchaseagreement = 'Y' AND c_order.em_escm_appstatus = 'ESCM_AP' GROUP BY efin_rdv.c_order_id, c_order.ad_client_id, c_order.ad_org_id, c_order.isactive, c_order.created, c_order.createdby, c_order.updated, c_order.updatedby, c_order.em_escm_purchaseagreement, c_order.documentno, c_order.grandtotal, c_order.em_escm_ordertype, c_order.em_escm_ispurchaseagreement, c_order.em_escm_tot_po_change_type, c_order.em_escm_tot_po_change_value, c_order.em_escm_tot_po_change_factor, c_order.em_escm_contact_type, c_order.em_escm_receivetype, c_order.c_bpartner_id, c_order.c_order_id]]></view>
  </database>
