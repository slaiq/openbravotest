<?xml version="1.0"?>
  <database name="VIEW ESCM_TRANREG_ICVALIDATE_V">
    <view name="ESCM_TRANREG_ICVALIDATE_V"><![CDATA[SELECT (tranreg.specno || '-') || tranreg.trantype AS escm_tranreg_icvalidate_v_id, tranreg.specno, tranreg.trantype, tranreg.ad_client_id, tranreg.ad_org_id, tranreg.isactive, tranreg.created, tranreg.createdby, tranreg.updated, tranreg.updatedby FROM (SELECT COALESCE(mr.specno, COALESCE(ioh.em_escm_specno, '')) AS specno, CASE WHEN tr.em_escm_material_reqln_id IS NOT NULL THEN 'MIR' WHEN tr.m_inventoryline_id IS NOT NULL THEN 'INV' ELSE COALESCE(ref.value, '') END AS trantype, COALESCE(mr.ad_client_id, ioh.ad_client_id) AS ad_client_id, COALESCE(mr.ad_org_id, ioh.ad_org_id) AS ad_org_id, COALESCE(mr.isactive, ioh.isactive) AS isactive, COALESCE(mr.created, ioh.created) AS created, COALESCE(mr.createdby, ioh.createdby) AS createdby, COALESCE(mr.updated, ioh.updated) AS updated, COALESCE(mr.updatedby, ioh.updatedby) AS updatedby FROM m_transaction tr LEFT JOIN escm_material_reqln re ON tr.em_escm_material_reqln_id = re.escm_material_reqln_id LEFT JOIN escm_material_request mr ON mr.escm_material_request_id = re.escm_material_request_id LEFT JOIN m_inoutline io ON io.m_inoutline_id = tr.m_inoutline_id LEFT JOIN m_inout ioh ON ioh.m_inout_id = io.m_inout_id LEFT JOIN ad_ref_list ref ON ref.value = ioh.em_escm_receivingtype AND ref.ad_reference_id = '001853451717483682B375C6C6C8EF2B' WHERE tr.m_transaction_id = tr.m_transaction_id AND tr.em_escm_ic = 'N' GROUP BY mr.specno, ioh.em_escm_specno, tr.em_escm_material_reqln_id, tr.m_inventoryline_id, ref.value, COALESCE(mr.ad_client_id, ioh.ad_client_id), COALESCE(mr.ad_org_id, ioh.ad_org_id), COALESCE(mr.isactive, ioh.isactive), COALESCE(mr.created, ioh.created), COALESCE(mr.createdby, ioh.createdby), COALESCE(mr.updated, ioh.updated), COALESCE(mr.updatedby, ioh.updatedby)) tranreg WHERE tranreg.specno <> '' AND tranreg.trantype <> '' GROUP BY tranreg.trantype, tranreg.specno, tranreg.ad_client_id, tranreg.ad_org_id, tranreg.isactive, tranreg.created, tranreg.createdby, tranreg.updated, tranreg.updatedby ORDER BY tranreg.specno]]></view>
  </database>
