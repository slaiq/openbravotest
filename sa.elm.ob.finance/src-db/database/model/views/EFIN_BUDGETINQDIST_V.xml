<?xml version="1.0"?>
  <database name="VIEW EFIN_BUDGETINQDIST_V">
    <view name="EFIN_BUDGETINQDIST_V"><![CDATA[SELECT get_uuid() AS efin_budgetinqdist_v_id, t1.ad_client_id, t1.ad_org_id, t1.isactive, t1.created, t1.createdby, t1.updated, t1.updatedby, t1.efin_fundsreqline_id, CASE WHEN t2.orgreq_funds_type = 'OD' OR t2.orgreq_funds_type IS NULL THEN t1.increase ELSE 0 END AS increase, CASE WHEN t2.orgreq_funds_type = 'OD' OR t2.orgreq_funds_type IS NULL THEN t1.decrease ELSE 0 END AS decrease, t2.efin_fundsreq_id, t3.efin_budgetinquiry_id, t2.documentno, t2.trxdate, t2.dateacct, t2.transaction_org, t2.trxtype, t4.name AS req_type, t1.fromaccount, t2.docstatus, t2.description, CASE WHEN t2.orgreq_funds_type = 'DD' THEN t1.increase ELSE 0 END AS dept_increase, CASE WHEN t2.orgreq_funds_type = 'DD' THEN t1.decrease ELSE 0 END AS dept_decrease FROM efin_fundsreqline t1 JOIN efin_fundsreq t2 ON t1.efin_fundsreq_id = t2.efin_fundsreq_id JOIN efin_budgetinquiry t3 ON (t3.c_validcombination_id = t1.fromaccount OR t3.c_validcombination_id = t1.toaccount) AND t3.efin_budgetint_id = t2.efin_budgetint_id JOIN ad_ref_list t4 ON t4.value = t1.req_type AND t4.ad_reference_id = 'CFDC8846AAA54AC9AFDFA48BB4E0711A' WHERE t1.dist_type = 'DIST' AND (t2.docstatus = 'CO' OR t1.decrease > 0 AND t2.isreserve = 'Y') UNION SELECT get_uuid() AS efin_budgetinqdist_v_id, t1.ad_client_id, t1.ad_org_id, t1.isactive, t1.created, t1.createdby, t1.updated, t1.updatedby, t1.efin_fundsreqline_id, 0 AS increase, CASE WHEN t2.orgreq_funds_type = 'OD' OR t2.orgreq_funds_type IS NULL THEN t1.decrease ELSE 0 END AS decrease, t2.efin_fundsreq_id, t3.efin_budgetinquiry_id, t2.documentno, t2.trxdate, t2.dateacct, t2.transaction_org, t2.trxtype, t4.name AS req_type, t1.fromaccount, t2.docstatus, t2.description, CASE WHEN t2.orgreq_funds_type = 'DD' THEN 0 ELSE 0 END AS dept_increase, CASE WHEN t2.orgreq_funds_type = 'DD' THEN t1.decrease ELSE 0 END AS dept_decrease FROM efin_fundsreqline t1 JOIN efin_fundsreq t2 ON t1.efin_fundsreq_id = t2.efin_fundsreq_id JOIN efin_budgetinquiry t3 ON t3.c_validcombination_id = t1.fromaccount AND t3.efin_budgetint_id = t2.efin_budgetint_id JOIN ad_ref_list t4 ON t4.value = t1.req_type AND t4.ad_reference_id = 'CFDC8846AAA54AC9AFDFA48BB4E0711A' WHERE t1.dist_type = 'MAN' AND (t2.docstatus = 'CO' OR t2.isreserve = 'Y') UNION SELECT get_uuid() AS efin_budgetinqdist_v_id, t1.ad_client_id, t1.ad_org_id, t1.isactive, t1.created, t1.createdby, t1.updated, t1.updatedby, t1.efin_fundsreqline_id, CASE WHEN t2.orgreq_funds_type = 'OD' OR t2.orgreq_funds_type IS NULL THEN t1.increase ELSE 0 END AS increase, 0 AS decrease, t2.efin_fundsreq_id, t3.efin_budgetinquiry_id, t2.documentno, t2.trxdate, t2.dateacct, t2.transaction_org, t2.trxtype, t4.name AS req_type, t1.toaccount AS fromaccount, t2.docstatus, t2.description, CASE WHEN t2.orgreq_funds_type = 'DD' THEN t1.increase ELSE 0 END AS dept_increase, CASE WHEN t2.orgreq_funds_type = 'DD' THEN 0 ELSE 0 END AS dept_decrease FROM efin_fundsreqline t1 JOIN efin_fundsreq t2 ON t1.efin_fundsreq_id = t2.efin_fundsreq_id JOIN efin_budgetinquiry t3 ON t3.c_validcombination_id = t1.toaccount AND t3.efin_budgetint_id = t2.efin_budgetint_id JOIN ad_ref_list t4 ON t4.value = t1.req_type AND t4.ad_reference_id = 'CFDC8846AAA54AC9AFDFA48BB4E0711A' WHERE t1.dist_type = 'MAN' AND t2.docstatus = 'CO']]></view>
  </database>
