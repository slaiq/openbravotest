<?xml version="1.0"?>
  <database name="VIEW ESCM_UNIFIEDPROPOSALINES_V">
    <view name="ESCM_UNIFIEDPROPOSALINES_V"><![CDATA[SELECT lines.escm_proposalmgmt_line_id AS escm_unifiedproposalines_v_id, lines.ad_client_id, lines.ad_org_id, lines.isactive, lines.created, lines.createdby, lines.updated, lines.updatedby, lines.m_product_id, lines.description, lines.c_uom_id, lines.awardedqty AS qty, lines.negot_unit_price AS price, lines.net_unitprice, lines.awardedqty * lines.net_unitprice AS linetotal, proposal.escm_bidmgmt_id, proposal.proposalno AS line_proposalno, lines.line, bp.name AS suppliername, loc.name AS supplierbranch, lines.em_efin_c_validcombination_id, lines.em_efin_uniquecodename, minproposal.min::character varying(20) AS proposalno, header.escm_proposalmgmt_id FROM escm_proposalmgmt_line lines JOIN escm_proposalmgmt proposal ON proposal.escm_proposalmgmt_id = lines.escm_proposalmgmt_id LEFT JOIN (SELECT min(escm_proposalmgmt.proposalno) AS min, escm_proposalmgmt.escm_bidmgmt_id FROM escm_proposalmgmt GROUP BY escm_proposalmgmt.escm_bidmgmt_id) minproposal ON minproposal.escm_bidmgmt_id = proposal.escm_bidmgmt_id LEFT JOIN escm_proposalmgmt header ON header.proposalno = minproposal.min JOIN c_bpartner bp ON proposal.supplier = bp.c_bpartner_id JOIN c_bpartner_location loc ON proposal.branchname = loc.c_bpartner_location_id WHERE lines.awardedqty > 0 ORDER BY minproposal.min]]></view>
  </database>
