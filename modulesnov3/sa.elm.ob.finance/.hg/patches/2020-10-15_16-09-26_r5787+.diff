# HG changeset patch
# Parent  b028297af993b47cd90251796667aef8b5019374
report template for digital sign.

diff --git a/src/sa/elm/ob/finance/ad_reports/InvoiceReport/APInvoiceReport.jrxml b/src/sa/elm/ob/finance/ad_reports/InvoiceReport/APInvoiceReport.jrxml
--- a/src/sa/elm/ob/finance/ad_reports/InvoiceReport/APInvoiceReport.jrxml
+++ b/src/sa/elm/ob/finance/ad_reports/InvoiceReport/APInvoiceReport.jrxml
@@ -14,596 +14,596 @@
 	<parameter name="BASE_WEB" class="java.lang.String"/>
 	<parameter name="param_aux_convert_total_real" class="java.math.BigDecimal"/>
 	<queryString language="SQL">
-		<![CDATA[select
-	case
-		when(
-			select
-				ty.EM_Efin_Isrdvinv
-			from
-				c_doctype ty
-			where
-				c_doctype_id = inv.C_DocTypeTarget_ID
-		)= 'Y' then coalesce(inv.description,'  قيمة المستخلص الجاري رقم ' ||(
-			select
-				coalesce(
-					rdt.certificate_no,
-					to_char(rdt.txn_version)
-				)
-			from
-				efin_rdvtxn rdt
-			where
-				rdt.c_invoice_id = inv.c_invoice_id limit 1
-		)|| ' الممثل للأعمال ' || ' المنجزة حتى تاريخ ' || ' ' ||(
-			select
-				to_char(
-					to_Date(
-						Eut_convert_to_hijri(
-							To_char(
-								rdt.Txnver_Date,
-								'YYYY-MM-DD'
-							)
-						)
-					),
-					'DD/MM/YYYY'
-				)|| ' الموافق ' || To_char(
-					rdt.Txnver_Date,
-					'DD/MM/YYYY'
-				) version_date_greg
-			from
-				efin_rdvtxn rdt
-			where
-				rdt.c_invoice_id = inv.c_invoice_id limit 1
-		)|| ' ' ||(
-			select
-				co.EM_Escm_Notes
-			from
-				c_order co
-			where
-				co.c_order_id = inv.C_order_id limit 1
-		)|| ' برقم تبليغ  ' ||(
-			select
-				to_char(coalesce(leg.award_no,''))
-			from
-				Escm_Legacy_Contract leg,
-				c_order co,
-				c_invoice ci
-			where
-				1 = 1
-				and ci.c_invoice_id =  '136361C1120047F582FA03483204D902'
-				and co.em_escm_legacycontract = leg.escm_legacy_contract_id
-				and ci.c_order_id = co.c_order_id
-		))
-		else inv.description
-	end description
-,
-	mang.name as manager,
-	en.documentno as encumdono,
-	inv.c_invoice_id,
-	eut_convert_to_hijri(
-		to_char(
-			inv.dateinvoiced,
-			'YYYY-MM-DD HH24:MI:SS'
-		)
-	) as invoicedate,
-	inv.documentno,
-	bp.name ||' '||
-	coalesce((
-	select
-		c1.em_escm_subcontractors
-	from
-		c_order c1
-	where
-		c1.c_order_id = coalesce(
-			inv.c_order_id,
-			inv.EM_Efin_C_Order_ID
-		) limit 1
-	),' ') bp_name,
-	inv.EM_Efin_Inwardno as inno,
-	eut_convert_to_hijri(
-		to_char(
-			inv.EM_Efin_Inwarddate,
-			'YYYY-MM-DD HH24:MI:SS'
-		)
-	) as indate,
-	inv.em_efin_supinvno as supno,
-	split_part(
-		inv.grandtotal::text,
-		'.',
-		1
-	)::numeric as totalamt,
-	split_part(
-		inv.grandtotal::text,
-		'.',
-		2
-	)::numeric as paise,
-	eut_convert_to_hijri(
-		to_char(
-			hist.created,
-			'YYYY-MM-DD HH24:MI:SS'
-		)
-	) as finalapprover,
-	sign.signpresidentorint as signpresidentorint,
-	(
-		select
-			efin_getcurrency(
-				inv.ad_org_id,
-				inv.ad_client_id,
-				'true'
-			)
-	) as legcur,
-	sign.finrepresent as finrepresent,
-	sign.chiefacctorfinmang as chiefacctorfinmang,
-	curr.iso_code,
-	inv.dateacct,
-	inv.ad_org_id as orgid,
-	case
-		when condoc.c_invoice_id is null then split_part(
-			(
-				select
-					c_currency_convert(
-						inv.grandtotal,
-						inv.c_currency_id,
-						(
-							select
-								efin_getcurrency(
-									inv.ad_org_id,
-									inv.ad_client_id,
-									'false'
-								)
-						),
-						inv.dateacct,
-						'S',
-						inv.ad_client_id
-					)
-			)::text,
-			'.',
-			1
-		)::numeric
-		else split_part((condoc.Foreign_Amount)::text,'.',1)::numeric
-
-	end as conversionpaisetotal,
-	case
-		when condoc.c_invoice_id is null then split_part(
-			(
-				select
-					c_currency_convert(
-						inv.grandtotal,
-						inv.c_currency_id,
-						(
-							select
-								efin_getcurrency(
-									inv.ad_org_id,
-									inv.ad_client_id,
-									'false'
-								)
-						),
-						inv.dateacct,
-						'S',
-						inv.ad_client_id
-					)
-			)::text,
-			'.',
-			2
-		)::numeric
-		else split_part(round((condoc.Foreign_Amount),2)::text,'.',2)::numeric
-
-	end as conversionpaise,
-        case
-		when condoc.c_invoice_id is null then split_part(
-	(
-		select
-			c_currency_convert(
-				inv.grandtotal,
-				inv.c_currency_id,
-				(
-					select
-						efin_getcurrency(
-							inv.ad_org_id,
-							inv.ad_client_id,
-							'false'
-						)
-				),
-				inv.dateacct,
-				'S',
-				inv.ad_client_id
-			)
-	)::text,
-			'.',
-			1
-		)::numeric
-		else split_part(round((condoc.Foreign_Amount),2)::text,'.',1)::numeric
-	end as totalvalue,
-	(
-		select
-			name
-		from
-			ad_user
-		where
-			ad_user_id = inv.createdby
-	) as preparer,
-	case
-		when condoc.c_invoice_id is null then split_part(
-			(
-				select
-					c_currency_convert(
-						(
-							select
-								sum( abs( linenetamt )) as total
-							from
-								c_invoiceline
-							where
-								c_invoice_id = $P{DOCUMENT_ID}
-						),
-						inv.c_currency_id,
-						(
-							select
-								efin_getcurrency(
-									inv.ad_org_id,
-									inv.ad_client_id,
-									'false'
-								)
-						),
-						inv.dateacct,
-						'S',
-						inv.ad_client_id
-					)
-			)::text,
-			'.',
-			1
-		)::numeric
-		else split_part(round((condoc.Foreign_Amount),2)::text,'.',1)::numeric
-	end as conversionpaisetotalinteger,
-	case
-		when condoc.c_invoice_id is null then split_part(
-			(
-				select
-					c_currency_convert(
-						(
-							select
-								sum( abs( linenetamt )) as total
-							from
-								c_invoiceline
-							where
-								c_invoice_id = $P{DOCUMENT_ID}
-						),
-						inv.c_currency_id,
-						(
-							select
-								efin_getcurrency(
-									inv.ad_org_id,
-									inv.ad_client_id,
-									'false'
-								)
-						),
-						inv.dateacct,
-						'S',
-						inv.ad_client_id
-					)
-			)::text,
-			'.',
-			2
-		)::numeric
-		else split_part(round((condoc.Foreign_Amount),2)::text,'.',2)::numeric
-	end as conversionpaisetotaldecimal,
-	case
-		when condoc.c_invoice_id is null then split_part(
-			(
-				select
-					c_currency_convert(
-						(
-						 /* 	select
-								sum(( linenetamt ))
-							from
-								c_invoiceline
-							where
-								c_invoice_id =
-								*/
-						  select
-								sum(( linenetamt ))
-							from
-								c_invoiceline inl,c_elementvalue e1
-							where
-								c_invoice_id =$P{DOCUMENT_ID}
-								and inl.EM_Efin_C_Elementvalue_ID=e1.C_Elementvalue_ID
-							--	and e1.accounttype in('E','A')   --- commented by Alamir on 30/03/2020
-							     and ((e1.accounttype in('R','L') and inl.linenetamt > 0 ) or ( e1.accounttype in('E','A')))   ----- added by Alamir on 30/03/2020
-							--	and linenetamt > 0
-						),
-						inv.c_currency_id,
-						(
-							select
-								efin_getcurrency(
-									inv.ad_org_id,
-									inv.ad_client_id,
-									'false'
-								)
-						),
-						inv.dateacct,
-						'S',
-						inv.ad_client_id
-					)
-			)::text,
-			'.',
-			1
-		)::numeric
-		else split_part(round((condoc.Foreign_Amount),2)::text,'.',1)::numeric
-	end as headtotalreal,
-case
-		when condoc.c_invoice_id is null then
-((  select
-								sum(( linenetamt ))
-							from
-								c_invoiceline inl,c_elementvalue e1
-							where
-								c_invoice_id =$P{DOCUMENT_ID}
-								and inl.EM_Efin_C_Elementvalue_ID=e1.C_Elementvalue_ID
-							--	and e1.accounttype in('E','A')   --- commented by Alamir on 30/03/2020
-							     and ((e1.accounttype in('R','L') and inl.linenetamt > 0 ) or ( e1.accounttype in('E','A')))   ----- added by Alamir on 30/03/2020
-							) 
-* (Case when curr.iso_code = 'SAR'	then 1 else 
-	coalesce(
-							(
-								select
-									multiplyrate
-								from
-									c_conversion_rate
-								where
-									c_currency_id = curr.c_currency_id
-							),
-							1
-						) end))								
-	else round((condoc.Foreign_Amount),2)::numeric
-	end headtotalrealwithdecimal,
-	case
-		when condoc.c_invoice_id is null then 
-		/*split_part(
-			(
-				select
-					c_currency_convert(
-						(
-						  select
-								sum(( linenetamt ))
-							from
-								c_invoiceline inl,c_elementvalue e1
-							where
-								c_invoice_id =
-								and inl.EM_Efin_C_Elementvalue_ID=e1.C_Elementvalue_ID
-								and e1.accounttype in('E','A')
-							--	and linenetamt > 0
-						),
-						inv.c_currency_id,
-						(
-							select
-								efin_getcurrency(
-									inv.ad_org_id,
-									inv.ad_client_id,
-									'false'
-								)
-						),
-						inv.dateacct,
-						'S',
-						inv.ad_client_id
-					)
-			)::text,
-			'.',
-			2
-		)::numeric  */
-		( select
-								sum(( linenetamt ))*(
-					case
-						when curr.iso_code = 'SAR' then 1
-						else coalesce(
-							(
-								select
-									multiplyrate
-								from
-									c_conversion_rate
-								where
-									c_currency_id = curr.c_currency_id
-							),
-							1
-						)
-					end
-				)
-							from
-								c_invoiceline inl,c_elementvalue e1
-							where
-								c_invoice_id =$P{DOCUMENT_ID}
-								and inl.EM_Efin_C_Elementvalue_ID=e1.C_Elementvalue_ID
-								-- and e1.accounttype in('E','A')	  --- commented by Alamir on 30/03/2020
-							     and ((e1.accounttype in('R','L') and inl.linenetamt > 0 ) or ( e1.accounttype in('E','A')))   ----- added by Alamir on 30/03/2020
-								)
-		else --split_part(round((condoc.Foreign_Amount),2)::text,'.',2)::numeric
-		     round((condoc.Foreign_Amount),2) ::numeric
-	end as headtotaldecimal,
-	(
-		select
-			year
-		from
-			c_year c,
-			Efin_Budgetint b
-		where
-			c.c_year_id = b.c_year_id
-			and b.efin_budgetint_id = inv.em_efin_budgetint_id
-	) fin_year,
-	att.cnt attachment_cnt,
-	(
-		select
-	c.name
-from
-	ad_role a,
-	ad_user_roles b,
-	ad_user c
-where
-	a.ad_role_id = b.ad_role_id
-	and b.ad_user_id = c.ad_user_id
-	and b.isactive = 'Y'
-	and c.isactive = 'Y'
-	and c.ad_user_id <> '100'
-	and a.ad_role_id='D8712712FBAD40F98C1D4BEBACA5008F'
-	and c.ad_user_id='EB70337DB9F748BD86034107804F3C1A'
-	--and a.name = 'مدير عام ادارة المنافسات والعقود'
-	) sahebe_salahiya,
-	(
-	/*	select
-			c.name
-		from
-			ad_role a,
-			ad_user_roles b,
-			ad_user c
-		where
-			a.ad_role_id = b.ad_role_id
-			and b.ad_user_id = c.ad_user_id
-			and b.isactive = 'Y'
-			and c.isactive = 'Y'
-			and c.ad_user_id <> '100'
-		--	and a.name = 'مدير عام الادارة المالية'
-		    and a.ad_role_id ='2E78C8B91DC84BDABC02F1FA081BFDA6'  */
-			select name from ad_user where username ='409046' limit 1
-	) mudeer_idara,
-	(
-		select
-			c.name
-		from
-			ad_role a,
-			ad_user_roles b,
-			ad_user c
-		where
-			a.ad_role_id = b.ad_role_id
-			and b.ad_user_id = c.ad_user_id
-			and b.isactive = 'Y'
-			and c.isactive = 'Y'
-			and c.ad_user_id <> '100'
-			and a.ad_role_id='55C03A9EAA134110BD5A5851D2002C2A'
-			--and a.name = 'الممثل المالي'
-	) Financial_Rep,
-	(
-		/*select distinct   user1.name from c_salesregion reg ,ad_user user1
-where user1.ad_user_id = reg.EM_Efin_User_ID
-and reg.c_salesregion_id= inv.EM_Efin_C_Salesregion_ID
----------
-select usr.name
-from
-Efin_User_Manager mgr,
-ad_user usr
-where
-mgr.line_manager_id = usr.ad_user_id
-and mgr.ad_user_id = inv.createdby
-----------
-select
-	case
-		when reg.value = '8' then 'سليمان بن عبدالله العيدان'
-		else us.name
-	end
-from
-	Efin_User_Manager mgr,
-	c_salesregion reg,
-	ad_user us
-where
-	mgr.c_salesregion_id = reg.c_salesregion_id
-	and us.ad_user_id = mgr.line_manager_id
-	and mgr.c_salesregion_id = inv.EM_Efin_C_Salesregion_ID
-	limit 1
----- */
-		select
-			case
-				when reg.value = '8' then 'سليمان بن عبدالله العيدان'
-				else usr.name
-			end
-		from
-			Efin_User_Manager mgr,
-			c_salesregion reg,
-			ad_user usr
-		where
-			mgr.c_salesregion_id = reg.c_salesregion_id
-			and mgr.line_manager_id = usr.ad_user_id
-			and mgr.document_type ='API'
-			and mgr.ad_user_id = inv.createdby limit 1
-	) dept_mgr,
-	(
-		--select name from C_Salesregion where c_salesregion_id = inv.EM_Efin_C_Salesregion_ID limit 1
- select
-			reg.name
-		from
-			Efin_User_Manager mgr,
-			C_Salesregion reg
-		where
-			mgr.c_salesregion_id = reg.c_salesregion_id
-			and mgr.document_type ='API'
-			and mgr.ad_user_id = inv.createdby limit 1
-	) Cost_center,
-	coalesce(
-		inv.EM_Efin_Attachementref,
-		(
-			select
-				c1.em_escm_reference_no
-			from
-				c_order c1
-			where
-				c1.c_order_id = coalesce(inv.c_order_id,inv.EM_Efin_C_Order_ID) limit 1
-		)
-	) Reference_number
-	,fa.em_efin_acctseq inv_acct_seq,--fa.dateacct acct_date
-	to_char(
-				to_Date(
-					Eut_convert_to_hijri(
-						To_char(
-							fa.dateacct,
-							'YYYY-MM-DD'
-						)
-					)
-				),
-				'DD/MM/YYYY'
-			)  acct_date
-from
-	c_invoice inv
-left join(
-		select
-			count(*) cnt,
-			ad_record_id
-		from
-			c_file
-		group by
-			ad_record_id
-	) att on
-	inv.c_invoice_id = att.ad_record_id
-left join c_doctype doc on
-	doc.c_doctype_id = inv.c_doctypetarget_id
-left join efin_budget_manencum en on
-	en.efin_budget_manencum_id = inv.em_efin_manualencumbrance_id
-left join c_currency curr on
-	curr.c_currency_id = inv.c_currency_id
-left join c_bpartner bp on
-	bp.c_bpartner_id = inv.c_bpartner_id
-left join efin_purchasein_app_hist hist on
-	hist.c_invoice_id = inv.c_invoice_id
-	and hist.created =(
-		select
-			max( hist.created )
-		from
-			efin_purchasein_app_hist hist
-		where
-			hist.c_invoice_id = inv.c_invoice_id
-	)
-left join C_Conversion_Rate_Document condoc on
-	condoc.c_invoice_id = inv.c_invoice_id
-left join c_salesregion dept on
-	dept.c_salesregion_id = inv.em_efin_c_salesregion_id
-left join ad_user mang on
-	mang.ad_user_id = dept.em_efin_user_id
-left join efin_authorizesign sign on
-	sign.c_doctype_id = inv.c_doctypetarget_id
-left join (select distinct em_efin_acctseq ,dateacct,em_efin_documentno from fact_acct ) fa on 
-    inv.documentno =fa.em_efin_documentno  	
-where
-	inv.c_invoice_id = $P{DOCUMENT_ID}
-	and inv.docstatus in(
-		'CO',
-		'EFIN_WFA',
-		'WP',
-		'IP',
-		'DR'
-	)
+		<![CDATA[select
+	case
+		when(
+			select
+				ty.EM_Efin_Isrdvinv
+			from
+				c_doctype ty
+			where
+				c_doctype_id = inv.C_DocTypeTarget_ID
+		)= 'Y' then coalesce(inv.description,'  قيمة المستخلص الجاري رقم ' ||(
+			select
+				coalesce(
+					rdt.certificate_no,
+					to_char(rdt.txn_version)
+				)
+			from
+				efin_rdvtxn rdt
+			where
+				rdt.c_invoice_id = inv.c_invoice_id limit 1
+		)|| ' الممثل للأعمال ' || ' المنجزة حتى تاريخ ' || ' ' ||(
+			select
+				to_char(
+					to_Date(
+						Eut_convert_to_hijri(
+							To_char(
+								rdt.Txnver_Date,
+								'YYYY-MM-DD'
+							)
+						)
+					),
+					'DD/MM/YYYY'
+				)|| ' الموافق ' || To_char(
+					rdt.Txnver_Date,
+					'DD/MM/YYYY'
+				) version_date_greg
+			from
+				efin_rdvtxn rdt
+			where
+				rdt.c_invoice_id = inv.c_invoice_id limit 1
+		)|| ' ' ||(
+			select
+				co.EM_Escm_Notes
+			from
+				c_order co
+			where
+				co.c_order_id = inv.C_order_id limit 1
+		)|| ' برقم تبليغ  ' ||(
+			select
+				to_char(coalesce(leg.award_no,''))
+			from
+				Escm_Legacy_Contract leg,
+				c_order co,
+				c_invoice ci
+			where
+				1 = 1
+				and ci.c_invoice_id =  '136361C1120047F582FA03483204D902'
+				and co.em_escm_legacycontract = leg.escm_legacy_contract_id
+				and ci.c_order_id = co.c_order_id
+		))
+		else inv.description
+	end description
+,
+	mang.name as manager,
+	en.documentno as encumdono,
+	inv.c_invoice_id,
+	eut_convert_to_hijri(
+		to_char(
+			inv.dateinvoiced,
+			'YYYY-MM-DD HH24:MI:SS'
+		)
+	) as invoicedate,
+	inv.documentno,
+	bp.name ||' '||
+	coalesce((
+	select
+		c1.em_escm_subcontractors
+	from
+		c_order c1
+	where
+		c1.c_order_id = coalesce(
+			inv.c_order_id,
+			inv.EM_Efin_C_Order_ID
+		) limit 1
+	),' ') bp_name,
+	inv.EM_Efin_Inwardno as inno,
+	eut_convert_to_hijri(
+		to_char(
+			inv.EM_Efin_Inwarddate,
+			'YYYY-MM-DD HH24:MI:SS'
+		)
+	) as indate,
+	inv.em_efin_supinvno as supno,
+	split_part(
+		inv.grandtotal::text,
+		'.',
+		1
+	)::numeric as totalamt,
+	split_part(
+		inv.grandtotal::text,
+		'.',
+		2
+	)::numeric as paise,
+	eut_convert_to_hijri(
+		to_char(
+			hist.created,
+			'YYYY-MM-DD HH24:MI:SS'
+		)
+	) as finalapprover,
+	sign.signpresidentorint as signpresidentorint,
+	(
+		select
+			efin_getcurrency(
+				inv.ad_org_id,
+				inv.ad_client_id,
+				'true'
+			)
+	) as legcur,
+	sign.finrepresent as finrepresent,
+	sign.chiefacctorfinmang as chiefacctorfinmang,
+	curr.iso_code,
+	inv.dateacct,
+	inv.ad_org_id as orgid,
+	case
+		when condoc.c_invoice_id is null then split_part(
+			(
+				select
+					c_currency_convert(
+						inv.grandtotal,
+						inv.c_currency_id,
+						(
+							select
+								efin_getcurrency(
+									inv.ad_org_id,
+									inv.ad_client_id,
+									'false'
+								)
+						),
+						inv.dateacct,
+						'S',
+						inv.ad_client_id
+					)
+			)::text,
+			'.',
+			1
+		)::numeric
+		else split_part((condoc.Foreign_Amount)::text,'.',1)::numeric
+
+	end as conversionpaisetotal,
+	case
+		when condoc.c_invoice_id is null then split_part(
+			(
+				select
+					c_currency_convert(
+						inv.grandtotal,
+						inv.c_currency_id,
+						(
+							select
+								efin_getcurrency(
+									inv.ad_org_id,
+									inv.ad_client_id,
+									'false'
+								)
+						),
+						inv.dateacct,
+						'S',
+						inv.ad_client_id
+					)
+			)::text,
+			'.',
+			2
+		)::numeric
+		else split_part(round((condoc.Foreign_Amount),2)::text,'.',2)::numeric
+
+	end as conversionpaise,
+        case
+		when condoc.c_invoice_id is null then split_part(
+	(
+		select
+			c_currency_convert(
+				inv.grandtotal,
+				inv.c_currency_id,
+				(
+					select
+						efin_getcurrency(
+							inv.ad_org_id,
+							inv.ad_client_id,
+							'false'
+						)
+				),
+				inv.dateacct,
+				'S',
+				inv.ad_client_id
+			)
+	)::text,
+			'.',
+			1
+		)::numeric
+		else split_part(round((condoc.Foreign_Amount),2)::text,'.',1)::numeric
+	end as totalvalue,
+	(
+		select
+			name
+		from
+			ad_user
+		where
+			ad_user_id = inv.createdby
+	) as preparer,
+	case
+		when condoc.c_invoice_id is null then split_part(
+			(
+				select
+					c_currency_convert(
+						(
+							select
+								sum( abs( linenetamt )) as total
+							from
+								c_invoiceline
+							where
+								c_invoice_id = $P{DOCUMENT_ID}
+						),
+						inv.c_currency_id,
+						(
+							select
+								efin_getcurrency(
+									inv.ad_org_id,
+									inv.ad_client_id,
+									'false'
+								)
+						),
+						inv.dateacct,
+						'S',
+						inv.ad_client_id
+					)
+			)::text,
+			'.',
+			1
+		)::numeric
+		else split_part(round((condoc.Foreign_Amount),2)::text,'.',1)::numeric
+	end as conversionpaisetotalinteger,
+	case
+		when condoc.c_invoice_id is null then split_part(
+			(
+				select
+					c_currency_convert(
+						(
+							select
+								sum( abs( linenetamt )) as total
+							from
+								c_invoiceline
+							where
+								c_invoice_id = $P{DOCUMENT_ID}
+						),
+						inv.c_currency_id,
+						(
+							select
+								efin_getcurrency(
+									inv.ad_org_id,
+									inv.ad_client_id,
+									'false'
+								)
+						),
+						inv.dateacct,
+						'S',
+						inv.ad_client_id
+					)
+			)::text,
+			'.',
+			2
+		)::numeric
+		else split_part(round((condoc.Foreign_Amount),2)::text,'.',2)::numeric
+	end as conversionpaisetotaldecimal,
+	case
+		when condoc.c_invoice_id is null then split_part(
+			(
+				select
+					c_currency_convert(
+						(
+						 /* 	select
+								sum(( linenetamt ))
+							from
+								c_invoiceline
+							where
+								c_invoice_id =
+								*/
+						  select
+								sum(( linenetamt ))
+							from
+								c_invoiceline inl,c_elementvalue e1
+							where
+								c_invoice_id =$P{DOCUMENT_ID}
+								and inl.EM_Efin_C_Elementvalue_ID=e1.C_Elementvalue_ID
+							--	and e1.accounttype in('E','A')   --- commented by Alamir on 30/03/2020
+							     and ((e1.accounttype in('R','L') and inl.linenetamt > 0 ) or ( e1.accounttype in('E','A')))   ----- added by Alamir on 30/03/2020
+							--	and linenetamt > 0
+						),
+						inv.c_currency_id,
+						(
+							select
+								efin_getcurrency(
+									inv.ad_org_id,
+									inv.ad_client_id,
+									'false'
+								)
+						),
+						inv.dateacct,
+						'S',
+						inv.ad_client_id
+					)
+			)::text,
+			'.',
+			1
+		)::numeric
+		else split_part(round((condoc.Foreign_Amount),2)::text,'.',1)::numeric
+	end as headtotalreal,
+case
+		when condoc.c_invoice_id is null then
+((  select
+								sum(( linenetamt ))
+							from
+								c_invoiceline inl,c_elementvalue e1
+							where
+								c_invoice_id =$P{DOCUMENT_ID}
+								and inl.EM_Efin_C_Elementvalue_ID=e1.C_Elementvalue_ID
+							--	and e1.accounttype in('E','A')   --- commented by Alamir on 30/03/2020
+							     and ((e1.accounttype in('R','L') and inl.linenetamt > 0 ) or ( e1.accounttype in('E','A')))   ----- added by Alamir on 30/03/2020
+							) 
+* (Case when curr.iso_code = 'SAR'	then 1 else 
+	coalesce(
+							(
+								select
+									multiplyrate
+								from
+									c_conversion_rate
+								where
+									c_currency_id = curr.c_currency_id
+							),
+							1
+						) end))								
+	else round((condoc.Foreign_Amount),2)::numeric
+	end headtotalrealwithdecimal,
+	case
+		when condoc.c_invoice_id is null then 
+		/*split_part(
+			(
+				select
+					c_currency_convert(
+						(
+						  select
+								sum(( linenetamt ))
+							from
+								c_invoiceline inl,c_elementvalue e1
+							where
+								c_invoice_id =
+								and inl.EM_Efin_C_Elementvalue_ID=e1.C_Elementvalue_ID
+								and e1.accounttype in('E','A')
+							--	and linenetamt > 0
+						),
+						inv.c_currency_id,
+						(
+							select
+								efin_getcurrency(
+									inv.ad_org_id,
+									inv.ad_client_id,
+									'false'
+								)
+						),
+						inv.dateacct,
+						'S',
+						inv.ad_client_id
+					)
+			)::text,
+			'.',
+			2
+		)::numeric  */
+		( select
+								sum(( linenetamt ))*(
+					case
+						when curr.iso_code = 'SAR' then 1
+						else coalesce(
+							(
+								select
+									multiplyrate
+								from
+									c_conversion_rate
+								where
+									c_currency_id = curr.c_currency_id
+							),
+							1
+						)
+					end
+				)
+							from
+								c_invoiceline inl,c_elementvalue e1
+							where
+								c_invoice_id =$P{DOCUMENT_ID}
+								and inl.EM_Efin_C_Elementvalue_ID=e1.C_Elementvalue_ID
+								-- and e1.accounttype in('E','A')	  --- commented by Alamir on 30/03/2020
+							     and ((e1.accounttype in('R','L') and inl.linenetamt > 0 ) or ( e1.accounttype in('E','A')))   ----- added by Alamir on 30/03/2020
+								)
+		else --split_part(round((condoc.Foreign_Amount),2)::text,'.',2)::numeric
+		     round((condoc.Foreign_Amount),2) ::numeric
+	end as headtotaldecimal,
+	(
+		select
+			year
+		from
+			c_year c,
+			Efin_Budgetint b
+		where
+			c.c_year_id = b.c_year_id
+			and b.efin_budgetint_id = inv.em_efin_budgetint_id
+	) fin_year,
+	att.cnt attachment_cnt,
+	(
+		select
+	c.name
+from
+	ad_role a,
+	ad_user_roles b,
+	ad_user c
+where
+	a.ad_role_id = b.ad_role_id
+	and b.ad_user_id = c.ad_user_id
+	and b.isactive = 'Y'
+	and c.isactive = 'Y'
+	and c.ad_user_id <> '100'
+	and a.ad_role_id='D8712712FBAD40F98C1D4BEBACA5008F'
+	and c.ad_user_id='EB70337DB9F748BD86034107804F3C1A'
+	--and a.name = 'مدير عام ادارة المنافسات والعقود'
+	) sahebe_salahiya,
+	(
+	/*	select
+			c.name
+		from
+			ad_role a,
+			ad_user_roles b,
+			ad_user c
+		where
+			a.ad_role_id = b.ad_role_id
+			and b.ad_user_id = c.ad_user_id
+			and b.isactive = 'Y'
+			and c.isactive = 'Y'
+			and c.ad_user_id <> '100'
+		--	and a.name = 'مدير عام الادارة المالية'
+		    and a.ad_role_id ='2E78C8B91DC84BDABC02F1FA081BFDA6'  */
+			select name from ad_user where username ='409046' limit 1
+	) mudeer_idara,
+	(
+		select
+			c.name
+		from
+			ad_role a,
+			ad_user_roles b,
+			ad_user c
+		where
+			a.ad_role_id = b.ad_role_id
+			and b.ad_user_id = c.ad_user_id
+			and b.isactive = 'Y'
+			and c.isactive = 'Y'
+			and c.ad_user_id <> '100'
+			and a.ad_role_id='55C03A9EAA134110BD5A5851D2002C2A'
+			--and a.name = 'الممثل المالي'
+	) Financial_Rep,
+	(
+		/*select distinct   user1.name from c_salesregion reg ,ad_user user1
+where user1.ad_user_id = reg.EM_Efin_User_ID
+and reg.c_salesregion_id= inv.EM_Efin_C_Salesregion_ID
+---------
+select usr.name
+from
+Efin_User_Manager mgr,
+ad_user usr
+where
+mgr.line_manager_id = usr.ad_user_id
+and mgr.ad_user_id = inv.createdby
+----------
+select
+	case
+		when reg.value = '8' then 'سليمان بن عبدالله العيدان'
+		else us.name
+	end
+from
+	Efin_User_Manager mgr,
+	c_salesregion reg,
+	ad_user us
+where
+	mgr.c_salesregion_id = reg.c_salesregion_id
+	and us.ad_user_id = mgr.line_manager_id
+	and mgr.c_salesregion_id = inv.EM_Efin_C_Salesregion_ID
+	limit 1
+---- */
+		select
+			case
+				when reg.value = '8' then 'سليمان بن عبدالله العيدان'
+				else usr.name
+			end
+		from
+			Efin_User_Manager mgr,
+			c_salesregion reg,
+			ad_user usr
+		where
+			mgr.c_salesregion_id = reg.c_salesregion_id
+			and mgr.line_manager_id = usr.ad_user_id
+			and mgr.document_type ='API'
+			and mgr.ad_user_id = inv.createdby limit 1
+	) dept_mgr,
+	(
+		--select name from C_Salesregion where c_salesregion_id = inv.EM_Efin_C_Salesregion_ID limit 1
+ select
+			reg.name
+		from
+			Efin_User_Manager mgr,
+			C_Salesregion reg
+		where
+			mgr.c_salesregion_id = reg.c_salesregion_id
+			and mgr.document_type ='API'
+			and mgr.ad_user_id = inv.createdby limit 1
+	) Cost_center,
+	coalesce(
+		inv.EM_Efin_Attachementref,
+		(
+			select
+				c1.em_escm_reference_no
+			from
+				c_order c1
+			where
+				c1.c_order_id = coalesce(inv.c_order_id,inv.EM_Efin_C_Order_ID) limit 1
+		)
+	) Reference_number
+	,fa.em_efin_acctseq inv_acct_seq,--fa.dateacct acct_date
+	to_char(
+				to_Date(
+					Eut_convert_to_hijri(
+						To_char(
+							fa.dateacct,
+							'YYYY-MM-DD'
+						)
+					)
+				),
+				'DD/MM/YYYY'
+			)  acct_date
+from
+	c_invoice inv
+left join(
+		select
+			count(*) cnt,
+			ad_record_id
+		from
+			c_file
+		group by
+			ad_record_id
+	) att on
+	inv.c_invoice_id = att.ad_record_id
+left join c_doctype doc on
+	doc.c_doctype_id = inv.c_doctypetarget_id
+left join efin_budget_manencum en on
+	en.efin_budget_manencum_id = inv.em_efin_manualencumbrance_id
+left join c_currency curr on
+	curr.c_currency_id = inv.c_currency_id
+left join c_bpartner bp on
+	bp.c_bpartner_id = inv.c_bpartner_id
+left join efin_purchasein_app_hist hist on
+	hist.c_invoice_id = inv.c_invoice_id
+	and hist.created =(
+		select
+			max( hist.created )
+		from
+			efin_purchasein_app_hist hist
+		where
+			hist.c_invoice_id = inv.c_invoice_id
+	)
+left join C_Conversion_Rate_Document condoc on
+	condoc.c_invoice_id = inv.c_invoice_id
+left join c_salesregion dept on
+	dept.c_salesregion_id = inv.em_efin_c_salesregion_id
+left join ad_user mang on
+	mang.ad_user_id = dept.em_efin_user_id
+left join efin_authorizesign sign on
+	sign.c_doctype_id = inv.c_doctypetarget_id
+left join (select distinct em_efin_acctseq ,dateacct,em_efin_documentno from fact_acct ) fa on 
+    inv.documentno =fa.em_efin_documentno  	
+where
+	inv.c_invoice_id = $P{DOCUMENT_ID}
+	and inv.docstatus in(
+		'CO',
+		'EFIN_WFA',
+		'WP',
+		'IP',
+		'DR'
+	)
 	and em_efin_isprepayinvapp != 'Y']]>
 	</queryString>
 	<field name="description" class="java.lang.String"/>
@@ -1165,10 +1165,10 @@
 			</subreport>
 		</band>
 	</detail>
-	<summary>
-		<band height="197">
+	<lastPageFooter>
+		<band height="96">
 			<staticText>
-				<reportElement positionType="Float" x="244" y="25" width="60" height="13" uuid="a721362e-e4c1-401d-b04c-96c5b1e378ad"/>
+				<reportElement positionType="Float" x="218" y="1" width="60" height="13" uuid="d9106aa7-5b3b-43f2-acd1-3192a1226b7d"/>
 				<box rightPadding="4"/>
 				<textElement textAlignment="Center" verticalAlignment="Bottom">
 					<font fontName="Arial Unicode MS" size="8" isBold="false"/>
@@ -1176,13 +1176,49 @@
 				<text><![CDATA[توقيع الممثل المالي]]></text>
 			</staticText>
 			<staticText>
-				<reportElement positionType="Float" x="440" y="26" width="138" height="13" uuid="fb35eca8-21b1-4b3a-925c-145092bfec1e"/>
+				<reportElement positionType="Float" x="333" y="2" width="80" height="13" uuid="96929959-a39c-4645-8009-dba43d6cdcfb"/>
+				<box rightPadding="4"/>
+				<textElement textAlignment="Center" verticalAlignment="Bottom">
+					<font fontName="Arial Unicode MS" size="8" isBold="false"/>
+				</textElement>
+				<text><![CDATA[صاحب الصلاحية]]></text>
+			</staticText>
+			<staticText>
+				<reportElement positionType="Float" x="446" y="2" width="138" height="13" uuid="97c93658-e74a-48f8-8515-567ee61e1b62"/>
 				<box rightPadding="4"/>
 				<textElement textAlignment="Center" verticalAlignment="Bottom">
 					<font fontName="Arial Unicode MS" size="8" isBold="false"/>
 				</textElement>
 				<text><![CDATA[توقيع رئيس المحاسبة / مدير الإدارة المالية]]></text>
 			</staticText>
+			<textField isBlankWhenNull="true">
+				<reportElement positionType="Float" x="198" y="56" width="100" height="15" uuid="ef670a5c-c48f-4a92-b464-4693faaf9a18"/>
+				<box rightPadding="4"/>
+				<textElement textAlignment="Center" verticalAlignment="Middle">
+					<font fontName="Arial Unicode MS" size="8" isBold="false"/>
+				</textElement>
+				<textFieldExpression><![CDATA[$F{Financial_Rep}]]></textFieldExpression>
+			</textField>
+			<textField isBlankWhenNull="true">
+				<reportElement positionType="Float" x="320" y="56" width="110" height="15" uuid="a5a24103-bfec-4e62-a8a1-1c5021a256c8"/>
+				<box rightPadding="4"/>
+				<textElement textAlignment="Center" verticalAlignment="Middle">
+					<font fontName="Arial Unicode MS" size="8"/>
+				</textElement>
+				<textFieldExpression><![CDATA[$F{sahebe_salahiya}]]></textFieldExpression>
+			</textField>
+			<textField isBlankWhenNull="true">
+				<reportElement positionType="Float" x="447" y="56" width="133" height="15" uuid="36394a44-c857-484a-b14b-ed9fe27058d5"/>
+				<box rightPadding="4"/>
+				<textElement textAlignment="Center" verticalAlignment="Middle">
+					<font fontName="Arial Unicode MS" size="8"/>
+				</textElement>
+				<textFieldExpression><![CDATA[$F{mudeer_idara}]]></textFieldExpression>
+			</textField>
+		</band>
+	</lastPageFooter>
+	<summary>
+		<band height="133">
 			<staticText>
 				<reportElement positionType="Float" x="300" y="-13" width="240" height="32" uuid="25a0c3b4-72f0-4f1f-aa87-7ab62f37bfbd"/>
 				<box leftPadding="0" rightPadding="4">
@@ -1222,14 +1258,6 @@
 				</textElement>
 				<text><![CDATA[-۳ روجع، توقيع المختص.]]></text>
 			</staticText>
-			<textField isBlankWhenNull="true">
-				<reportElement positionType="Float" x="224" y="63" width="100" height="15" uuid="656a5323-5caf-4b78-af6f-5b3dd8e1fbf9"/>
-				<box rightPadding="4"/>
-				<textElement textAlignment="Center" verticalAlignment="Middle">
-					<font fontName="Arial Unicode MS" size="8" isBold="false"/>
-				</textElement>
-				<textFieldExpression><![CDATA[$F{Financial_Rep}]]></textFieldExpression>
-			</textField>
 			<staticText>
 				<reportElement positionType="Float" x="150" y="-13" width="150" height="32" uuid="c1456daa-c9ea-47c6-ad91-ad4fbe545ceb"/>
 				<box>
@@ -1244,24 +1272,8 @@
 
 توقيع المختص: ]]></text>
 			</staticText>
-			<staticText>
-				<reportElement positionType="Float" x="339" y="26" width="80" height="13" uuid="c8342b34-fb28-475a-a8c5-d477369674b1"/>
-				<box rightPadding="4"/>
-				<textElement textAlignment="Center" verticalAlignment="Bottom">
-					<font fontName="Arial Unicode MS" size="8" isBold="false"/>
-				</textElement>
-				<text><![CDATA[صاحب الصلاحية]]></text>
-			</staticText>
-			<textField isBlankWhenNull="true">
-				<reportElement positionType="Float" x="441" y="63" width="133" height="15" uuid="32ca3b76-db21-48f8-9880-416b16c413c8"/>
-				<box rightPadding="4"/>
-				<textElement textAlignment="Center" verticalAlignment="Middle">
-					<font fontName="Arial Unicode MS" size="8"/>
-				</textElement>
-				<textFieldExpression><![CDATA[$F{mudeer_idara}]]></textFieldExpression>
-			</textField>
 			<subreport>
-				<reportElement x="1" y="-55" width="587" height="34" isRemoveLineWhenBlank="true" uuid="afab23bd-8db4-44cb-aae2-f552e24da97c"/>
+				<reportElement x="1" y="-40" width="587" height="19" isRemoveLineWhenBlank="true" uuid="afab23bd-8db4-44cb-aae2-f552e24da97c"/>
 				<subreportParameter name="SUBREPORT_DIR">
 					<subreportParameterExpression><![CDATA[$P{SUBREPORT_DIR}]]></subreportParameterExpression>
 				</subreportParameter>
@@ -1305,7 +1317,7 @@
 				<subreportExpression><![CDATA[net.sf.jasperreports.engine.JasperCompileManager.compileReport($P{BASE_DESIGN} + "/sa/elm/ob/finance/ad_reports/InvoiceReport/APInvoiceLinePayBenSub.jrxml")]]></subreportExpression>
 			</subreport>
 			<subreport isUsingCache="false" runToBottom="false" overflowType="Stretch">
-				<reportElement positionType="Float" x="190" y="163" width="398" height="13" uuid="2ed14b64-b1c5-493e-b53f-957bc637636d">
+				<reportElement positionType="Float" x="190" y="103" width="398" height="13" uuid="2ed14b64-b1c5-493e-b53f-957bc637636d">
 					<property name="com.jaspersoft.studio.unit.height" value="px"/>
 					<property name="com.jaspersoft.studio.unit.width" value="px"/>
 					<property name="com.jaspersoft.studio.unit.x" value="px"/>
@@ -1330,16 +1342,8 @@
 				<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
 				<subreportExpression><![CDATA[net.sf.jasperreports.engine.JasperCompileManager.compileReport($P{BASE_DESIGN} + "/sa/elm/ob/finance/ad_reports/InvoiceReport/APInvoice.jrxml")]]></subreportExpression>
 			</subreport>
-			<textField isBlankWhenNull="true">
-				<reportElement positionType="Float" x="326" y="63" width="110" height="15" uuid="8063324d-4a22-48a9-a674-5c66aafe93af"/>
-				<box rightPadding="4"/>
-				<textElement textAlignment="Center" verticalAlignment="Middle">
-					<font fontName="Arial Unicode MS" size="8"/>
-				</textElement>
-				<textFieldExpression><![CDATA[$F{sahebe_salahiya}]]></textFieldExpression>
-			</textField>
 			<staticText>
-				<reportElement positionType="Float" x="520" y="176" width="63" height="13" uuid="a33f00ee-9207-45e2-8bcb-14955308f3bd"/>
+				<reportElement positionType="Float" x="520" y="116" width="63" height="13" uuid="a33f00ee-9207-45e2-8bcb-14955308f3bd"/>
 				<box rightPadding="4"/>
 				<textElement textAlignment="Center" verticalAlignment="Bottom">
 					<font fontName="Arial Unicode MS" size="8" isBold="false"/>
@@ -1347,7 +1351,7 @@
 				<text><![CDATA[الرقم المرجعي]]></text>
 			</staticText>
 			<textField isBlankWhenNull="true">
-				<reportElement positionType="Float" x="406" y="176" width="110" height="15" uuid="240ce6f3-6792-4693-bee0-7f1ca92f2f02"/>
+				<reportElement positionType="Float" x="406" y="116" width="110" height="15" uuid="240ce6f3-6792-4693-bee0-7f1ca92f2f02"/>
 				<box rightPadding="4"/>
 				<textElement textAlignment="Right" verticalAlignment="Middle">
 					<font fontName="Arial Unicode MS" size="8"/>
@@ -1355,67 +1359,7 @@
 				<textFieldExpression><![CDATA[sa.elm.ob.utility.ad_reports.NumberToWords.ConvertAmountToArabicAmount($F{Reference_number})]]></textFieldExpression>
 			</textField>
 			<staticText>
-				<reportElement positionType="Float" x="264" y="98" width="70" height="13" uuid="ea150ba6-93cf-4c3b-bcc2-02a7ba057f1c">
-					<property name="com.jaspersoft.studio.unit.height" value="px"/>
-				</reportElement>
-				<box>
-					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-				</box>
-				<textElement textAlignment="Right" verticalAlignment="Top">
-					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
-				</textElement>
-				<text><![CDATA[سحب أمر دفع / شيك رقم :]]></text>
-			</staticText>
-			<staticText>
-				<reportElement positionType="Float" x="395" y="98" width="70" height="13" uuid="3ec53a42-39ce-44e9-9d1a-eb208483aaf0">
-					<property name="com.jaspersoft.studio.unit.height" value="px"/>
-				</reportElement>
-				<box>
-					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-				</box>
-				<textElement textAlignment="Right" verticalAlignment="Top">
-					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
-				</textElement>
-				<text><![CDATA[سحب أمر دفع / شيك رقم :]]></text>
-			</staticText>
-			<staticText>
-				<reportElement positionType="Float" x="517" y="98" width="70" height="13" uuid="ef0bc59e-61d0-4e94-9c28-67b342ef7360">
-					<property name="com.jaspersoft.studio.unit.height" value="px"/>
-				</reportElement>
-				<box>
-					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-				</box>
-				<textElement textAlignment="Right" verticalAlignment="Top">
-					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
-				</textElement>
-				<text><![CDATA[سحب أمر دفع / شيك رقم :]]></text>
-			</staticText>
-			<staticText>
-				<reportElement positionType="Float" x="264" y="111" width="70" height="13" uuid="02acf063-9c0e-4487-941c-3b63f90efcc1">
-					<property name="com.jaspersoft.studio.unit.height" value="px"/>
-				</reportElement>
-				<box>
-					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
-				</box>
-				<textElement textAlignment="Right" verticalAlignment="Top">
-					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
-				</textElement>
-				<text><![CDATA[سحب أمر دفع / شيك رقم :]]></text>
-			</staticText>
-			<staticText>
-				<reportElement positionType="Float" x="395" y="111" width="70" height="13" uuid="e85e272c-31e1-4174-af36-0a1366ee1fad">
+				<reportElement positionType="Float" x="264" y="38" width="70" height="13" uuid="ea150ba6-93cf-4c3b-bcc2-02a7ba057f1c">
 					<property name="com.jaspersoft.studio.unit.height" value="px"/>
 				</reportElement>
 				<box>
@@ -1430,7 +1374,7 @@
 				<text><![CDATA[سحب أمر دفع / شيك رقم :]]></text>
 			</staticText>
 			<staticText>
-				<reportElement positionType="Float" x="517" y="111" width="70" height="13" uuid="53387847-4f30-4dad-910a-494770fb4eb4">
+				<reportElement positionType="Float" x="395" y="38" width="70" height="13" uuid="3ec53a42-39ce-44e9-9d1a-eb208483aaf0">
 					<property name="com.jaspersoft.studio.unit.height" value="px"/>
 				</reportElement>
 				<box>
@@ -1445,41 +1389,7 @@
 				<text><![CDATA[سحب أمر دفع / شيك رقم :]]></text>
 			</staticText>
 			<staticText>
-				<reportElement positionType="Float" x="334" y="129" width="51" height="13" uuid="8005d21a-4fef-4834-85bb-d2feb4cd2c88">
-					<property name="com.jaspersoft.studio.unit.height" value="px"/>
-				</reportElement>
-				<box rightPadding="3"/>
-				<textElement textAlignment="Right" verticalAlignment="Top">
-					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
-				</textElement>
-				<text><![CDATA[توقيع المختص  :]]></text>
-			</staticText>
-			<staticText>
-				<reportElement positionType="Float" x="354" y="142" width="28" height="13" uuid="65771216-3e64-4f93-8df0-8e7ce54b071d"/>
-				<textElement textAlignment="Right" verticalAlignment="Top">
-					<font fontName="Arial Unicode MS" size="7"/>
-				</textElement>
-				<text><![CDATA[بتاريخ  :]]></text>
-			</staticText>
-			<staticText>
-				<reportElement positionType="Float" x="458" y="142" width="64" height="13" uuid="e48f5d11-caf3-45e7-a693-e920cc775de4"/>
-				<textElement textAlignment="Right" verticalAlignment="Top">
-					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
-				</textElement>
-				<text><![CDATA[وقيـد بدفتـر اليوميـة برقـم  :]]></text>
-			</staticText>
-			<staticText>
-				<reportElement positionType="Float" x="493" y="129" width="31" height="13" uuid="12e56123-edf5-4a81-8725-0ff5b5ec81fb">
-					<property name="com.jaspersoft.studio.unit.height" value="px"/>
-				</reportElement>
-				<box rightPadding="3"/>
-				<textElement textAlignment="Right" verticalAlignment="Top">
-					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
-				</textElement>
-				<text><![CDATA[وتاريخ  :]]></text>
-			</staticText>
-			<staticText>
-				<reportElement positionType="Float" x="264" y="85" width="70" height="13" uuid="350cda12-17f4-489a-a920-a149497c0541">
+				<reportElement positionType="Float" x="517" y="38" width="70" height="13" uuid="ef0bc59e-61d0-4e94-9c28-67b342ef7360">
 					<property name="com.jaspersoft.studio.unit.height" value="px"/>
 				</reportElement>
 				<box>
@@ -1494,7 +1404,7 @@
 				<text><![CDATA[سحب أمر دفع / شيك رقم :]]></text>
 			</staticText>
 			<staticText>
-				<reportElement positionType="Float" x="395" y="85" width="70" height="13" uuid="736ef4a3-d537-4b00-9a3b-b953e4cb2a7c">
+				<reportElement positionType="Float" x="264" y="51" width="70" height="13" uuid="02acf063-9c0e-4487-941c-3b63f90efcc1">
 					<property name="com.jaspersoft.studio.unit.height" value="px"/>
 				</reportElement>
 				<box>
@@ -1509,7 +1419,101 @@
 				<text><![CDATA[سحب أمر دفع / شيك رقم :]]></text>
 			</staticText>
 			<staticText>
-				<reportElement positionType="Float" x="517" y="85" width="70" height="13" uuid="cf72bd3b-d08b-481d-a60e-0e3a1b8fe116">
+				<reportElement positionType="Float" x="395" y="51" width="70" height="13" uuid="e85e272c-31e1-4174-af36-0a1366ee1fad">
+					<property name="com.jaspersoft.studio.unit.height" value="px"/>
+				</reportElement>
+				<box>
+					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+				</box>
+				<textElement textAlignment="Right" verticalAlignment="Top">
+					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
+				</textElement>
+				<text><![CDATA[سحب أمر دفع / شيك رقم :]]></text>
+			</staticText>
+			<staticText>
+				<reportElement positionType="Float" x="517" y="51" width="70" height="13" uuid="53387847-4f30-4dad-910a-494770fb4eb4">
+					<property name="com.jaspersoft.studio.unit.height" value="px"/>
+				</reportElement>
+				<box>
+					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+				</box>
+				<textElement textAlignment="Right" verticalAlignment="Top">
+					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
+				</textElement>
+				<text><![CDATA[سحب أمر دفع / شيك رقم :]]></text>
+			</staticText>
+			<staticText>
+				<reportElement positionType="Float" x="334" y="69" width="51" height="13" uuid="8005d21a-4fef-4834-85bb-d2feb4cd2c88">
+					<property name="com.jaspersoft.studio.unit.height" value="px"/>
+				</reportElement>
+				<box rightPadding="3"/>
+				<textElement textAlignment="Right" verticalAlignment="Top">
+					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
+				</textElement>
+				<text><![CDATA[توقيع المختص  :]]></text>
+			</staticText>
+			<staticText>
+				<reportElement positionType="Float" x="354" y="82" width="28" height="13" uuid="65771216-3e64-4f93-8df0-8e7ce54b071d"/>
+				<textElement textAlignment="Right" verticalAlignment="Top">
+					<font fontName="Arial Unicode MS" size="7"/>
+				</textElement>
+				<text><![CDATA[بتاريخ  :]]></text>
+			</staticText>
+			<staticText>
+				<reportElement positionType="Float" x="458" y="82" width="64" height="13" uuid="e48f5d11-caf3-45e7-a693-e920cc775de4"/>
+				<textElement textAlignment="Right" verticalAlignment="Top">
+					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
+				</textElement>
+				<text><![CDATA[وقيـد بدفتـر اليوميـة برقـم  :]]></text>
+			</staticText>
+			<staticText>
+				<reportElement positionType="Float" x="493" y="69" width="31" height="13" uuid="12e56123-edf5-4a81-8725-0ff5b5ec81fb">
+					<property name="com.jaspersoft.studio.unit.height" value="px"/>
+				</reportElement>
+				<box rightPadding="3"/>
+				<textElement textAlignment="Right" verticalAlignment="Top">
+					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
+				</textElement>
+				<text><![CDATA[وتاريخ  :]]></text>
+			</staticText>
+			<staticText>
+				<reportElement positionType="Float" x="264" y="25" width="70" height="13" uuid="350cda12-17f4-489a-a920-a149497c0541">
+					<property name="com.jaspersoft.studio.unit.height" value="px"/>
+				</reportElement>
+				<box>
+					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+				</box>
+				<textElement textAlignment="Right" verticalAlignment="Top">
+					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
+				</textElement>
+				<text><![CDATA[سحب أمر دفع / شيك رقم :]]></text>
+			</staticText>
+			<staticText>
+				<reportElement positionType="Float" x="395" y="25" width="70" height="13" uuid="736ef4a3-d537-4b00-9a3b-b953e4cb2a7c">
+					<property name="com.jaspersoft.studio.unit.height" value="px"/>
+				</reportElement>
+				<box>
+					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
+				</box>
+				<textElement textAlignment="Right" verticalAlignment="Top">
+					<font fontName="Arial Unicode MS" size="7" isBold="false"/>
+				</textElement>
+				<text><![CDATA[سحب أمر دفع / شيك رقم :]]></text>
+			</staticText>
+			<staticText>
+				<reportElement positionType="Float" x="517" y="25" width="70" height="13" uuid="cf72bd3b-d08b-481d-a60e-0e3a1b8fe116">
 					<property name="com.jaspersoft.studio.unit.height" value="px"/>
 				</reportElement>
 				<box>
@@ -1524,7 +1528,7 @@
 				<text><![CDATA[سحب أمر دفع / شيك رقم :]]></text>
 			</staticText>
 			<textField isBlankWhenNull="true">
-				<reportElement positionType="Float" x="284" y="142" width="70" height="13" uuid="29cca1fa-7986-4733-aef9-6c41d5e3215c"/>
+				<reportElement positionType="Float" x="284" y="82" width="70" height="13" uuid="29cca1fa-7986-4733-aef9-6c41d5e3215c"/>
 				<box rightPadding="4"/>
 				<textElement textAlignment="Right" verticalAlignment="Middle">
 					<font fontName="Arial Unicode MS" size="7"/>
@@ -1532,7 +1536,7 @@
 				<textFieldExpression><![CDATA[sa.elm.ob.utility.ad_reports.NumberToWords.ConvertAmountToArabicAmount($F{acct_date})]]></textFieldExpression>
 			</textField>
 			<textField isBlankWhenNull="true">
-				<reportElement positionType="Float" x="382" y="142" width="70" height="13" uuid="40a39d7d-6a48-4bc0-9f3a-51568e86ec2c"/>
+				<reportElement positionType="Float" x="382" y="82" width="70" height="13" uuid="40a39d7d-6a48-4bc0-9f3a-51568e86ec2c"/>
 				<box rightPadding="4"/>
 				<textElement textAlignment="Right" verticalAlignment="Middle">
 					<font fontName="Arial Unicode MS" size="7"/>
