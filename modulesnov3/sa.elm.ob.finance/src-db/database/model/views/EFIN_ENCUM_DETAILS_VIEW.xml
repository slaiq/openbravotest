<?xml version="1.0"?>
  <database name="VIEW EFIN_ENCUM_DETAILS_VIEW">
    <view name="EFIN_ENCUM_DETAILS_VIEW"><![CDATA[SELECT encum.documentno AS grp_encum_number, ln.amount AS original_amount, ln.revamount AS updated_amount, el.value AS account_name, ord.documentno AS grp_contract_no, res.contract_no AS legacy_contract_no, commits.commit_no AS legacy_commitno, encum.encum_type, encum.encum_stage, encum.docstatus AS encum_status, encum.description AS encum_description, ord.description AS contract_description, cre.name AS createdby, encum.created, bp.name AS supplier FROM efin_budget_manencum encum JOIN ad_user cre ON cre.ad_user_id = encum.createdby LEFT JOIN c_bpartner bp ON bp.c_bpartner_id = encum.c_bpartner_id JOIN efin_budget_manencumlines ln ON ln.efin_budget_manencum_id = encum.efin_budget_manencum_id LEFT JOIN (SELECT max(c_order.documentno) AS documentno, max(c_order.em_escm_notes) AS description, c_order.em_efin_budget_manencum_id FROM c_order GROUP BY c_order.em_efin_budget_manencum_id) ord ON ord.em_efin_budget_manencum_id = encum.efin_budget_manencum_id LEFT JOIN efin_reservation_dataload res ON res.efin_reservation_dataload_id = encum.efin_reservation_dataload_id LEFT JOIN efin_commits_dataload commits ON commits.efin_commits_dataload_id = encum.efin_commits_dataload_id JOIN c_validcombination com ON com.c_validcombination_id = ln.c_validcombination_id JOIN c_elementvalue el ON el.c_elementvalue_id = com.account_id WHERE encum.c_campaign_id = '8CFC8D85BC484DC7AFB75E3DA60FE30F' AND encum.efin_budgetint_id = 'D8D5FA6B54E345B0B0331BC5764BDFAC' ORDER BY ord.documentno]]></view>
  </database>
