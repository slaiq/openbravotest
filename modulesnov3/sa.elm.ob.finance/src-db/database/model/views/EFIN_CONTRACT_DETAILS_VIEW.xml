<?xml version="1.0"?>
  <database name="VIEW EFIN_CONTRACT_DETAILS_VIEW">
    <view name="EFIN_CONTRACT_DETAILS_VIEW"><![CDATA[SELECT mainord.documentno AS grp_contractno, mainord.po_contract_no AS legacy_contract_no, mainord.computerno AS legacy_computerno, mainord.em_escm_notes AS contractname, mainord.value AS account_number, mainord.name AS account_name, mainord.cur_contract_amount, mainord.supplier AS supplier_name, mainord.consultant AS consultane_name, mainord.createdby, mainord.created, mainord.em_escm_appstatus AS contract_status, mainord.grp_encum_number, mainord.legacy_commitno, (SELECT sum(ordln.linenetamt) AS contract_basic_amount FROM c_order ord JOIN c_orderline ordln ON ord.c_order_id = ordln.c_order_id JOIN c_validcombination comb ON ordln.em_efin_c_validcombination_id = comb.c_validcombination_id JOIN c_elementvalue ele ON ele.c_elementvalue_id = comb.account_id WHERE ord.em_escm_revision = 0 AND ele.value = mainord.value AND ord.documentno = mainord.documentno GROUP BY ord.documentno ORDER BY ord.documentno) AS contract_basic_amount FROM (SELECT mainord_1.c_order_id, sum(ordln.linenetamt) AS cur_contract_amount, ele.c_elementvalue_id, mainord_1.documentno, ele.value, mainord_1.em_escm_notes, ele.name, leg.po_contract_no, leg.computerno, bp.name AS supplier, encum.documentno AS grp_encum_number, commits.commit_no AS legacy_commitno, cre.name AS createdby, mainord_1.created, con.name AS consultant, mainord_1.em_escm_appstatus FROM (SELECT ord.documentno, ord.c_order_id, ord.em_escm_notes, ord.em_escm_legacycontract, ord.em_efin_budget_manencum_id, ord.c_bpartner_id, ord.em_escm_consultant, ord.createdby, ord.created, ord.em_escm_appstatus FROM c_order ord JOIN (SELECT max(ord_1.em_escm_revision) AS revision, ord_1.documentno FROM c_order ord_1 GROUP BY ord_1.documentno) aord ON aord.documentno = ord.documentno AND ord.em_escm_revision = aord.revision) mainord_1 LEFT JOIN escm_legacy_contract leg ON leg.escm_legacy_contract_id = mainord_1.em_escm_legacycontract LEFT JOIN efin_budget_manencum encum ON encum.efin_budget_manencum_id = mainord_1.em_efin_budget_manencum_id LEFT JOIN efin_commits_dataload commits ON commits.efin_commits_dataload_id = encum.efin_commits_dataload_id LEFT JOIN c_bpartner bp ON bp.c_bpartner_id = mainord_1.c_bpartner_id JOIN ad_user cre ON cre.ad_user_id = mainord_1.createdby LEFT JOIN c_bpartner con ON mainord_1.em_escm_consultant = con.c_bpartner_id JOIN c_orderline ordln ON mainord_1.c_order_id = ordln.c_order_id JOIN c_validcombination comb ON ordln.em_efin_c_validcombination_id = comb.c_validcombination_id JOIN c_elementvalue ele ON ele.c_elementvalue_id = comb.account_id GROUP BY mainord_1.c_order_id, ele.c_elementvalue_id, mainord_1.documentno, ele.value, mainord_1.em_escm_notes, leg.po_contract_no, leg.computerno, encum.documentno, bp.name, cre.name, mainord_1.created, con.name, mainord_1.em_escm_appstatus, commits.commit_no) mainord ORDER BY mainord.value, mainord.documentno]]></view>
  </database>
