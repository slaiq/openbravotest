<?xml version="1.0"?>
  <database name="VIEW EHCM_POSITIONTREE_V">
    <view name="EHCM_POSITIONTREE_V"><![CDATA[SELECT a.ehcm_positiontree_v_id, a.ad_client_id, a.ad_org_id, a.isactive, a.created, a.createdby, a.updated, a.updatedby, a.ehcm_position_id, a.pos_parent_id, a.noofsubordinates, 'Y' AS ishierarchy, a.ehcm_position_tree_id, a.name FROM (SELECT pos.ehcm_position_id, sup.ad_client_id, sup.ad_org_id, sup.isactive, sup.created, sup.createdby, sup.updated, sup.updatedby, sup.noofsubordinates, NULL AS pos_parent_id, sup.ehcm_position_tree_id, sup.ehcm_poshierarchy_pos_id AS ehcm_positiontree_v_id, (((pos.job_no || '-') || jobs.value) || '-') || jobs.job_title AS name FROM ehcm_poshierarchy_pos sup JOIN ehcm_position pos ON pos.ehcm_position_id = sup.ehcm_position_id AND NOT (sup.ehcm_position_id IN (SELECT node.ehcm_position_id FROM ehcm_poshierarchy_posnode node LEFT JOIN ehcm_poshierarchy_pos super ON node.ehcm_poshierarchy_pos_id = super.ehcm_poshierarchy_pos_id WHERE super.ehcm_position_tree_id = sup.ehcm_position_tree_id)) JOIN ehcm_jobs jobs ON jobs.ehcm_jobs_id = pos.ehcm_jobs_id UNION SELECT pos.ehcm_position_id, sup.ad_client_id, sup.ad_org_id, sup.isactive, sup.created, sup.createdby, sup.updated, sup.updatedby, node.noofsubordinates, COALESCE((SELECT supnode.ehcm_poshierarchy_posnode_id FROM ehcm_poshierarchy_posnode supnode WHERE (supnode.ehcm_poshierarchy_pos_id IN (SELECT ehcm_poshierarchy_pos.ehcm_poshierarchy_pos_id FROM ehcm_poshierarchy_pos WHERE ehcm_poshierarchy_pos.ehcm_position_tree_id = sup.ehcm_position_tree_id)) AND supnode.ehcm_position_id = sup.ehcm_position_id), sup.ehcm_poshierarchy_pos_id) AS pos_parent_id, sup.ehcm_position_tree_id, node.ehcm_poshierarchy_posnode_id AS ehcm_positiontree_v_id, (((pos.job_no || '-') || jobs.value) || '-') || jobs.job_title AS name FROM ehcm_poshierarchy_posnode node JOIN ehcm_poshierarchy_pos sup ON node.ehcm_poshierarchy_pos_id = sup.ehcm_poshierarchy_pos_id JOIN ehcm_position pos ON pos.ehcm_position_id = node.ehcm_position_id AND (sup.ehcm_position_id IN (SELECT super.ehcm_position_id FROM ehcm_poshierarchy_pos super WHERE super.ehcm_position_tree_id = sup.ehcm_position_tree_id)) JOIN ehcm_jobs jobs ON jobs.ehcm_jobs_id = pos.ehcm_jobs_id) a]]></view>
  </database>
