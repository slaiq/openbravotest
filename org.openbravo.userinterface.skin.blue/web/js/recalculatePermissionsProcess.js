OB=OB||{};OB.RoleInheritance={execute:function(d,a){var b,c=d.button.contextView.viewGrid.getSelectedRecords(),e;e=function(h,g,f){isc.clearPrompt();if(g.message.severity==="success"){a.view.messageBar.setMessage(isc.OBMessageBar.TYPE_SUCCESS,g.message.title,g.message.text);}else{a.view.messageBar.setMessage(isc.OBMessageBar.TYPE_ERROR,g.message.title,g.message.text);
}a.view.refresh();};OB.RemoteCallManager.call(d.actionHandler,{roles:d.roles},{},e);isc.showPrompt(OB.I18N.getLabel("OBUIAPP_PROCESSING")+isc.Canvas.imgHTML({src:OB.Styles.LoadingPrompt.loadingImage.src}));},recalculatePermissions:function(h,a){var c,g,f,b,e=h.button.contextView.viewGrid.getSelectedRecords(),d=[];
for(i=0;i<e.length;i++){d.push(e[i].id);}h.roles=d;h.actionHandler="org.openbravo.role.inheritance.RecalculatePermissionsHandler";if(e.length==1){b=e[0].name;c=e[0].template;if(c){g="RecalculateTemplateRolePermissions";}else{g="RecalculateRolePermissions";}f=OB.I18N.getLabel(g,[b]);}else{f=OB.I18N.getLabel("RecalculateMultipleRolesPermissions");
}isc.confirm(f,{isModal:true,showModalMask:true,title:OB.I18N.getLabel("RecalculatePermissions")},function(j){if(j){OB.RoleInheritance.execute(h,a);}});}};