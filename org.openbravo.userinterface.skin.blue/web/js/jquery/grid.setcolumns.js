(function(b){b.jgrid.extend({setColumns:function(a){a=b.extend({top:0,left:0,width:200,height:"auto",dataheight:"auto",modal:false,drag:true,beforeShowForm:null,afterShowForm:null,afterSubmitForm:null,closeOnEscape:true,ShrinkToFit:false,jqModal:false,saveicon:[true,"left","ui-icon-disk"],closeicon:[true,"left","ui-icon-close"],onClose:null,colnameview:true,closeAfterSubmit:true,updateAfterCheck:false,recreateForm:false},b.jgrid.col,a||{});
return this.each(function(){var s=this;if(!s.grid){return;}var r=typeof a.beforeShowForm==="function"?true:false;var x=typeof a.afterShowForm==="function"?true:false;var w=typeof a.afterSubmitForm==="function"?true:false;var y=s.p.id,t="ColTbl_"+y,v={themodal:"colmod"+y,modalhead:"colhd"+y,modalcontent:"colcnt"+y,scrollelm:t};
if(a.recreateForm===true&&b("#"+v.themodal).html()!=null){b("#"+v.themodal).remove();}if(b("#"+v.themodal).html()!=null){if(r){a.beforeShowForm(b("#"+t));}b.jgrid.viewModal("#"+v.themodal,{gbox:"#gbox_"+y,jqm:a.jqModal,jqM:false,modal:a.modal});if(x){a.afterShowForm(b("#"+t));}}else{var q=isNaN(a.dataheight)?a.dataheight:a.dataheight+"px";
var p="<div id='"+t+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+q+";'>";p+="<table class='ColTable' cellspacing='1' cellpading='2' border='0'><tbody>";for(i=0;i<this.p.colNames.length;i++){if(!s.p.colModel[i].hidedlg){p+="<tr><td style='white-space: pre;'><input type='checkbox' style='margin-right:5px;' id='col_"+this.p.colModel[i].name+"' class='cbox' value='T' "+((this.p.colModel[i].hidden===false)?"checked":"")+"/>"+"<label for='col_"+this.p.colModel[i].name+"'>"+this.p.colNames[i]+((a.colnameview)?" ("+this.p.colModel[i].name+")":"")+"</label></td></tr>";
}}p+="</tbody></table></div>";var u=!a.updateAfterCheck?"<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+a.bSubmit+"</a>":"",o="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+a.bCancel+"</a>";p+="<table border='0' class='EditTable' id='"+t+"_2'><tbody><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DataTD ui-widget-content'></td></tr><tr><td class='ColButton EditButton'>"+u+"&#160;"+o+"</td></tr></tbody></table>";
a.gbox="#gbox_"+y;b.jgrid.createModal(v,p,a,"#gview_"+s.p.id,b("#gview_"+s.p.id)[0]);if(a.saveicon[0]==true){b("#dData","#"+t+"_2").addClass(a.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.saveicon[2]+"'></span>");}if(a.closeicon[0]==true){b("#eData","#"+t+"_2").addClass(a.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.closeicon[2]+"'></span>");
}if(!a.updateAfterCheck){b("#dData","#"+t+"_2").click(function(c){for(i=0;i<s.p.colModel.length;i++){if(!s.p.colModel[i].hidedlg){var d=s.p.colModel[i].name.replace(/\./g,"\\.");if(b("#col_"+d,"#"+t).attr("checked")){b(s).jqGrid("showCol",s.p.colModel[i].name);b("#col_"+d,"#"+t).attr("defaultChecked",true);
}else{b(s).jqGrid("hideCol",s.p.colModel[i].name);b("#col_"+d,"#"+t).attr("defaultChecked","");}}}if(a.ShrinkToFit===true){b(s).jqGrid("setGridWidth",s.grid.width-0.001,true);}if(a.closeAfterSubmit){b.jgrid.hideModal("#"+v.themodal,{gb:"#gbox_"+y,jqm:a.jqModal,onClose:a.onClose});}if(w){a.afterSubmitForm(b("#"+t));
}return false;});}else{b(":input","#"+t).click(function(d){var c=this.id.substr(4);if(c){if(this.checked){b(s).jqGrid("showCol",c);}else{b(s).jqGrid("hideCol",c);}if(a.ShrinkToFit===true){b(s).jqGrid("setGridWidth",s.grid.width-0.001,true);}}return this;});}b("#eData","#"+t+"_2").click(function(c){b.jgrid.hideModal("#"+v.themodal,{gb:"#gbox_"+y,jqm:a.jqModal,onClose:a.onClose});
return false;});b("#dData, #eData","#"+t+"_2").hover(function(){b(this).addClass("ui-state-hover");},function(){b(this).removeClass("ui-state-hover");});if(r){a.beforeShowForm(b("#"+t));}b.jgrid.viewModal("#"+v.themodal,{gbox:"#gbox_"+y,jqm:a.jqModal,jqM:true,modal:a.modal});if(x){a.afterShowForm(b("#"+t));
}}});}});})(jQuery);