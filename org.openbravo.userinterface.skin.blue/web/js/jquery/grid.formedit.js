(function(c){var d=null;c.jgrid.extend({searchGrid:function(a){a=c.extend({recreateFilter:false,drag:true,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:true,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,closeAfterSearch:false,closeAfterReset:false,closeOnEscape:false,multipleSearch:false,cloneSearchRowOnAdd:true,sopt:null,stringResult:undefined,onClose:null,useDataProxy:false,overlay:true},c.jgrid.search,a||{});
return this.each(function(){var y=this;if(!y.grid){return;}var C="fbox_"+y.p.id,B=true;function G(n,g){var h=n.p.postData[g.sFilter];if(typeof(h)=="string"){h=c.jgrid.parse(h);}if(h){if(h.groupOp){n.SearchFilter.setGroupOp(h.groupOp);}if(h.rules){var m,i=0,l=h.rules.length,f=false;for(;i<l;i++){m=h.rules[i];
if(m.field!==undefined&&m.op!==undefined&&m.data!==undefined){f=n.SearchFilter.setFilter({"sfref":n.SearchFilter.$.find(".sf:last"),"filter":c.extend({},m)});if(f){n.SearchFilter.add();}}}}}}function E(g){if(a.onClose){var f=a.onClose(g);if(typeof f=="boolean"&&!f){return;}}g.hide();if(a.overlay===true){c(".jqgrid-overlay:first","#gbox_"+y.p.id).hide();
}}function D(){var f=c(".ui-searchFilter").length;if(f>1){var g=c("#"+C).css("zIndex");c("#"+C).css({zIndex:parseInt(g,10)+f});}c("#"+C).show();if(a.overlay===true){c(".jqgrid-overlay:first","#gbox_"+y.p.id).show();}try{c(":input:visible","#"+C)[0].focus();}catch(h){}}function I(f){var i=(f!==undefined),g=c("#"+y.p.id),h={};
if(a.multipleSearch===false){h[a.sField]=f.rules[0].field;h[a.sValue]=f.rules[0].data;h[a.sOper]=f.rules[0].op;}else{h[a.sFilter]=f;}g[0].p.search=i;c.extend(g[0].p.postData,h);g.trigger("reloadGrid",[{page:1}]);if(a.closeAfterSearch){E(c("#"+C));}}function x(f){var g=f&&f.hasOwnProperty("reload")?f.reload:true,h=c("#"+y.p.id),i={};
h[0].p.search=false;if(a.multipleSearch===false){i[a.sField]=i[a.sValue]=i[a.sOper]="";}else{i[a.sFilter]="";}c.extend(h[0].p.postData,i);if(g){h.trigger("reloadGrid",[{page:1}]);}if(a.closeAfterReset){E(c("#"+C));}}if(c.fn.searchFilter){if(a.recreateFilter===true){c("#"+C).remove();}if(c("#"+C).html()!=null){if(c.isFunction(a.beforeShowSearch)){B=a.beforeShowSearch(c("#"+C));
if(typeof(B)=="undefined"){B=true;}}if(B===false){return;}D();if(c.isFunction(a.afterShowSearch)){a.afterShowSearch(c("#"+C));}}else{var k=[],F=c("#"+y.p.id).jqGrid("getGridParam","colNames"),J=c("#"+y.p.id).jqGrid("getGridParam","colModel"),H=["eq","ne","lt","le","gt","ge","bw","bn","in","ni","ew","en","cn","nc"],z,b,A,e=[];
if(a.sopt!==null){A=0;for(z=0;z<a.sopt.length;z++){if((b=c.inArray(a.sopt[z],H))!=-1){e[A]={op:a.sopt[z],text:a.odata[b]};A++;}}}else{for(z=0;z<H.length;z++){e[z]={op:H[z],text:a.odata[z]};}}c.each(J,function(p,f){var i=(typeof f.search==="undefined")?true:f.search,o=(f.hidden===true),l=c.extend({},{text:F[p],itemval:f.index||f.name},this.searchoptions),q=(l.searchhidden===true);
if(typeof l.sopt!=="undefined"){A=0;l.ops=[];if(l.sopt.length>0){for(z=0;z<l.sopt.length;z++){if((b=c.inArray(l.sopt[z],H))!=-1){l.ops[A]={op:l.sopt[z],text:a.odata[b]};A++;}}}}if(typeof(this.stype)==="undefined"){this.stype="text";}if(this.stype=="select"){if(l.dataUrl!==undefined){}else{var m;if(l.value){m=l.value;
}else{if(this.editoptions){m=this.editoptions.value;}}if(m){l.dataValues=[];if(typeof(m)==="string"){var n=m.split(";"),g;for(z=0;z<n.length;z++){g=n[z].split(":");l.dataValues[z]={value:g[0],text:g[1]};}}else{if(typeof(m)==="object"){z=0;for(var h in m){if(m.hasOwnProperty(h)){l.dataValues[z]={value:h,text:m[h]};
z++;}}}}}}}if((q&&i)||(i&&!o)){k.push(l);}});if(k.length>0){c("<div id='"+C+"' role='dialog' tabindex='-1'></div>").insertBefore("#gview_"+y.p.id);if(a.stringResult===undefined){a.stringResult=a.multipleSearch;}y.SearchFilter=c("#"+C).searchFilter(k,{groupOps:a.groupOps,operators:e,onClose:E,resetText:a.Reset,searchText:a.Find,windowTitle:a.caption,rulesText:a.rulesText,matchText:a.matchText,onSearch:I,onReset:x,stringResult:a.stringResult,ajaxSelectOptions:c.extend({},c.jgrid.ajaxOptions,y.p.ajaxSelectOptions||{}),clone:a.cloneSearchRowOnAdd});
c(".ui-widget-overlay","#"+C).remove();if(y.p.direction=="rtl"){c(".ui-closer","#"+C).css("float","left");}if(a.drag===true){c("#"+C+" table thead tr:first td:first").css("cursor","move");if(jQuery.fn.jqDrag){c("#"+C).jqDrag(c("#"+C+" table thead tr:first td:first"));}else{try{c("#"+C).draggable({handle:c("#"+C+" table thead tr:first td:first")});
}catch(j){}}}if(a.multipleSearch===false){c(".ui-del, .ui-add, .ui-del, .ui-add-last, .matchText, .rulesText","#"+C).hide();c("select[name='groupOp']","#"+C).hide();}if(a.multipleSearch===true&&a.loadDefaults===true){G(y,a);}if(c.isFunction(a.onInitializeSearch)){a.onInitializeSearch(c("#"+C));}if(c.isFunction(a.beforeShowSearch)){B=a.beforeShowSearch(c("#"+C));
if(typeof(B)=="undefined"){B=true;}}if(B===false){return;}D();if(c.isFunction(a.afterShowSearch)){a.afterShowSearch(c("#"+C));}if(a.closeOnEscape===true){c("#"+C).keydown(function(f){if(f.which==27){E(c("#"+C));}if(f.which==13){c(".ui-search",this).click();}});}}}}});},editGridRow:function(b,a){a=c.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:false,overlay:10,drag:true,resize:true,url:null,mtype:"POST",clearAfterAdd:true,closeAfterEdit:false,reloadAfterSubmit:true,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:false,jqModal:true,closeOnEscape:false,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[false,13],navkeys:[false,38,40],checkOnSubmit:false,checkOnUpdate:false,_savedData:{},processing:false,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:true},c.jgrid.edit,a||{});
d=a;return this.each(function(){var aQ=this;if(!aQ.grid||!b){return;}var au=aQ.p.id,ax="FrmGrid_"+au,aA="TblGrid_"+au,aM={themodal:"editmod"+au,modalhead:"edithd"+au,modalcontent:"editcnt"+au,scrollelm:ax},at=c.isFunction(d.beforeShowForm)?d.beforeShowForm:false,ai=c.isFunction(d.afterShowForm)?d.afterShowForm:false,aj=c.isFunction(d.beforeInitData)?d.beforeInitData:false,aG=c.isFunction(d.onInitializeForm)?d.onInitializeForm:false,ao=null,X=true,an=1,aE=0,ar,af,ap,av;
if(b=="new"){b="_empty";a.caption=a.addCaption;}else{a.caption=a.editCaption;}if(a.recreateForm===true&&c("#"+aM.themodal).html()!=null){c("#"+aM.themodal).remove();}var aK=true;if(a.checkOnUpdate&&a.jqModal&&!a.modal){aK=false;}function Z(){c(".FormElement","#"+aA).each(function(h){var e=c(".customelement",this);
if(e.length){var g=e[0],j=c(g).attr("name");c.each(aQ.p.colModel,function(m,k){if(this.name==j&&this.editoptions&&c.isFunction(this.editoptions.custom_value)){try{ar[j]=this.editoptions.custom_value(c("#"+j,"#"+aA),"get");if(ar[j]===undefined){throw"e1";}}catch(l){if(l=="e1"){c.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+c.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose);
}else{c.jgrid.info_dialog(jQuery.jgrid.errors.errcap,l.message,jQuery.jgrid.edit.bClose);}}return true;}});}else{switch(c(this).get(0).type){case"checkbox":if(c(this).attr("checked")){ar[this.name]=c(this).val();}else{var i=c(this).attr("offval");ar[this.name]=i;}break;case"select-one":ar[this.name]=c("option:selected",this).val();
af[this.name]=c("option:selected",this).text();break;case"select-multiple":ar[this.name]=c(this).val();if(ar[this.name]){ar[this.name]=ar[this.name].join(",");}else{ar[this.name]="";}var f=[];c("option:selected",this).each(function(l,k){f[l]=c(k).text();});af[this.name]=f.join(",");break;case"password":case"text":case"textarea":case"button":ar[this.name]=c(this).val();
break;}if(aQ.p.autoencode){ar[this.name]=c.jgrid.htmlEncode(ar[this.name]);}}});return true;}function aC(f,p,s,u){var i,o,g,t=0,q,j,h,m=[],e=false,n="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",k="";for(var r=1;r<=u;r++){k+=n;}if(f!="_empty"){e=c(p).jqGrid("getInd",f);}c(p.p.colModel).each(function(x){i=this.name;
if(this.editrules&&this.editrules.edithidden===true){o=false;}else{o=this.hidden===true?true:false;}j=o?"style='display:none'":"";if(i!=="cb"&&i!=="subgrid"&&this.editable===true&&i!=="rn"){if(e===false){q="";}else{if(i==p.p.ExpandColumn&&p.p.treeGrid===true){q=c("td:eq("+x+")",p.rows[e]).text();}else{try{q=c.unformat(c("td:eq("+x+")",p.rows[e]),{rowId:f,colModel:this},x);
}catch(z){q=c("td:eq("+x+")",p.rows[e]).html();}}}var y=c.extend({},this.editoptions||{},{id:i,name:i}),A=c.extend({},{elmprefix:"",elmsuffix:"",rowabove:false,rowcontent:""},this.formoptions||{}),w=parseInt(A.rowpos,10)||t+1,B=parseInt((parseInt(A.colpos,10)||1)*2,10);if(f=="_empty"&&y.defaultValue){q=c.isFunction(y.defaultValue)?y.defaultValue():y.defaultValue;
}if(!this.edittype){this.edittype="text";}if(aQ.p.autoencode){q=c.jgrid.htmlDecode(q);}h=c.jgrid.createEl(this.edittype,y,q,false,c.extend({},c.jgrid.ajaxOptions,p.p.ajaxSelectOptions||{}));if(q===""&&this.edittype=="checkbox"){q=c(h).attr("offval");}if(q===""&&this.edittype=="select"){q=c("option:eq(0)",h).text();
}if(d.checkOnSubmit||d.checkOnUpdate){d._savedData[i]=q;}c(h).addClass("FormElement");if(this.edittype=="text"||this.edittype=="textarea"){c(h).addClass("ui-widget-content ui-corner-all");}g=c(s).find("tr[rowpos="+w+"]");if(A.rowabove){var v=c("<tr><td class='contentinfo' colspan='"+(u*2)+"'>"+A.rowcontent+"</td></tr>");
c(s).append(v);v[0].rp=w;}if(g.length===0){g=c("<tr "+j+" rowpos='"+w+"'></tr>").addClass("FormData").attr("id","tr_"+i);c(g).append(k);c(s).append(g);g[0].rp=w;}c("td:eq("+(B-2)+")",g[0]).html(typeof A.label==="undefined"?p.p.colNames[x]:A.label);c("td:eq("+(B-1)+")",g[0]).append(A.elmprefix).append(h).append(A.elmsuffix);
m[t]=x;t++;}});if(t>0){var l=c("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(u*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+p.p.id+"_id' value='"+f+"'/></td></tr>");l[0].rp=t+999;c(s).append(l);if(d.checkOnSubmit||d.checkOnUpdate){d._savedData[p.p.id+"_id"]=f;
}}return m;}function aF(h,m,e){var i,p=0,l,n,g,o,k;if(d.checkOnSubmit||d.checkOnUpdate){d._savedData={};d._savedData[m.p.id+"_id"]=h;}var j=m.p.colModel;if(h=="_empty"){c(j).each(function(q){i=this.name;g=c.extend({},this.editoptions||{});n=c("#"+c.jgrid.jqID(i),"#"+e);if(n[0]!=null){o="";if(g.defaultValue){o=c.isFunction(g.defaultValue)?g.defaultValue():g.defaultValue;
if(n[0].type=="checkbox"){k=o.toLowerCase();if(k.search(/(false|0|no|off|undefined)/i)<0&&k!==""){n[0].checked=true;n[0].defaultChecked=true;n[0].value=o;}else{n.attr({checked:"",defaultChecked:""});}}else{n.val(o);}}else{if(n[0].type=="checkbox"){n[0].checked=false;n[0].defaultChecked=false;o=c(n).attr("offval");
}else{if(n[0].type&&n[0].type.substr(0,6)=="select"){n[0].selectedIndex=0;}else{n.val(o);}}}if(d.checkOnSubmit===true||d.checkOnUpdate){d._savedData[i]=o;}}});c("#id_g","#"+e).val(h);return;}var f=c(m).jqGrid("getInd",h,true);if(!f){return;}c("td",f).each(function(r){i=j[r].name;if(i!=="cb"&&i!=="subgrid"&&i!=="rn"&&j[r].editable===true){if(i==m.p.ExpandColumn&&m.p.treeGrid===true){l=c(this).text();
}else{try{l=c.unformat(c(this),{rowId:h,colModel:j[r]},r);}catch(s){l=c(this).html();}}if(aQ.p.autoencode){l=c.jgrid.htmlDecode(l);}if(d.checkOnSubmit===true||d.checkOnUpdate){d._savedData[i]=l;}i=c.jgrid.jqID(i);switch(j[r].edittype){case"password":case"text":case"button":case"image":c("#"+i,"#"+e).val(l);
break;case"textarea":if(l=="&nbsp;"||l=="&#160;"||(l.length==1&&l.charCodeAt(0)==160)){l="";}c("#"+i,"#"+e).val(l);break;case"select":var t=l.split(",");t=c.map(t,function(v){return c.trim(v);});c("#"+i+" option","#"+e).each(function(v){if(!j[r].editoptions.multiple&&(t[0]==c.trim(c(this).text())||t[0]==c.trim(c(this).val()))){this.selected=true;
}else{if(j[r].editoptions.multiple){if(c.inArray(c.trim(c(this).text()),t)>-1||c.inArray(c.trim(c(this).val()),t)>-1){this.selected=true;}else{this.selected=false;}}else{this.selected=false;}}});break;case"checkbox":l=l+"";if(j[r].editoptions&&j[r].editoptions.value){var u=j[r].editoptions.value.split(":");
if(u[0]==l){c("#"+i,"#"+e).attr("checked",true);c("#"+i,"#"+e).attr("defaultChecked",true);}else{c("#"+i,"#"+e).attr("checked",false);c("#"+i,"#"+e).attr("defaultChecked","");}}else{l=l.toLowerCase();if(l.search(/(false|0|no|off|undefined)/i)<0&&l!==""){c("#"+i,"#"+e).attr("checked",true);c("#"+i,"#"+e).attr("defaultChecked",true);
}else{c("#"+i,"#"+e).attr("checked",false);c("#"+i,"#"+e).attr("defaultChecked","");}}break;case"custom":try{if(j[r].editoptions&&c.isFunction(j[r].editoptions.custom_value)){j[r].editoptions.custom_value(c("#"+i,"#"+e),"set",l);}else{throw"e1";}}catch(q){if(q=="e1"){c.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+c.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);
}else{c.jgrid.info_dialog(jQuery.jgrid.errors.errcap,q.message,jQuery.jgrid.edit.bClose);}}break;}p++;}});if(p>0){c("#id_g","#"+aA).val(h);}}function aL(){var j,k=[true,"",""],h={},e=aQ.p.prmNames,l,f;if(c.isFunction(d.beforeCheckValues)){var m=d.beforeCheckValues(ar,c("#"+ax),ar[aQ.p.id+"_id"]=="_empty"?e.addoper:e.editoper);
if(m&&typeof(m)==="object"){ar=m;}}for(var i in ar){if(ar.hasOwnProperty(i)){k=c.jgrid.checkValues(ar[i],i,aQ);if(k[0]===false){break;}}}if(k[0]){if(c.isFunction(d.onclickSubmit)){h=d.onclickSubmit(d,ar)||{};}if(c.isFunction(d.beforeSubmit)){k=d.beforeSubmit(ar,c("#"+ax));}}if(k[0]&&!d.processing){d.processing=true;
c("#sData","#"+aA+"_2").addClass("ui-state-active");f=e.oper;l=e.id;ar[f]=(c.trim(ar[aQ.p.id+"_id"])=="_empty")?e.addoper:e.editoper;if(ar[f]!=e.addoper){ar[l]=ar[aQ.p.id+"_id"];}else{if(ar[l]===undefined){ar[l]=ar[aQ.p.id+"_id"];}}delete ar[aQ.p.id+"_id"];ar=c.extend(ar,d.editData,h);var g=c.extend({url:d.url?d.url:c(aQ).jqGrid("getGridParam","editurl"),type:d.mtype,data:c.isFunction(d.serializeEditData)?d.serializeEditData(ar):ar,complete:function(n,p){if(p!="success"){k[0]=false;
if(c.isFunction(d.errorTextFormat)){k[1]=d.errorTextFormat(n);}else{k[1]=p+" Status: '"+n.statusText+"'. Error code: "+n.status;}}else{if(c.isFunction(d.afterSubmit)){k=d.afterSubmit(n,ar);}}if(k[0]===false){c("#FormError>td","#"+aA).html(k[1]);c("#FormError","#"+aA).show();}else{c.each(aQ.p.colModel,function(t,r){if(af[this.name]&&this.formatter&&this.formatter=="select"){try{delete af[this.name];
}catch(s){}}});ar=c.extend(ar,af);if(aQ.p.autoencode){c.each(ar,function(r,s){ar[r]=c.jgrid.htmlDecode(s);});}d.reloadAfterSubmit=d.reloadAfterSubmit&&aQ.p.datatype!="local";if(ar[f]==e.addoper){if(!k[2]){k[2]=(parseInt(aQ.p.records,10)+1)+"";}ar[l]=k[2];if(d.closeAfterAdd){if(d.reloadAfterSubmit){c(aQ).trigger("reloadGrid");
}else{c(aQ).jqGrid("addRowData",k[2],ar,a.addedrow);c(aQ).jqGrid("setSelection",k[2]);}c.jgrid.hideModal("#"+aM.themodal,{gb:"#gbox_"+au,jqm:a.jqModal,onClose:d.onClose});}else{if(d.clearAfterAdd){if(d.reloadAfterSubmit){c(aQ).trigger("reloadGrid");}else{c(aQ).jqGrid("addRowData",k[2],ar,a.addedrow);
}aF("_empty",aQ,ax);}else{if(d.reloadAfterSubmit){c(aQ).trigger("reloadGrid");}else{c(aQ).jqGrid("addRowData",k[2],ar,a.addedrow);}}}}else{if(d.reloadAfterSubmit){c(aQ).trigger("reloadGrid");if(!d.closeAfterEdit){setTimeout(function(){c(aQ).jqGrid("setSelection",ar[l]);},1000);}}else{if(aQ.p.treeGrid===true){c(aQ).jqGrid("setTreeRow",ar[l],ar);
}else{c(aQ).jqGrid("setRowData",ar[l],ar);}}if(d.closeAfterEdit){c.jgrid.hideModal("#"+aM.themodal,{gb:"#gbox_"+au,jqm:a.jqModal,onClose:d.onClose});}}if(c.isFunction(d.afterComplete)){j=n;setTimeout(function(){d.afterComplete(j,ar,c("#"+ax));j=null;},500);}}d.processing=false;if(d.checkOnSubmit||d.checkOnUpdate){c("#"+ax).data("disabled",false);
if(d._savedData[aQ.p.id+"_id"]!="_empty"){for(var o in d._savedData){if(ar[o]){d._savedData[o]=ar[o];}}}}c("#sData","#"+aA+"_2").removeClass("ui-state-active");try{c(":input:visible","#"+ax)[0].focus();}catch(q){}},error:function(n,p,o){c("#FormError>td","#"+aA).html(p+" : "+o);c("#FormError","#"+aA).show();
d.processing=false;c("#"+ax).data("disabled",false);c("#sData","#"+aA+"_2").removeClass("ui-state-active");}},c.jgrid.ajaxOptions,d.ajaxEditOptions);if(!g.url&&!d.useDataProxy){if(c.isFunction(aQ.p.dataProxy)){d.useDataProxy=true;}else{k[0]=false;k[1]+=" "+c.jgrid.errors.nourl;}}if(k[0]){if(d.useDataProxy){aQ.p.dataProxy.call(aQ,g,"set_"+aQ.p.id);
}else{c.ajax(g);}}}if(k[0]===false){c("#FormError>td","#"+aA).html(k[1]);c("#FormError","#"+aA).show();}}function al(f,h){var g=false,e;for(e in f){if(f[e]!=h[e]){g=true;break;}}return g;}function aO(){var e=true;c("#FormError","#"+aA).hide();if(d.checkOnUpdate){ar={};af={};Z();ap=c.extend({},ar,af);
av=al(ap,d._savedData);if(av){c("#"+ax).data("disabled",true);c(".confirm","#"+aM.themodal).show();e=false;}}return e;}function aa(){if(b!=="_empty"&&typeof(aQ.p.savedRow)!=="undefined"&&aQ.p.savedRow.length>0&&c.isFunction(c.fn.jqGrid["restoreRow"])){for(var e=0;e<aQ.p.savedRow.length;e++){if(aQ.p.savedRow[e].id==b){c(aQ).jqGrid("restoreRow",b);
break;}}}}if(c("#"+aM.themodal).html()!=null){if(aj){X=aj(c("#"+ax));if(typeof(X)=="undefined"){X=true;}}if(X===false){return;}aa();c(".ui-jqdialog-title","#"+aM.modalhead).html(a.caption);c("#FormError","#"+aA).hide();if(d.topinfo){c(".topinfo","#"+aA+"_2").html(d.topinfo);c(".tinfo","#"+aA+"_2").show();
}else{c(".tinfo","#"+aA+"_2").hide();}if(d.bottominfo){c(".bottominfo","#"+aA+"_2").html(d.bottominfo);c(".binfo","#"+aA+"_2").show();}else{c(".binfo","#"+aA+"_2").hide();}aF(b,aQ,ax);if(b=="_empty"||!d.viewPagerButtons){c("#pData, #nData","#"+aA+"_2").hide();}else{c("#pData, #nData","#"+aA+"_2").show();
}if(d.processing===true){d.processing=false;c("#sData","#"+aA+"_2").removeClass("ui-state-active");}if(c("#"+ax).data("disabled")===true){c(".confirm","#"+aM.themodal).hide();c("#"+ax).data("disabled",false);}if(at){at(c("#"+ax));}c("#"+aM.themodal).data("onClose",d.onClose);c.jgrid.viewModal("#"+aM.themodal,{gbox:"#gbox_"+au,jqm:a.jqModal,jqM:false,overlay:a.overlay,modal:a.modal});
if(!aK){c(".jqmOverlay").click(function(){if(!aO()){return false;}c.jgrid.hideModal("#"+aM.themodal,{gb:"#gbox_"+au,jqm:a.jqModal,onClose:d.onClose});return false;});}if(ai){ai(c("#"+ax));}}else{var aD=isNaN(a.dataheight)?a.dataheight:a.dataheight+"px",ac=c("<form name='FormPost' id='"+ax+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+aD+";'></form>").data("disabled",false),aw=c("<table id='"+aA+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>");
if(aj){X=aj(c("#"+ax));if(typeof(X)=="undefined"){X=true;}}if(X===false){return;}aa();c(aQ.p.colModel).each(function(f){var e=this.formoptions;an=Math.max(an,e?e.colpos||0:0);aE=Math.max(aE,e?e.rowpos||0:0);});c(ac).append(aw);var ak=c("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+(an*2)+"'></td></tr>");
ak[0].rp=0;c(aw).append(ak);ak=c("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+(an*2)+"'>"+d.topinfo+"</td></tr>");ak[0].rp=0;c(aw).append(ak);var aP=aQ.p.direction=="rtl"?true:false,ad=aP?"nData":"pData",ab=aP?"pData":"nData";aC(b,aQ,aw,an);var aJ="<a href='javascript:void(0)' id='"+ad+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></div>",aI="<a href='javascript:void(0)' id='"+ab+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></div>",aN="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+a.bSubmit+"</a>",aB="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+a.bCancel+"</a>";
var ag="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+aA+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(aP?aI+aJ:aJ+aI)+"</td><td class='EditButton'>"+aN+aB+"</td></tr>";ag+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+d.bottominfo+"</td></tr>";
ag+="</tbody></table>";if(aE>0){var ay=[];c.each(c(aw)[0].rows,function(f,e){ay[f]=e;});ay.sort(function(e,f){if(e.rp>f.rp){return 1;}if(e.rp<f.rp){return -1;}return 0;});c.each(ay,function(f,e){c("tbody",aw).append(e);});}a.gbox="#gbox_"+au;var aH=false;if(a.closeOnEscape===true){a.closeOnEscape=false;
aH=true;}var ah=c("<span></span>").append(ac).append(ag);c.jgrid.createModal(aM,ah,a,"#gview_"+aQ.p.id,c("#gbox_"+aQ.p.id)[0]);if(aP){c("#pData, #nData","#"+aA+"_2").css("float","right");c(".EditButton","#"+aA+"_2").css("text-align","left");}if(d.topinfo){c(".tinfo","#"+aA+"_2").show();}if(d.bottominfo){c(".binfo","#"+aA+"_2").show();
}ah=null;ag=null;c("#"+aM.themodal).keydown(function(f){var e=f.target;if(c("#"+ax).data("disabled")===true){return false;}if(d.savekey[0]===true&&f.which==d.savekey[1]){if(e.tagName!="TEXTAREA"){c("#sData","#"+aA+"_2").trigger("click");return false;}}if(f.which===27){if(!aO()){return false;}if(aH){c.jgrid.hideModal(this,{gb:a.gbox,jqm:a.jqModal,onClose:d.onClose});
}return false;}if(d.navkeys[0]===true){if(c("#id_g","#"+aA).val()=="_empty"){return true;}if(f.which==d.navkeys[1]){c("#pData","#"+aA+"_2").trigger("click");return false;}if(f.which==d.navkeys[2]){c("#nData","#"+aA+"_2").trigger("click");return false;}}});if(a.checkOnUpdate){c("a.ui-jqdialog-titlebar-close span","#"+aM.themodal).removeClass("jqmClose");
c("a.ui-jqdialog-titlebar-close","#"+aM.themodal).unbind("click").click(function(){if(!aO()){return false;}c.jgrid.hideModal("#"+aM.themodal,{gb:"#gbox_"+au,jqm:a.jqModal,onClose:d.onClose});return false;});}a.saveicon=c.extend([true,"left","ui-icon-disk"],a.saveicon);a.closeicon=c.extend([true,"left","ui-icon-close"],a.closeicon);
if(a.saveicon[0]===true){c("#sData","#"+aA+"_2").addClass(a.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.saveicon[2]+"'></span>");}if(a.closeicon[0]===true){c("#cData","#"+aA+"_2").addClass(a.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.closeicon[2]+"'></span>");
}if(d.checkOnSubmit||d.checkOnUpdate){aN="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+a.bYes+"</a>";aI="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+a.bNo+"</a>";aB="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+a.bExit+"</a>";
var aq,az=a.zIndex||999;az++;if(c.browser.msie&&c.browser.version==6){aq='<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>';}else{aq="";}c("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+az+";display:none;'>&#160;"+aq+"</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(az+1)+"'>"+a.saveData+"<br/><br/>"+aN+aI+aB+"</div>").insertAfter("#"+ax);
c("#sNew","#"+aM.themodal).click(function(){aL();c("#"+ax).data("disabled",false);c(".confirm","#"+aM.themodal).hide();return false;});c("#nNew","#"+aM.themodal).click(function(){c(".confirm","#"+aM.themodal).hide();c("#"+ax).data("disabled",false);setTimeout(function(){c(":input","#"+ax)[0].focus();
},0);return false;});c("#cNew","#"+aM.themodal).click(function(){c(".confirm","#"+aM.themodal).hide();c("#"+ax).data("disabled",false);c.jgrid.hideModal("#"+aM.themodal,{gb:"#gbox_"+au,jqm:a.jqModal,onClose:d.onClose});return false;});}if(aG){aG(c("#"+ax));}if(b=="_empty"||!d.viewPagerButtons){c("#pData,#nData","#"+aA+"_2").hide();
}else{c("#pData,#nData","#"+aA+"_2").show();}if(at){at(c("#"+ax));}c("#"+aM.themodal).data("onClose",d.onClose);c.jgrid.viewModal("#"+aM.themodal,{gbox:"#gbox_"+au,jqm:a.jqModal,overlay:a.overlay,modal:a.modal});if(!aK){c(".jqmOverlay").click(function(){if(!aO()){return false;}c.jgrid.hideModal("#"+aM.themodal,{gb:"#gbox_"+au,jqm:a.jqModal,onClose:d.onClose});
return false;});}if(ai){ai(c("#"+ax));}c(".fm-button","#"+aM.themodal).hover(function(){c(this).addClass("ui-state-hover");},function(){c(this).removeClass("ui-state-hover");});c("#sData","#"+aA+"_2").click(function(e){ar={};af={};c("#FormError","#"+aA).hide();Z();if(ar[aQ.p.id+"_id"]=="_empty"){aL();
}else{if(a.checkOnSubmit===true){ap=c.extend({},ar,af);av=al(ap,d._savedData);if(av){c("#"+ax).data("disabled",true);c(".confirm","#"+aM.themodal).show();}else{aL();}}else{aL();}}return false;});c("#cData","#"+aA+"_2").click(function(e){if(!aO()){return false;}c.jgrid.hideModal("#"+aM.themodal,{gb:"#gbox_"+au,jqm:a.jqModal,onClose:d.onClose});
return false;});c("#nData","#"+aA+"_2").click(function(f){if(!aO()){return false;}c("#FormError","#"+aA).hide();var e=Y();e[0]=parseInt(e[0],10);if(e[0]!=-1&&e[1][e[0]+1]){if(c.isFunction(a.onclickPgButtons)){a.onclickPgButtons("next",c("#"+ax),e[1][e[0]]);}aF(e[1][e[0]+1],aQ,ax);c(aQ).jqGrid("setSelection",e[1][e[0]+1]);
if(c.isFunction(a.afterclickPgButtons)){a.afterclickPgButtons("next",c("#"+ax),e[1][e[0]+1]);}am(e[0]+1,e[1].length-1);}return false;});c("#pData","#"+aA+"_2").click(function(e){if(!aO()){return false;}c("#FormError","#"+aA).hide();var f=Y();if(f[0]!=-1&&f[1][f[0]-1]){if(c.isFunction(a.onclickPgButtons)){a.onclickPgButtons("prev",c("#"+ax),f[1][f[0]]);
}aF(f[1][f[0]-1],aQ,ax);c(aQ).jqGrid("setSelection",f[1][f[0]-1]);if(c.isFunction(a.afterclickPgButtons)){a.afterclickPgButtons("prev",c("#"+ax),f[1][f[0]-1]);}am(f[0]-1,f[1].length-1);}return false;});}function am(f,e,g){if(f===0){c("#pData","#"+aA+"_2").addClass("ui-state-disabled");}else{c("#pData","#"+aA+"_2").removeClass("ui-state-disabled");
}if(f==e){c("#nData","#"+aA+"_2").addClass("ui-state-disabled");}else{c("#nData","#"+aA+"_2").removeClass("ui-state-disabled");}}function Y(){var f=c(aQ).jqGrid("getDataIDs"),g=c("#id_g","#"+aA).val(),e=c.inArray(g,f);return[e,f];}var ae=Y();am(ae[0],ae[1].length-1);});},viewGridRow:function(b,a){a=c.extend({top:0,left:0,width:0,height:"auto",dataheight:"auto",modal:false,overlay:10,drag:true,resize:true,jqModal:true,closeOnEscape:false,labelswidth:"30%",closeicon:[],navkeys:[false,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:true},c.jgrid.view,a||{});
return this.each(function(){var I=this;if(!I.grid||!b){return;}if(!a.imgpath){a.imgpath=I.p.imgpath;}var O=I.p.id,U="ViewGrid_"+O,M="ViewTbl_"+O,aa={themodal:"viewmod"+O,modalhead:"viewhd"+O,modalcontent:"viewcnt"+O,scrollelm:U},F=c.isFunction(a.beforeInitData)?a.beforeInitData:false,X=true,ac=1,ad=0;
function Z(){if(a.closeOnEscape===true||a.navkeys[0]===true){setTimeout(function(){c(".ui-jqdialog-titlebar-close","#"+aa.modalhead).focus();},0);}}function V(t,n,p,h){var x,u,m,j=0,e,A,f=[],o=false,s="<td class='CaptionTD form-view-label ui-widget-content' width='"+a.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",q="",w="<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>",r=["integer","number","currency"],k=0,l=0,v,y,g;
for(var i=1;i<=h;i++){q+=i==1?s:w;}c(n.p.colModel).each(function(B){if(this.editrules&&this.editrules.edithidden===true){u=false;}else{u=this.hidden===true?true:false;}if(!u&&this.align==="right"){if(this.formatter&&c.inArray(this.formatter,r)!==-1){k=Math.max(k,parseInt(this.width,10));}else{l=Math.max(l,parseInt(this.width,10));
}}});v=k!==0?k:l!==0?l:0;o=c(n).jqGrid("getInd",t);c(n.p.colModel).each(function(ag){x=this.name;y=false;if(this.editrules&&this.editrules.edithidden===true){u=false;}else{u=this.hidden===true?true:false;}A=u?"style='display:none'":"";g=(typeof this.viewable!="boolean")?true:this.viewable;if(x!=="cb"&&x!=="subgrid"&&x!=="rn"&&g){if(o===false){e="";
}else{if(x==n.p.ExpandColumn&&n.p.treeGrid===true){e=c("td:eq("+ag+")",n.rows[o]).text();}else{e=c("td:eq("+ag+")",n.rows[o]).html();}}y=this.align==="right"&&v!==0?true:false;var ah=c.extend({},this.editoptions||{},{id:x,name:x}),B=c.extend({},{rowabove:false,rowcontent:""},this.formoptions||{}),E=parseInt(B.rowpos,10)||j+1,C=parseInt((parseInt(B.colpos,10)||1)*2,10);
if(B.rowabove){var D=c("<tr><td class='contentinfo' colspan='"+(h*2)+"'>"+B.rowcontent+"</td></tr>");c(p).append(D);D[0].rp=E;}m=c(p).find("tr[rowpos="+E+"]");if(m.length===0){m=c("<tr "+A+" rowpos='"+E+"'></tr>").addClass("FormData").attr("id","trv_"+x);c(m).append(q);c(p).append(m);m[0].rp=E;}c("td:eq("+(C-2)+")",m[0]).html("<b>"+(typeof B.label==="undefined"?n.p.colNames[ag]:B.label)+"</b>");
c("td:eq("+(C-1)+")",m[0]).append("<span>"+e+"</span>").attr("id","v_"+x);if(y){c("td:eq("+(C-1)+") span",m[0]).css({"text-align":"right",width:v+"px"});}f[j]=ag;j++;}});if(j>0){var z=c("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(h*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+t+"'/></td></tr>");
z[0].rp=j+99;c(p).append(z);}return f;}function W(g,e){var k,l,h=0,i,j,f;f=c(e).jqGrid("getInd",g,true);if(!f){return;}c("td",f).each(function(m){k=e.p.colModel[m].name;if(e.p.colModel[m].editrules&&e.p.colModel[m].editrules.edithidden===true){l=false;}else{l=e.p.colModel[m].hidden===true?true:false;
}if(k!=="cb"&&k!=="subgrid"&&k!=="rn"){if(k==e.p.ExpandColumn&&e.p.treeGrid===true){i=c(this).text();}else{i=c(this).html();}j=c.extend({},e.p.colModel[m].editoptions||{});k=c.jgrid.jqID("v_"+k);c("#"+k+" span","#"+M).html(i);if(l){c("#"+k,"#"+M).parents("tr:first").hide();}h++;}});if(h>0){c("#id_g","#"+M).val(g);
}}if(c("#"+aa.themodal).html()!=null){if(F){X=F(c("#"+U));if(typeof(X)=="undefined"){X=true;}}if(X===false){return;}c(".ui-jqdialog-title","#"+aa.modalhead).html(a.caption);c("#FormError","#"+M).hide();W(b,I);if(c.isFunction(a.beforeShowForm)){a.beforeShowForm(c("#"+U));}c.jgrid.viewModal("#"+aa.themodal,{gbox:"#gbox_"+O,jqm:a.jqModal,jqM:false,overlay:a.overlay,modal:a.modal});
Z();}else{var H=isNaN(a.dataheight)?a.dataheight:a.dataheight+"px";var Q=c("<form name='FormPost' id='"+U+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+H+";'></form>"),Y=c("<table id='"+M+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");
if(F){X=F(c("#"+U));if(typeof(X)=="undefined"){X=true;}}if(X===false){return;}c(I.p.colModel).each(function(f){var e=this.formoptions;ac=Math.max(ac,e?e.colpos||0:0);ad=Math.max(ad,e?e.rowpos||0:0);});c(Q).append(Y);V(b,I,Y,ac);var G=I.p.direction=="rtl"?true:false,L=G?"nData":"pData",ae=G?"pData":"nData",K="<a href='javascript:void(0)' id='"+L+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",J="<a href='javascript:void(0)' id='"+ae+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",N="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+a.bClose+"</a>";
if(ad>0){var af=[];c.each(c(Y)[0].rows,function(f,e){af[f]=e;});af.sort(function(e,f){if(e.rp>f.rp){return 1;}if(e.rp<f.rp){return -1;}return 0;});c.each(af,function(f,e){c("tbody",Y).append(e);});}a.gbox="#gbox_"+O;var P=false;if(a.closeOnEscape===true){a.closeOnEscape=false;P=true;}var S=c("<span></span>").append(Q).append("<table border='0' class='EditTable' id='"+M+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+a.labelswidth+"'>"+(G?J+K:K+J)+"</td><td class='EditButton'>"+N+"</td></tr></tbody></table>");
c.jgrid.createModal(aa,S,a,"#gview_"+I.p.id,c("#gview_"+I.p.id)[0]);if(G){c("#pData, #nData","#"+M+"_2").css("float","right");c(".EditButton","#"+M+"_2").css("text-align","left");}if(!a.viewPagerButtons){c("#pData, #nData","#"+M+"_2").hide();}S=null;c("#"+aa.themodal).keydown(function(e){if(e.which===27){if(P){c.jgrid.hideModal(this,{gb:a.gbox,jqm:a.jqModal,onClose:a.onClose});
}return false;}if(a.navkeys[0]===true){if(e.which===a.navkeys[1]){c("#pData","#"+M+"_2").trigger("click");return false;}if(e.which===a.navkeys[2]){c("#nData","#"+M+"_2").trigger("click");return false;}}});a.closeicon=c.extend([true,"left","ui-icon-close"],a.closeicon);if(a.closeicon[0]===true){c("#cData","#"+M+"_2").addClass(a.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.closeicon[2]+"'></span>");
}if(c.isFunction(a.beforeShowForm)){a.beforeShowForm(c("#"+U));}c.jgrid.viewModal("#"+aa.themodal,{gbox:"#gbox_"+O,jqm:a.jqModal,modal:a.modal});c(".fm-button:not(.ui-state-disabled)","#"+M+"_2").hover(function(){c(this).addClass("ui-state-hover");},function(){c(this).removeClass("ui-state-hover");});
Z();c("#cData","#"+M+"_2").click(function(e){c.jgrid.hideModal("#"+aa.themodal,{gb:"#gbox_"+O,jqm:a.jqModal,onClose:a.onClose});return false;});c("#nData","#"+M+"_2").click(function(f){c("#FormError","#"+M).hide();var e=ab();e[0]=parseInt(e[0],10);if(e[0]!=-1&&e[1][e[0]+1]){if(c.isFunction(a.onclickPgButtons)){a.onclickPgButtons("next",c("#"+U),e[1][e[0]]);
}W(e[1][e[0]+1],I);c(I).jqGrid("setSelection",e[1][e[0]+1]);if(c.isFunction(a.afterclickPgButtons)){a.afterclickPgButtons("next",c("#"+U),e[1][e[0]+1]);}T(e[0]+1,e[1].length-1);}Z();return false;});c("#pData","#"+M+"_2").click(function(e){c("#FormError","#"+M).hide();var f=ab();if(f[0]!=-1&&f[1][f[0]-1]){if(c.isFunction(a.onclickPgButtons)){a.onclickPgButtons("prev",c("#"+U),f[1][f[0]]);
}W(f[1][f[0]-1],I);c(I).jqGrid("setSelection",f[1][f[0]-1]);if(c.isFunction(a.afterclickPgButtons)){a.afterclickPgButtons("prev",c("#"+U),f[1][f[0]-1]);}T(f[0]-1,f[1].length-1);}Z();return false;});}function T(f,e,g){if(f===0){c("#pData","#"+M+"_2").addClass("ui-state-disabled");}else{c("#pData","#"+M+"_2").removeClass("ui-state-disabled");
}if(f==e){c("#nData","#"+M+"_2").addClass("ui-state-disabled");}else{c("#nData","#"+M+"_2").removeClass("ui-state-disabled");}}function ab(){var f=c(I).jqGrid("getDataIDs"),g=c("#id_g","#"+M).val(),e=c.inArray(g,f);return[e,f];}var R=ab();T(R[0],R[1].length-1);});},delGridRow:function(b,a){a=c.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:false,overlay:10,drag:true,resize:true,url:"",mtype:"POST",reloadAfterSubmit:true,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:true,closeOnEscape:false,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:false,serializeDelData:null,useDataProxy:false},c.jgrid.del,a||{});
d=a;return this.each(function(){var y=this;if(!y.grid){return;}if(!b){return;}var x=typeof a.beforeShowForm==="function"?true:false,G=typeof a.afterShowForm==="function"?true:false,L=c.isFunction(a.beforeInitData)?a.beforeInitData:false,I=y.p.id,H={},C=true,B="DelTbl_"+I,v,w,z,D,F={themodal:"delmod"+I,modalhead:"delhd"+I,modalcontent:"delcnt"+I,scrollelm:B};
if(jQuery.isArray(b)){b=b.join();}if(c("#"+F.themodal).html()!=null){if(L){C=L();if(typeof(C)=="undefined"){C=true;}}if(C===false){return;}c("#DelData>td","#"+B).text(b);c("#DelError","#"+B).hide();if(d.processing===true){d.processing=false;c("#dData","#"+B).removeClass("ui-state-active");}if(x){a.beforeShowForm(c("#"+B));
}c.jgrid.viewModal("#"+F.themodal,{gbox:"#gbox_"+I,jqm:a.jqModal,jqM:false,overlay:a.overlay,modal:a.modal});if(G){a.afterShowForm(c("#"+B));}}else{if(L){C=L();if(typeof(C)=="undefined"){C=true;}}if(C===false){return;}var K=isNaN(a.dataheight)?a.dataheight:a.dataheight+"px";var A="<div id='"+B+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+K+";'>";
A+="<table class='DelTable'><tbody>";A+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>";A+="<tr id='DelData' style='display:none'><td >"+b+"</td></tr>";A+='<tr><td class="delmsg" style="white-space:pre;">'+a.msg+"</td></tr><tr><td >&#160;</td></tr>";A+="</tbody></table></div>";
var E="<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+a.bSubmit+"</a>",J="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+a.bCancel+"</a>";A+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+B+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr></tr><tr><td class='DelButton EditButton'>"+E+"&#160;"+J+"</td></tr></tbody></table>";
a.gbox="#gbox_"+I;c.jgrid.createModal(F,A,a,"#gview_"+y.p.id,c("#gview_"+y.p.id)[0]);c(".fm-button","#"+B+"_2").hover(function(){c(this).addClass("ui-state-hover");},function(){c(this).removeClass("ui-state-hover");});a.delicon=c.extend([true,"left","ui-icon-scissors"],a.delicon);a.cancelicon=c.extend([true,"left","ui-icon-cancel"],a.cancelicon);
if(a.delicon[0]===true){c("#dData","#"+B+"_2").addClass(a.delicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.delicon[2]+"'></span>");}if(a.cancelicon[0]===true){c("#eData","#"+B+"_2").addClass(a.cancelicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.cancelicon[2]+"'></span>");
}c("#dData","#"+B+"_2").click(function(h){var f=[true,""];H={};var e=c("#DelData>td","#"+B).text();if(typeof a.onclickSubmit==="function"){H=a.onclickSubmit(d,e)||{};}if(typeof a.beforeSubmit==="function"){f=a.beforeSubmit(e);}if(f[0]&&!d.processing){d.processing=true;c(this).addClass("ui-state-active");
z=y.p.prmNames;v=c.extend({},d.delData,H);D=z.oper;v[D]=z.deloper;w=z.id;v[w]=e;var g=c.extend({url:d.url?d.url:c(y).jqGrid("getGridParam","editurl"),type:a.mtype,data:c.isFunction(a.serializeDelData)?a.serializeDelData(v):v,complete:function(l,i){if(i!="success"){f[0]=false;if(c.isFunction(d.errorTextFormat)){f[1]=d.errorTextFormat(l);
}else{f[1]=i+" Status: '"+l.statusText+"'. Error code: "+l.status;}}else{if(typeof d.afterSubmit==="function"){f=d.afterSubmit(l,v);}}if(f[0]===false){c("#DelError>td","#"+B).html(f[1]);c("#DelError","#"+B).show();}else{if(d.reloadAfterSubmit&&y.p.datatype!="local"){c(y).trigger("reloadGrid");}else{var k=[];
k=e.split(",");if(y.p.treeGrid===true){try{c(y).jqGrid("delTreeNode",k[0]);}catch(j){}}else{for(var m=0;m<k.length;m++){c(y).jqGrid("delRowData",k[m]);}}y.p.selrow=null;y.p.selarrrow=[];}if(c.isFunction(d.afterComplete)){setTimeout(function(){d.afterComplete(l,e);},500);}}d.processing=false;c("#dData","#"+B+"_2").removeClass("ui-state-active");
if(f[0]){c.jgrid.hideModal("#"+F.themodal,{gb:"#gbox_"+I,jqm:a.jqModal,onClose:d.onClose});}},error:function(k,j,i){c("#DelError>td","#"+B).html(j+" : "+i);c("#DelError","#"+B).show();d.processing=false;c("#dData","#"+B+"_2").removeClass("ui-state-active");}},c.jgrid.ajaxOptions,a.ajaxDelOptions);if(!g.url&&!d.useDataProxy){if(c.isFunction(y.p.dataProxy)){d.useDataProxy=true;
}else{f[0]=false;f[1]+=" "+c.jgrid.errors.nourl;}}if(f[0]){if(d.useDataProxy){y.p.dataProxy.call(y,g,"del_"+y.p.id);}else{c.ajax(g);}}}if(f[0]===false){c("#DelError>td","#"+B).html(f[1]);c("#DelError","#"+B).show();}return false;});c("#eData","#"+B+"_2").click(function(e){c.jgrid.hideModal("#"+F.themodal,{gb:"#gbox_"+I,jqm:a.jqModal,onClose:d.onClose});
return false;});if(x){a.beforeShowForm(c("#"+B));}c.jgrid.viewModal("#"+F.themodal,{gbox:"#gbox_"+I,jqm:a.jqModal,overlay:a.overlay,modal:a.modal});if(G){a.afterShowForm(c("#"+B));}}if(a.closeOnEscape===true){setTimeout(function(){c(".ui-jqdialog-titlebar-close","#"+F.modalhead).focus();},0);}});},navGrid:function(k,b,l,j,m,n,a){b=c.extend({edit:true,editicon:"ui-icon-pencil",add:true,addicon:"ui-icon-plus",del:true,delicon:"ui-icon-trash",search:true,searchicon:"ui-icon-search",refresh:true,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:false,viewicon:"ui-icon-document",position:"left",closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false},c.jgrid.nav,b||{});
return this.each(function(){var z={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},i=this,w,A,g,y;if(!i.grid||typeof k!="string"){return;}if(c("#"+z.themodal).html()===null){if(typeof window.innerWidth!="undefined"){w=window.innerWidth;A=window.innerHeight;}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0){w=document.documentElement.clientWidth;
A=document.documentElement.clientHeight;}else{w=1024;A=768;}}c.jgrid.createModal(z,"<div>"+b.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+i.p.id,jqModal:true,drag:true,resize:true,caption:b.alertcap,top:A/2-25,left:w/2-100,width:200,height:"auto",closeOnEscape:b.closeOnEscape},"","",true);
}var f=1;if(b.cloneToTop&&i.p.toppager){f=2;}for(var h=0;h<f;h++){var e,C=c("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),B="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",x,D;
if(h===0){x=k;D=i.p.id;if(x==i.p.toppager){D+="_top";f=1;}}else{x=i.p.toppager;D=i.p.id+"_top";}if(i.p.direction=="rtl"){c(C).attr("dir","rtl").css("float","right");}if(b.add){j=j||{};e=c("<td class='ui-pg-button ui-corner-all'></td>");c(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.addicon+"'></span>"+b.addtext+"</div>");
c("tr",C).append(e);c(e,C).attr({"title":b.addtitle||"",id:j.id||"add_"+D}).click(function(){if(!c(this).hasClass("ui-state-disabled")){if(typeof b.addfunc=="function"){b.addfunc();}else{c(i).jqGrid("editGridRow","new",j);}}return false;}).hover(function(){if(!c(this).hasClass("ui-state-disabled")){c(this).addClass("ui-state-hover");
}},function(){c(this).removeClass("ui-state-hover");});e=null;}if(b.edit){e=c("<td class='ui-pg-button ui-corner-all'></td>");l=l||{};c(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.editicon+"'></span>"+b.edittext+"</div>");c("tr",C).append(e);c(e,C).attr({"title":b.edittitle||"",id:l.id||"edit_"+D}).click(function(){if(!c(this).hasClass("ui-state-disabled")){var o=i.p.selrow;
if(o){if(typeof b.editfunc=="function"){b.editfunc(o);}else{c(i).jqGrid("editGridRow",o,l);}}else{c.jgrid.viewModal("#"+z.themodal,{gbox:"#gbox_"+i.p.id,jqm:true});c("#jqg_alrt").focus();}}return false;}).hover(function(){if(!c(this).hasClass("ui-state-disabled")){c(this).addClass("ui-state-hover");}},function(){c(this).removeClass("ui-state-hover");
});e=null;}if(b.view){e=c("<td class='ui-pg-button ui-corner-all'></td>");a=a||{};c(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.viewicon+"'></span>"+b.viewtext+"</div>");c("tr",C).append(e);c(e,C).attr({"title":b.viewtitle||"",id:a.id||"view_"+D}).click(function(){if(!c(this).hasClass("ui-state-disabled")){var o=i.p.selrow;
if(o){c(i).jqGrid("viewGridRow",o,a);}else{c.jgrid.viewModal("#"+z.themodal,{gbox:"#gbox_"+i.p.id,jqm:true});c("#jqg_alrt").focus();}}return false;}).hover(function(){if(!c(this).hasClass("ui-state-disabled")){c(this).addClass("ui-state-hover");}},function(){c(this).removeClass("ui-state-hover");});e=null;
}if(b.del){e=c("<td class='ui-pg-button ui-corner-all'></td>");m=m||{};c(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.delicon+"'></span>"+b.deltext+"</div>");c("tr",C).append(e);c(e,C).attr({"title":b.deltitle||"",id:m.id||"del_"+D}).click(function(){if(!c(this).hasClass("ui-state-disabled")){var o;
if(i.p.multiselect){o=i.p.selarrrow;if(o.length===0){o=null;}}else{o=i.p.selrow;}if(o){if("function"==typeof b.delfunc){b.delfunc(o);}else{c(i).jqGrid("delGridRow",o,m);}}else{c.jgrid.viewModal("#"+z.themodal,{gbox:"#gbox_"+i.p.id,jqm:true});c("#jqg_alrt").focus();}}return false;}).hover(function(){if(!c(this).hasClass("ui-state-disabled")){c(this).addClass("ui-state-hover");
}},function(){c(this).removeClass("ui-state-hover");});e=null;}if(b.add||b.edit||b.del||b.view){c("tr",C).append(B);}if(b.search){e=c("<td class='ui-pg-button ui-corner-all'></td>");n=n||{};c(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.searchicon+"'></span>"+b.searchtext+"</div>");c("tr",C).append(e);
c(e,C).attr({"title":b.searchtitle||"",id:n.id||"search_"+D}).click(function(){if(!c(this).hasClass("ui-state-disabled")){c(i).jqGrid("searchGrid",n);}return false;}).hover(function(){if(!c(this).hasClass("ui-state-disabled")){c(this).addClass("ui-state-hover");}},function(){c(this).removeClass("ui-state-hover");
});e=null;}if(b.refresh){e=c("<td class='ui-pg-button ui-corner-all'></td>");c(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.refreshicon+"'></span>"+b.refreshtext+"</div>");c("tr",C).append(e);c(e,C).attr({"title":b.refreshtitle||"",id:"refresh_"+D}).click(function(){if(!c(this).hasClass("ui-state-disabled")){if(c.isFunction(b.beforeRefresh)){b.beforeRefresh();
}i.p.search=false;try{var p=i.p.id;c("#fbox_"+p).searchFilter().reset({"reload":false});if(c.isFunction(i.clearToolbar)){i.clearToolbar(false);}}catch(o){}switch(b.refreshstate){case"firstpage":c(i).trigger("reloadGrid",[{page:1}]);break;case"current":c(i).trigger("reloadGrid",[{current:true}]);break;
}if(c.isFunction(b.afterRefresh)){b.afterRefresh();}}return false;}).hover(function(){if(!c(this).hasClass("ui-state-disabled")){c(this).addClass("ui-state-hover");}},function(){c(this).removeClass("ui-state-hover");});e=null;}y=c(".ui-jqgrid").css("font-size")||"11px";c("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+y+";visibility:hidden;' ></div>");
g=c(C).clone().appendTo("#testpg2").width();c("#testpg2").remove();c(x+"_"+b.position,x).append(C);if(i.p._nvtd){if(g>i.p._nvtd[0]){c(x+"_"+b.position,x).width(g);i.p._nvtd[0]=g;}i.p._nvtd[1]=g;}y=null;g=null;C=null;}});},navButtonAdd:function(b,a){a=c.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},a||{});
return this.each(function(){if(!this.grid){return;}if(b.indexOf("#")!==0){b="#"+b;}var j=c(".navtable",b)[0],h=this;if(j){var i=c("<td></td>");if(a.buttonicon.toString().toUpperCase()=="NONE"){c(i).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+a.caption+"</div>");}else{c(i).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+a.buttonicon+"'></span>"+a.caption+"</div>");
}if(a.id){c(i).attr("id",a.id);}if(a.position=="first"){if(j.rows[0].cells.length===0){c("tr",j).append(i);}else{c("tr td:eq(0)",j).before(i);}}else{c("tr",j).append(i);}c(i,j).attr("title",a.title||"").click(function(e){if(!c(this).hasClass("ui-state-disabled")){if(c.isFunction(a.onClickButton)){a.onClickButton.call(h,e);
}}return false;}).hover(function(){if(!c(this).hasClass("ui-state-disabled")){c(this).addClass("ui-state-hover");}},function(){c(this).removeClass("ui-state-hover");});}});},navSeparatorAdd:function(b,a){a=c.extend({sepclass:"ui-separator",sepcontent:""},a||{});return this.each(function(){if(!this.grid){return;
}if(b.indexOf("#")!==0){b="#"+b;}var g=c(".navtable",b)[0];if(g){var h="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+a.sepclass+"'></span>"+a.sepcontent+"</td>";c("tr",g).append(h);}});},GridToForm:function(b,a){return this.each(function(){var h=this;if(!h.grid){return;
}var i=c(h).jqGrid("getRowData",b);if(i){for(var j in i){if(c("[name="+j+"]",a).is("input:radio")||c("[name="+j+"]",a).is("input:checkbox")){c("[name="+j+"]",a).each(function(){if(c(this).val()==i[j]){c(this).attr("checked","checked");}else{c(this).attr("checked","");}});}else{c("[name="+j+"]",a).val(i[j]);
}}}});},FormToGrid:function(g,b,a,h){return this.each(function(){var e=this;if(!e.grid){return;}if(!a){a="set";}if(!h){h="first";}var j=c(b).serializeArray();var f={};c.each(j,function(l,i){f[i.name]=i.value;});if(a=="add"){c(e).jqGrid("addRowData",g,f,h);}else{if(a=="set"){c(e).jqGrid("setRowData",g,f);
}}});}});})(jQuery);