(function(b){b.jgrid=b.jgrid||{};b.extend(b.jgrid,{htmlDecode:function(f){if(f=="&nbsp;"||f=="&#160;"||f.length==1&&f.charCodeAt(0)==160){return"";}return !f?f:String(f).replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"');},htmlEncode:function(f){return !f?f:String(f).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\"/g,"&quot;");
},format:function(f){var j=b.makeArray(arguments).slice(1);if(f===undefined){f="";}return f.replace(/\{(\d+)\}/g,function(i,c){return j[c];});},getCellIndex:function(f){f=b(f);if(f.is("tr")){return -1;}f=(!f.is("td")&&!f.is("th")?f.closest("td,th"):f)[0];if(b.browser.msie){return b.inArray(f,f.parentNode.cells);
}return f.cellIndex;},stripHtml:function(f){f+="";var j=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(f){return(f=f.replace(j,""))&&f!=="&nbsp;"&&f!=="&#160;"?f.replace(/\"/g,"'"):"";}else{return f;}},stringToDoc:function(f){var j;if(typeof f!=="string"){return f;}try{j=(new DOMParser).parseFromString(f,"text/xml");
}catch(i){j=new ActiveXObject("Microsoft.XMLDOM");j.async=false;j.loadXML(f);}return j&&j.documentElement&&j.documentElement.tagName!="parsererror"?j:null;},parse:function(f){f=f;if(f.substr(0,9)=="while(1);"){f=f.substr(9);}if(f.substr(0,2)=="/*"){f=f.substr(2,f.length-4);}f||(f="{}");return b.jgrid.useJSON===true&&typeof JSON==="object"&&typeof JSON.parse==="function"?JSON.parse(f):eval("("+f+")");
},parseDate:function(f,j){var i={m:1,d:1,y:1970,h:0,i:0,s:0},c,e,k;if(j&&j!==null&&j!==undefined){j=b.trim(j);j=j.split(/[\\\/:_;.\t\T\s-]/);f=f.split(/[\\\/:_;.\t\T\s-]/);var m=b.jgrid.formatter.date.monthNames,a=b.jgrid.formatter.date.AmPm,r=function(u,B){if(u===0){if(B==12){B=0;}}else{if(B!=12){B+=12;
}}return B;};c=0;for(e=f.length;c<e;c++){if(f[c]=="M"){k=b.inArray(j[c],m);if(k!==-1&&k<12){j[c]=k+1;}}if(f[c]=="F"){k=b.inArray(j[c],m);if(k!==-1&&k>11){j[c]=k+1-12;}}if(f[c]=="a"){k=b.inArray(j[c],a);if(k!==-1&&k<2&&j[c]==a[k]){j[c]=k;i.h=r(j[c],i.h);}}if(f[c]=="A"){k=b.inArray(j[c],a);if(k!==-1&&k>1&&j[c]==a[k]){j[c]=k-2;
i.h=r(j[c],i.h);}}if(j[c]!==undefined){i[f[c].toLowerCase()]=parseInt(j[c],10);}}i.m=parseInt(i.m,10)-1;f=i.y;if(f>=70&&f<=99){i.y=1900+i.y;}else{if(f>=0&&f<=69){i.y=2000+i.y;}}}return new Date(i.y,i.m,i.d,i.h,i.i,i.s,0);},jqID:function(f){f+="";return f.replace(/([\.\:\[\]])/g,"\\$1");},getAccessor:function(f,j){var i,c,e,k;
if(typeof j==="function"){return j(f);}i=f[j];if(i===undefined){try{if(typeof j==="string"){e=j.split(".");}if(k=e.length){for(i=f;i&&k--;){c=e.shift();i=i[c];}}}catch(m){}}return i;},ajaxOptions:{},from:function(f){return new (function(j,i){if(typeof j=="string"){j=b.data(j);}var c=this,e=j,k=true,m=false,a=i,r=/[\$,%]/g,u=null,B=null,G=false,Q="",J=[],M=true;
if(typeof j=="object"&&j.push){if(j.length>0){M=typeof j[0]!="object"?false:true;}}else{throw"data provides is not an array";}this._hasData=function(){return e===null?false:e.length===0?false:true;};this._getStr=function(n){var l=[];m&&l.push("jQuery.trim(");l.push("String("+n+")");m&&l.push(")");k||l.push(".toLowerCase()");
return l.join("");};this._strComp=function(n){return typeof n=="string"?".toString()":"";};this._group=function(n,l){return{field:n.toString(),unique:l,items:[]};};this._toStr=function(n){if(m){n=b.trim(n);}k||(n=n.toLowerCase());return n=n.toString().replace(new RegExp('\\"',"g"),'\\"');};this._funcLoop=function(n){var l=[];
b.each(e,function(p,A){l.push(n(A));});return l;};this._append=function(n){if(a===null){a="";}else{a+=Q===""?" && ":Q;}if(G){a+="!";}a+="("+n+")";G=false;Q="";};this._setCommand=function(n,l){u=n;B=l;};this._resetNegate=function(){G=false;};this._repeatCommand=function(n,l){if(u===null){return c;}if(n!=null&&l!=null){return u(n,l);
}if(B===null){return u(n);}if(!M){return u(n);}return u(B,n);};this._equals=function(n,l){return c._compare(n,l,1)===0;};this._compare=function(n,l,p){if(p===undefined){p=1;}if(n===undefined){n=null;}if(l===undefined){l=null;}if(n===null&&l===null){return 0;}if(n===null&&l!==null){return 1;}if(n!==null&&l===null){return -1;
}if(!k&&typeof n!=="number"&&typeof l!=="number"){n=String(n).toLowerCase();l=String(l).toLowerCase();}if(n<l){return -p;}if(n>l){return p;}return 0;};this._performSort=function(){if(J.length!==0){e=c._doSort(e,0);}};this._doSort=function(n,l){var p=J[l].by,A=J[l].dir,t=J[l].type,H=J[l].datefmt;if(l==J.length-1){return c._getOrder(n,p,A,t,H);
}l++;n=c._getGroup(n,p,A,t,H);p=[];for(A=0;A<n.length;A++){t=c._doSort(n[A].items,l);for(H=0;H<t.length;H++){p.push(t[H]);}}return p;};this._getOrder=function(n,l,p,A,t){var H=[],T=[],Y=p=="a"?1:-1,O,fa;if(A===undefined){A="text";}fa=A=="float"||A=="number"||A=="currency"||A=="numeric"?function(P){P=parseFloat(String(P).replace(r,""));
return isNaN(P)?0:P;}:A=="int"||A=="integer"?function(P){return P?parseFloat(String(P).replace(r,"")):0;}:A=="date"||A=="datetime"?function(P){return b.jgrid.parseDate(t,P).getTime();}:b.isFunction(A)?A:function(P){P||(P="");return b.trim(String(P).toUpperCase());};b.each(n,function(P,aa){O=l!==""?b.jgrid.getAccessor(aa,l):aa;
if(O===undefined){O="";}O=fa(O,aa);T.push({vSort:O,index:P});});T.sort(function(P,aa){P=P.vSort;aa=aa.vSort;return c._compare(P,aa,Y);});A=0;for(var ca=n.length;A<ca;){p=T[A].index;H.push(n[p]);A++;}return H;};this._getGroup=function(n,l,p,A,t){var H=[],T=null,Y=null,O;b.each(c._getOrder(n,l,p,A,t),function(fa,ca){O=b.jgrid.getAccessor(ca,l);
if(O===undefined){O="";}if(!c._equals(Y,O)){Y=O;T!=null&&H.push(T);T=c._group(l,O);}T.items.push(ca);});T!=null&&H.push(T);return H;};this.ignoreCase=function(){k=false;return c;};this.useCase=function(){k=true;return c;};this.trim=function(){m=true;return c;};this.noTrim=function(){m=false;return c;
};this.combine=function(n){var l=b.from(e);k||l.ignoreCase();m&&l.trim();n=n(l).showQuery();c._append(n);return c;};this.execute=function(){var n=a,l=[];if(n===null){return c;}b.each(e,function(){eval(n)&&l.push(this);});e=l;return c;};this.data=function(){return e;};this.select=function(n){c._performSort();
if(!c._hasData()){return[];}c.execute();if(b.isFunction(n)){var l=[];b.each(e,function(p,A){l.push(n(A));});return l;}return e;};this.hasMatch=function(){if(!c._hasData()){return false;}c.execute();return e.length>0;};this.showQuery=function(n){var l=a;if(l===null){l="no query found";}if(b.isFunction(n)){n(l);
return c;}return l;};this.andNot=function(n,l,p){G=!G;return c.and(n,l,p);};this.orNot=function(n,l,p){G=!G;return c.or(n,l,p);};this.not=function(n,l,p){return c.andNot(n,l,p);};this.and=function(n,l,p){Q=" && ";if(n===undefined){return c;}return c._repeatCommand(n,l,p);};this.or=function(n,l,p){Q=" || ";
if(n===undefined){return c;}return c._repeatCommand(n,l,p);};this.isNot=function(n){G=!G;return c.is(n);};this.is=function(n){c._append("this."+n);c._resetNegate();return c;};this._compareValues=function(n,l,p,A,t){var H;H=M?"this."+l:"this";if(p===undefined){p=null;}p=p===null?l:p;switch(t.stype===undefined?"text":t.stype){case"int":case"integer":p=isNaN(Number(p))?"0":p;
H="parseInt("+H+",10)";p="parseInt("+p+",10)";break;case"float":case"number":case"numeric":p=String(p).replace(r,"");p=isNaN(Number(p))?"0":p;H="parseFloat("+H+")";p="parseFloat("+p+")";break;case"date":case"datetime":p=String(b.jgrid.parseDate(t.newfmt||"Y-m-d",p).getTime());H='jQuery.jgrid.parseDate("'+t.srcfmt+'",'+H+").getTime()";
break;default:H=c._getStr(H);p=c._getStr('"'+c._toStr(p)+'"');}c._append(H+" "+A+" "+p);c._setCommand(n,l);c._resetNegate();return c;};this.equals=function(n,l,p){return c._compareValues(c.equals,n,l,"==",p);};this.greater=function(n,l,p){return c._compareValues(c.greater,n,l,">",p);};this.less=function(n,l,p){return c._compareValues(c.less,n,l,"<",p);
};this.greaterOrEquals=function(n,l,p){return c._compareValues(c.greaterOrEquals,n,l,">=",p);};this.lessOrEquals=function(n,l,p){return c._compareValues(c.lessOrEquals,n,l,"<=",p);};this.startsWith=function(n,l){var p=l===undefined||l===null?n:l;p=m?b.trim(p.toString()).length:p.toString().length;if(M){c._append(c._getStr("this."+n)+".substr(0,"+p+") == "+c._getStr('"'+c._toStr(l)+'"'));
}else{p=m?b.trim(l.toString()).length:l.toString().length;c._append(c._getStr("this")+".substr(0,"+p+") == "+c._getStr('"'+c._toStr(n)+'"'));}c._setCommand(c.startsWith,n);c._resetNegate();return c;};this.endsWith=function(n,l){var p=l===undefined||l===null?n:l;p=m?b.trim(p.toString()).length:p.toString().length;
M?c._append(c._getStr("this."+n)+".substr("+c._getStr("this."+n)+".length-"+p+","+p+') == "'+c._toStr(l)+'"'):c._append(c._getStr("this")+".substr("+c._getStr("this")+'.length-"'+c._toStr(n)+'".length,"'+c._toStr(n)+'".length) == "'+c._toStr(n)+'"');c._setCommand(c.endsWith,n);c._resetNegate();return c;
};this.contains=function(n,l){M?c._append(c._getStr("this."+n)+'.indexOf("'+c._toStr(l)+'",0) > -1'):c._append(c._getStr("this")+'.indexOf("'+c._toStr(n)+'",0) > -1');c._setCommand(c.contains,n);c._resetNegate();return c;};this.groupBy=function(n,l,p,A){if(!c._hasData()){return null;}return c._getGroup(e,n,l,p,A);
};this.orderBy=function(n,l,p,A){l=l===undefined||l===null?"a":b.trim(l.toString().toLowerCase());if(p===null||p===undefined){p="text";}if(A===null||A===undefined){A="Y-m-d";}if(l=="desc"||l=="descending"){l="d";}if(l=="asc"||l=="ascending"){l="a";}J.push({by:n,dir:l,type:p,datefmt:A});return c;};return c;
})(f,null);},extend:function(f){b.extend(b.fn.jqGrid,f);this.no_legacy_api||b.fn.extend(f);}});b.fn.jqGrid=function(f){if(typeof f=="string"){var j=b.jgrid.getAccessor(b.fn.jqGrid,f);if(!j){throw"jqGrid - No such method: "+f;}var i=b.makeArray(arguments).slice(1);return j.apply(this,i);}return this.each(function(){if(!this.grid){var c=b.extend(true,{url:"",height:150,page:1,rowNum:10000000000,rowTotal:null,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:false,selarrrow:[],savedRow:[],shrinkToFit:true,xmlReader:{},jsonReader:{},subGrid:false,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,onHeaderClick:null,viewrecords:false,loadonce:false,multiselect:false,multikey:false,editurl:null,search:false,caption:"",hidegrid:true,hiddengrid:false,postData:{},userData:{},treeGrid:false,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:false,gridstate:"visible",cellEdit:false,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[false,""],scroll:false,multiboxonly:false,deselectAfterSort:true,scrollrows:false,autowidth:false,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:false,rownumWidth:40,rownumbers:false,pagerpos:"center",recordpos:"right",footerrow:false,userDataOnFooter:false,hoverrows:true,altclass:"ui-priority-secondary",viewsortcols:[false,"vertical",true],resizeclass:"",autoencode:false,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:false,headertitles:false,scrollTimeout:40,data:[],_index:{},grouping:false,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:false,sortitems:[],sortnames:[],groupDataSorted:false,summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"},ignoreCase:false},b.jgrid.defaults,f||{}),e={headers:[],cols:[],footers:[],dragStart:function(d,g,h){this.resizing={idx:d,startX:g.clientX,sOL:h[0]};
this.hDiv.style.cursor="col-resize";this.curGbox=b("#rs_m"+c.id,"#gbox_"+c.id);this.curGbox.css({display:"block",left:h[0],top:h[1],height:h[2]});b.isFunction(c.resizeStart)&&c.resizeStart.call(this,g,d);document.onselectstart=function(){return false;};},dragMove:function(d){if(this.resizing){var g=d.clientX-this.resizing.startX;
d=this.headers[this.resizing.idx];var h=c.direction==="ltr"?d.width+g:d.width-g,q;if(h>33){this.curGbox.css({left:this.resizing.sOL+g});if(c.forceFit===true){q=this.headers[this.resizing.idx+c.nv];g=c.direction==="ltr"?q.width-g:q.width+g;if(g>33){d.newWidth=h;q.newWidth=g;}}else{this.newWidth=c.direction==="ltr"?c.tblwidth+g:c.tblwidth-g;
d.newWidth=h;}}}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var d=this.resizing.idx,g=this.headers[d].newWidth||this.headers[d].width;g=parseInt(g,10);this.resizing=false;b("#rs_m"+c.id).css("display","none");c.colModel[d].width=g;this.headers[d].width=g;this.headers[d].el.style.width=g+"px";
this.cols[d].style.width=g+"px";if(this.footers.length>0){this.footers[d].style.width=g+"px";}if(c.forceFit===true){g=this.headers[d+c.nv].newWidth||this.headers[d+c.nv].width;this.headers[d+c.nv].width=g;this.headers[d+c.nv].el.style.width=g+"px";this.cols[d+c.nv].style.width=g+"px";if(this.footers.length>0){this.footers[d+c.nv].style.width=g+"px";
}c.colModel[d+c.nv].width=g;}else{c.tblwidth=this.newWidth||c.tblwidth;b("table:first",this.bDiv).css("width",c.tblwidth+"px");b("table:first",this.hDiv).css("width",c.tblwidth+"px");this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(c.footerrow){b("table:first",this.sDiv).css("width",c.tblwidth+"px");this.sDiv.scrollLeft=this.bDiv.scrollLeft;
}}b.isFunction(c.resizeStop)&&c.resizeStop.call(this,g,d);}this.curGbox=null;document.onselectstart=function(){return true;};},populateVisible:function(){e.timer&&clearTimeout(e.timer);e.timer=null;var d=b(e.bDiv).height();if(d){var g=b("table:first",e.bDiv),h=b("> tbody > tr:gt(0):visible:first",g).outerHeight()||e.prevRowHeight;
if(h){e.prevRowHeight=h;var q=c.rowNum,o=e.scrollTop=e.bDiv.scrollTop,x=Math.round(g.position().top)-o,w=x+g.height();h=h*q;var C,D,s;if(w<d&&x<=0&&(c.lastpage===undefined||parseInt((w+o+h-1)/h,10)<=c.lastpage)){D=parseInt((d-w+h-1)/h,10);if(w>=0||D<2||c.scroll===true){C=Math.round((w+o)/h)+1;x=-1;}else{x=1;
}}if(x>0){C=parseInt(o/h,10)+1;D=parseInt((o+d)/h,10)+2-C;s=true;}if(D){if(!(c.lastpage&&C>c.lastpage||c.lastpage==1)){if(e.hDiv.loading){e.timer=setTimeout(e.populateVisible,c.scrollTimeout);}else{c.page=C;if(s){e.selectionPreserver(g[0]);e.emptyRows(e.bDiv,false);}e.populate(D);}}}}}},scrollGrid:function(){if(c.scroll){var d=e.bDiv.scrollTop;
if(e.scrollTop===undefined){e.scrollTop=0;}if(d!=e.scrollTop){e.scrollTop=d;e.timer&&clearTimeout(e.timer);e.timer=setTimeout(e.populateVisible,c.scrollTimeout);}}e.hDiv.scrollLeft=e.bDiv.scrollLeft;if(c.footerrow){e.sDiv.scrollLeft=e.bDiv.scrollLeft;}},selectionPreserver:function(d){var g=d.p,h=g.selrow,q=g.selarrrow?b.makeArray(g.selarrrow):null,o=d.grid.bDiv.scrollLeft,x=g.gridComplete;
g.gridComplete=function(){g.selrow=null;g.selarrrow=[];if(g.multiselect&&q&&q.length>0){for(var w=0;w<q.length;w++){q[w]!=h&&b(d).jqGrid("setSelection",q[w],false);}}h&&b(d).jqGrid("setSelection",h,false);d.grid.bDiv.scrollLeft=o;g.gridComplete=x;g.gridComplete&&x();};}};if(this.tagName!="TABLE"){alert("Element is not a table");
}else{b(this).empty();this.p=c;var k,m,a;if(this.p.colNames.length===0){for(k=0;k<this.p.colModel.length;k++){this.p.colNames[k]=this.p.colModel[k].label||this.p.colModel[k].name;}}if(this.p.colNames.length!==this.p.colModel.length){alert(b.jgrid.errors.model);}else{var r=b("<div class='ui-jqgrid-view'></div>"),u,B=b.browser.msie?true:false,G=b.browser.safari?true:false;
a=this;a.p.direction=b.trim(a.p.direction.toLowerCase());if(b.inArray(a.p.direction,["ltr","rtl"])==-1){a.p.direction="ltr";}m=a.p.direction;b(r).insertBefore(this);b(this).appendTo(r).removeClass("scroll");var Q=b("<div class='ui-jqgrid ui-widget ui-widget-content'></div>");b(Q).insertBefore(r).attr({id:"gbox_"+this.id,dir:m});
b(r).appendTo(Q).attr("id","gview_"+this.id);u=B&&b.browser.version<=6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"";b("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(u).insertBefore(r);
b("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(r);b(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var J=function(d,g){d=parseInt(d,10);
return isNaN(d)?g?g:0:d;},M=function(d,g,h){var q=a.p.colModel[d],o=q.align,x='style="',w=q.classes,C=q.name;if(o){x+="text-align:"+o+";";}if(q.hidden===true){x+="display:none;";}if(g===0){x+="width: "+e.headers[d].width+"px;";}x+='"'+(w!==undefined?' class="'+w+'"':"")+(q.title&&h?' title="'+b.jgrid.stripHtml(h)+'"':"");
x+=' aria-describedby="'+a.p.id+"_"+C+'"';return x;},n=function(d){return d===undefined||d===null||d===""?"&#160;":a.p.autoencode?b.jgrid.htmlEncode(d):d+"";},l=function(d,g,h,q,o){h=a.p.colModel[h];if(typeof h.formatter!=="undefined"){d={rowId:d,colModel:h,gid:a.p.id};g=b.isFunction(h.formatter)?h.formatter.call(a,g,d,q,o):b.fmatter?b.fn.fmatter(h.formatter,g,d,q,o):n(g);
}else{g=n(g);}return g;},p=function(d,g,h,q,o){d=l(d,g,h,o,"add");return'<td role="gridcell" '+M(h,q,d)+">"+d+"</td>";},A=function(d,g,h){d='<input role="checkbox" type="checkbox" id="jqg_'+a.p.id+"_"+d+'" class="cbox" name="jqg_'+a.p.id+"_"+d+'"/>';return'<td role="gridcell" '+M(g,h,"")+">"+d+"</td>";
},t=function(d,g,h,q){h=(parseInt(h,10)-1)*parseInt(q,10)+1+g;return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+M(d,g,"")+">"+h+"</td>";},H=function(d){var g,h=[],q=0,o;for(o=0;o<a.p.colModel.length;o++){g=a.p.colModel[o];if(g.name!=="cb"&&g.name!=="subgrid"&&g.name!=="rn"){h[q]=d=="local"?g.name:d=="xml"?g.xmlmap||g.name:g.jsonmap||g.name;
q++;}}return h;},T=function(d){var g=a.p.remapColumns;if(!g||!g.length){g=b.map(a.p.colModel,function(h,q){return q;});}if(d){g=b.map(g,function(h){return h<d?null:h-d;});}return g;},Y=function(d,g){if(a.p.deepempty){b("#"+a.p.id+" tbody:first tr:gt(0)").remove();}else{var h=b("#"+a.p.id+" tbody:first tr:first")[0];
b("#"+a.p.id+" tbody:first").empty().append(h);}if(g&&a.p.scroll){b(">div:first",d).css({height:"auto"}).children("div:first").css({height:0,display:"none"});d.scrollTop=0;}},O=function(){var d=a.p.data.length,g,h,q;g=a.p.rownumbers===true?1:0;h=a.p.multiselect===true?1:0;q=a.p.subGrid===true?1:0;g=a.p.keyIndex===false||a.p.loadonce===true?a.p.localReader.id:a.p.colModel[a.p.keyIndex+h+q+g].name;
for(h=0;h<d;h++){q=b.jgrid.getAccessor(a.p.data[h],g);a.p._index[q]=h;}},fa=function(d,g,h,q,o){var x=new Date,w=a.p.datatype!="local"&&a.p.loadonce||a.p.datatype=="xmlstring",C,D=a.p.datatype=="local"?"local":"xml";if(w){a.p.data=[];a.p._index={};a.p.localReader.id=C="_id_";}a.p.reccount=0;if(b.isXMLDoc(d)){if(a.p.treeANode===-1&&!a.p.scroll){Y(g,false);
h=1;}else{h=h>1?h:1;}var s,v=0,y,E,I=0,F=0,K=0,z,U=[],W,S={},N,L,X=[],oa=a.p.altRows===true?" "+a.p.altclass:"";a.p.xmlReader.repeatitems||(U=H(D));z=a.p.keyIndex===false?a.p.xmlReader.id:a.p.keyIndex;if(U.length>0&&!isNaN(z)){if(a.p.remapColumns&&a.p.remapColumns.length){z=b.inArray(z,a.p.remapColumns);
}z=U[z];}D=(z+"").indexOf("[")===-1?U.length?function(da,Z){return b(z,da).text()||Z;}:function(da,Z){return b(a.p.xmlReader.cell,da).eq(z).text()||Z;}:function(da,Z){return da.getAttribute(z.replace(/[\[\]]/g,""))||Z;};a.p.userData={};b(a.p.xmlReader.page,d).each(function(){a.p.page=this.textContent||this.text||0;
});b(a.p.xmlReader.total,d).each(function(){a.p.lastpage=this.textContent||this.text;if(a.p.lastpage===undefined){a.p.lastpage=1;}});b(a.p.xmlReader.records,d).each(function(){a.p.records=this.textContent||this.text||0;});b(a.p.xmlReader.userdata,d).each(function(){a.p.userData[this.getAttribute("name")]=this.textContent||this.text;
});(d=b(a.p.xmlReader.root+" "+a.p.xmlReader.row,d))||(d=[]);var ga=d.length,$=0;if(d&&ga){var ha=parseInt(a.p.rowNum,10),ra=a.p.scroll?(parseInt(a.p.page,10)-1)*ha+1:1;if(o){ha*=o+1;}o=b.isFunction(a.p.afterInsertRow);var ia={},xa="";if(a.p.grouping&&a.p.groupingView.groupCollapse===true){xa=' style="display:none;"';
}for(;$<ga;){N=d[$];L=D(N,ra+$);s=h===0?0:h+1;s=(s+$)%2==1?oa:"";X.push("<tr"+xa+' id="'+L+'" role="row" class ="ui-widget-content jqgrow ui-row-'+a.p.direction+""+s+'">');if(a.p.rownumbers===true){X.push(t(0,$,a.p.page,a.p.rowNum));K=1;}if(a.p.multiselect===true){X.push(A(L,K,$));I=1;}if(a.p.subGrid===true){X.push(b(a).jqGrid("addSubGridCell",I+K,$+h));
F=1;}if(a.p.xmlReader.repeatitems){W||(W=T(I+F+K));var Ba=b(a.p.xmlReader.cell,N);b.each(W,function(da){var Z=Ba[this];if(!Z){return false;}y=Z.textContent||Z.text;S[a.p.colModel[da+I+F+K].name]=y;X.push(p(L,y,da+I+F+K,$+h,N));});}else{for(s=0;s<U.length;s++){y=b(U[s],N).text();S[a.p.colModel[s+I+F+K].name]=y;
X.push(p(L,y,s+I+F+K,$+h,N));}}X.push("</tr>");if(a.p.grouping){s=a.p.groupingView.groupField.length;E=[];for(var ya=0;ya<s;ya++){E.push(S[a.p.groupingView.groupField[ya]]);}ia=b(a).jqGrid("groupingPrepare",X,E,ia,S);X=[];}if(w){S[C]=L;a.p.data.push(S);}if(a.p.gridview===false){if(a.p.treeGrid===true){s=a.p.treeANode>-1?a.p.treeANode:0;
E=b(X.join(""))[0];b(a.rows[$+s]).after(E);try{b(a).jqGrid("setTreeNode",S,E);}catch(Ia){}}else{b("tbody:first",g).append(X.join(""));}if(a.p.subGrid===true){try{b(a).jqGrid("addSubGrid",a.rows[a.rows.length-1],I+K);}catch(Ja){}}o&&a.p.afterInsertRow.call(a,L,S,N);X=[];}S={};v++;$++;if(v==ha){break;}}}if(a.p.gridview===true){if(a.p.grouping){b(a).jqGrid("groupingRender",ia,a.p.colModel.length);
ia=null;}else{b("tbody:first",g).append(X.join(""));}}a.p.totaltime=new Date-x;if(v>0){if(a.p.records===0){a.p.records=ga;}}X=null;if(!a.p.treeGrid&&!a.p.scroll){a.grid.bDiv.scrollTop=0;}a.p.reccount=v;a.p.treeANode=-1;a.p.userDataOnFooter&&b(a).jqGrid("footerData","set",a.p.userData,true);if(w){a.p.records=ga;
a.p.lastpage=Math.ceil(ga/ha);}q||a.updatepager(false,true);if(w){for(;v<ga;){N=d[v];L=D(N,v);if(a.p.xmlReader.repeatitems){W||(W=T(I+F+K));var Ea=b(a.p.xmlReader.cell,N);b.each(W,function(da){var Z=Ea[this];if(!Z){return false;}y=Z.textContent||Z.text;S[a.p.colModel[da+I+F+K].name]=y;});}else{for(s=0;
s<U.length;s++){y=b(U[s],N).text();S[a.p.colModel[s+I+F+K].name]=y;}}S[C]=L;a.p.data.push(S);S={};v++;}O();}}},ca=function(d,g,h,q,o){var x=new Date;if(d){if(a.p.treeANode===-1&&!a.p.scroll){Y(g,false);h=1;}else{h=h>1?h:1;}var w,C,D=a.p.datatype!="local"&&a.p.loadonce||a.p.datatype=="jsonstring";if(D){a.p.data=[];
a.p._index={};w=a.p.localReader.id="_id_";}a.p.reccount=0;if(a.p.datatype=="local"){g=a.p.localReader;C="local";}else{g=a.p.jsonReader;C="json";}var s=0,v,y,E,I=[],F,K=0,z=0,U=0,W,S,N={},L;E=[];var X=a.p.altRows===true?" "+a.p.altclass:"";a.p.page=b.jgrid.getAccessor(d,g.page)||0;W=b.jgrid.getAccessor(d,g.total);
a.p.lastpage=W===undefined?1:W;a.p.records=b.jgrid.getAccessor(d,g.records)||0;a.p.userData=b.jgrid.getAccessor(d,g.userdata)||{};g.repeatitems||(F=I=H(C));C=a.p.keyIndex===false?g.id:a.p.keyIndex;if(I.length>0&&!isNaN(C)){if(a.p.remapColumns&&a.p.remapColumns.length){C=b.inArray(C,a.p.remapColumns);
}C=I[C];}(S=b.jgrid.getAccessor(d,g.root))||(S=[]);W=S.length;d=0;var oa=parseInt(a.p.rowNum,10),ga=a.p.scroll?(parseInt(a.p.page,10)-1)*oa+1:1;if(o){oa*=o+1;}var $=b.isFunction(a.p.afterInsertRow),ha={},ra="";if(a.p.grouping&&a.p.groupingView.groupCollapse===true){ra=' style="display:none;"';}for(;d<W;
){o=S[d];L=b.jgrid.getAccessor(o,C);if(L===undefined){L=ga+d;if(I.length===0){if(g.cell){L=o[g.cell][C]||L;}}}v=h===1?0:h;v=(v+d)%2==1?X:"";E.push("<tr"+ra+' id="'+L+'" role="row" class= "ui-widget-content jqgrow ui-row-'+a.p.direction+""+v+'">');if(a.p.rownumbers===true){E.push(t(0,d,a.p.page,a.p.rowNum));
U=1;}if(a.p.multiselect){E.push(A(L,U,d));K=1;}if(a.p.subGrid){E.push(b(a).jqGrid("addSubGridCell",K+U,d+h));z=1;}if(g.repeatitems){if(g.cell){o=b.jgrid.getAccessor(o,g.cell);}F||(F=T(K+z+U));}for(y=0;y<F.length;y++){v=b.jgrid.getAccessor(o,F[y]);E.push(p(L,v,y+K+z+U,d+h,o));N[a.p.colModel[y+K+z+U].name]=v;
}E.push("</tr>");if(a.p.grouping){v=a.p.groupingView.groupField.length;y=[];for(var ia=0;ia<v;ia++){y.push(N[a.p.groupingView.groupField[ia]]);}ha=b(a).jqGrid("groupingPrepare",E,y,ha,N);E=[];}if(D){N[w]=L;a.p.data.push(N);}if(a.p.gridview===false){if(a.p.treeGrid===true){v=a.p.treeANode>-1?a.p.treeANode:0;
E=b(E.join(""))[0];b(a.rows[d+v]).after(E);try{b(a).jqGrid("setTreeNode",N,E);}catch(xa){}}else{b("#"+a.p.id+" tbody:first").append(E.join(""));}if(a.p.subGrid===true){try{b(a).jqGrid("addSubGrid",a.rows[a.rows.length-1],K+U);}catch(Ba){}}$&&a.p.afterInsertRow.call(a,L,N,o);E=[];}N={};s++;d++;if(s==oa){break;
}}if(a.p.gridview===true){a.p.grouping?b(a).jqGrid("groupingRender",ha,a.p.colModel.length):b("#"+a.p.id+" tbody:first").append(E.join(""));}a.p.totaltime=new Date-x;if(s>0){if(a.p.records===0){a.p.records=W;}}if(!a.p.treeGrid&&!a.p.scroll){a.grid.bDiv.scrollTop=0;}a.p.reccount=s;a.p.treeANode=-1;a.p.userDataOnFooter&&b(a).jqGrid("footerData","set",a.p.userData,true);
if(D){a.p.records=W;a.p.lastpage=Math.ceil(W/oa);}q||a.updatepager(false,true);if(D){for(;s<W;){o=S[s];L=b.jgrid.getAccessor(o,C);if(L===undefined){L=ga+s;if(I.length===0){if(g.cell){L=o[g.cell][C]||L;}}}if(o){if(g.repeatitems){if(g.cell){o=b.jgrid.getAccessor(o,g.cell);}F||(F=T(K+z+U));}for(y=0;y<F.length;
y++){v=b.jgrid.getAccessor(o,F[y]);N[a.p.colModel[y+K+z+U].name]=v;}N[w]=L;a.p.data.push(N);N={};}s++;}O();}}},P=function(){var d,g=false,h=[],q=[],o,x,w;if(b.isArray(a.p.data)){var C=a.p.grouping?a.p.groupingView:false;b.each(a.p.colModel,function(){x=this.sorttype||"text";if(x=="date"||x=="datetime"){if(this.formatter&&typeof this.formatter==="string"&&this.formatter=="date"){o=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:b.jgrid.formatter.date.srcformat;
w=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:b.jgrid.formatter.date.newformat;}else{o=w=this.datefmt||"Y-m-d";}h[this.name]={stype:x,srcfmt:o,newfmt:w};}else{h[this.name]={stype:x,srcfmt:"",newfmt:""};}if(a.p.grouping&&this.name==C.groupField[0]){q[0]=h[this.name];}if(!g&&(this.index==a.p.sortname||this.name==a.p.sortname)){d=this.name;
g=true;}});if(a.p.treeGrid){b(a).jqGrid("SortTree",d,a.p.sortorder,h[d].stype,h[d].srcfmt);}else{var D={eq:function(z){return z.equals;},ne:function(z){return z.not().equals;},lt:function(z){return z.less;},le:function(z){return z.lessOrEquals;},gt:function(z){return z.greater;},ge:function(z){return z.greaterOrEquals;
},cn:function(z){return z.contains;},nc:function(z){return z.not().contains;},bw:function(z){return z.startsWith;},bn:function(z){return z.not().startsWith;},en:function(z){return z.not().endsWith;},ew:function(z){return z.endsWith;},ni:function(z){return z.not().equals;},"in":function(z){return z.equals;
}},s=b.jgrid.from(a.p.data);if(a.p.ignoreCase){s=s.ignoreCase();}if(a.p.search===true){var v=a.p.postData.filters,y;if(v){if(typeof v=="string"){v=b.jgrid.parse(v);}for(var E=0,I=v.rules.length,F;E<I;E++){F=v.rules[E];y=v.groupOp;if(D[F.op]&&F.field&&F.data&&y){s=y.toUpperCase()=="OR"?D[F.op](s)(F.field,F.data,h[F.field]).or():D[F.op](s)(F.field,F.data,h[F.field]);
}}}else{try{s=D[a.p.postData.searchOper](s)(a.p.postData.searchField,a.p.postData.searchString,h[a.p.postData.searchField]);}catch(K){}}}if(a.p.grouping){s.orderBy(C.groupField[0],C.groupOrder[0],q[0].stype,q[0].srcfmt);C.groupDataSorted=true;}if(d&&a.p.sortorder&&g){a.p.sortorder.toUpperCase()=="DESC"?s.orderBy(a.p.sortname,"d",h[d].stype,h[d].srcfmt):s.orderBy(a.p.sortname,"a",h[d].stype,h[d].srcfmt);
}D=s.select();s=parseInt(a.p.rowNum,10);v=D.length;y=parseInt(a.p.page,10);E=Math.ceil(v/s);I={};D=D.slice((y-1)*s,y*s);h=s=null;I[a.p.localReader.total]=E;I[a.p.localReader.page]=y;I[a.p.localReader.records]=v;I[a.p.localReader.root]=D;D=null;return I;}}},aa=function(){a.grid.hDiv.loading=true;if(!a.p.hiddengrid){switch(a.p.loadui){case"disable":break;
case"enable":b("#load_"+a.p.id).show();break;case"block":b("#lui_"+a.p.id).show();b("#load_"+a.p.id).show();break;}}},pa=function(){a.grid.hDiv.loading=false;switch(a.p.loadui){case"disable":break;case"enable":b("#load_"+a.p.id).hide();break;case"block":b("#lui_"+a.p.id).hide();b("#load_"+a.p.id).hide();
break;}},ja=function(d){if(!a.grid.hDiv.loading){var g=a.p.scroll&&d===false,h={},q,o=a.p.prmNames;if(a.p.page<=0){a.p.page=1;}if(o.search!==null){h[o.search]=a.p.search;}if(o.nd!==null){h[o.nd]=(new Date).getTime();}if(o.rows!==null){h[o.rows]=a.p.rowNum;}if(o.page!==null){h[o.page]=a.p.page;}if(o.sort!==null){h[o.sort]=a.p.sortname;
}if(o.order!==null){h[o.order]=a.p.sortorder;}if(a.p.rowTotal!==null&&o.totalrows!==null){h[o.totalrows]=a.p.rowTotal;}var x=a.p.loadComplete,w=b.isFunction(x);w||(x=null);var C=0;d=d||1;if(d>1){if(o.npage!==null){h[o.npage]=d;C=d-1;d=1;}else{x=function(s){a.p.page++;a.grid.hDiv.loading=false;w&&a.p.loadComplete.call(a,s);
ja(d-1);};}}else{o.npage!==null&&delete a.p.postData[o.npage];}if(a.p.grouping){b(a).jqGrid("groupingSetup");if(a.p.groupingView.groupDataSorted===true){h[o.sort]=a.p.groupingView.groupField[0]+" "+a.p.groupingView.groupOrder[0]+", "+h[o.sort];}}b.extend(a.p.postData,h);var D=!a.p.scroll?1:a.rows.length-1;
if(b.isFunction(a.p.datatype)){a.p.datatype.call(a,a.p.postData,"load_"+a.p.id);}else{b.isFunction(a.p.beforeRequest)&&a.p.beforeRequest.call(a);q=a.p.datatype.toLowerCase();switch(q){case"json":case"jsonp":case"xml":case"script":b.ajax(b.extend({url:a.p.url,type:a.p.mtype,dataType:q,data:b.isFunction(a.p.serializeGridData)?a.p.serializeGridData.call(a,a.p.postData):a.p.postData,success:function(s){q==="xml"?fa(s,a.grid.bDiv,D,d>1,C):ca(s,a.grid.bDiv,D,d>1,C);
x&&x.call(a,s);g&&a.grid.populateVisible();if(a.p.loadonce||a.p.treeGrid){a.p.datatype="local";}pa();},error:function(s,v,y){b.isFunction(a.p.loadError)&&a.p.loadError.call(a,s,v,y);pa();},beforeSend:function(s){aa();b.isFunction(a.p.loadBeforeSend)&&a.p.loadBeforeSend.call(a,s);}},b.jgrid.ajaxOptions,a.p.ajaxGridOptions));
break;case"xmlstring":aa();h=b.jgrid.stringToDoc(a.p.datastr);fa(h,a.grid.bDiv);w&&a.p.loadComplete.call(a,h);a.p.datatype="local";a.p.datastr=null;pa();break;case"jsonstring":aa();h=typeof a.p.datastr=="string"?b.jgrid.parse(a.p.datastr):a.p.datastr;ca(h,a.grid.bDiv);w&&a.p.loadComplete.call(a,h);a.p.datatype="local";
a.p.datastr=null;pa();break;case"local":case"clientside":aa();a.p.datatype="local";h=P();ca(h,a.grid.bDiv,D,d>1,C);x&&x.call(a,h);g&&a.grid.populateVisible();pa();break;}}}};u=function(d,g){var h="",q="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",o="",x,w,C,D,s=function(v){var y;
if(b.isFunction(a.p.onPaging)){y=a.p.onPaging.call(a,v);}a.p.selrow=null;if(a.p.multiselect){a.p.selarrrow=[];b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv).attr("checked",false);}a.p.savedRow=[];if(y=="stop"){return false;}return true;};d=d.substr(1);x="pg_"+d;w=d+"_left";C=d+"_center";D=d+"_right";b("#"+d).append("<div id='"+x+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+w+"' align='left'></td><td id='"+C+"' align='center' style='white-space:pre;'></td><td id='"+D+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");
if(a.p.rowList.length>0){o="<td dir='"+m+"'>";o+="<select class='Combo ui-pg-selbox' role='listbox'>";for(w=0;w<a.p.rowList.length;w++){o+='<option role="option" value="'+a.p.rowList[w]+'"'+(a.p.rowNum==a.p.rowList[w]?' selected="selected"':"")+">"+a.p.rowList[w]+"</option>";}o+="</select></td>";}if(m=="rtl"){q+=o;
}if(a.p.pginput===true){h="<td dir='"+m+"'>"+b.jgrid.format(a.p.pgtext||"","<input class='ui-pg-input dojoValidateValid' type='text' size='2' maxlength='7' value='0' role='textbox' style='height: 18px; padding: 1px 0pt 1px 2px !important; font-size: 11px; background: none repeat scroll 0pt 0pt white !important;'/>","<span id='sp_1'></span>")+"</td>";}if(a.p.pgbuttons===true){w=["first"+g,"prev"+g,"next"+g,"last"+g];m=="rtl"&&w.reverse();q+="<td id='"+w[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>";
q+="<td id='"+w[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>";q+=h!==""?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+h+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"";
q+="<td id='"+w[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>";q+="<td id='"+w[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>";}else{if(h!==""){q+=h;}}if(m=="ltr"){q+=o;}q+="</tr></tbody></table>";a.p.viewrecords===true&&b("td#"+d+"_"+a.p.recordpos,"#"+x).append("<div dir='"+m+"' style='text-align:"+a.p.recordpos+"' class='ui-paging-info'></div>");
b("td#"+d+"_"+a.p.pagerpos,"#"+x).append(q);o=b(".ui-jqgrid").css("font-size")||"11px";b(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+o+";visibility:hidden;' ></div>");q=b(q).clone().appendTo("#testpg").width();b("#testpg").remove();if(q>0){if(h!=""){q+=50;
}b("td#"+d+"_"+a.p.pagerpos,"#"+x).width(q);}a.p._nvtd=[];a.p._nvtd[0]=q?Math.floor((a.p.width-q)/2):Math.floor(a.p.width/3);a.p._nvtd[1]=0;q=null;b(".ui-pg-selbox","#"+x).bind("change",function(){a.p.page=Math.round(a.p.rowNum*(a.p.page-1)/this.value-0.5)+1;a.p.rowNum=this.value;if(g){b(".ui-pg-selbox",a.p.pager).val(this.value);
}else{a.p.toppager&&b(".ui-pg-selbox",a.p.toppager).val(this.value);}if(!s("records")){return false;}ja();return false;});if(a.p.pgbuttons===true){b(".ui-pg-button","#"+x).hover(function(){if(b(this).hasClass("ui-state-disabled")){this.style.cursor="default";}else{b(this).addClass("ui-state-hover");this.style.cursor="pointer";
}},function(){if(!b(this).hasClass("ui-state-disabled")){b(this).removeClass("ui-state-hover");this.style.cursor="default";}});b("#first"+g+", #prev"+g+", #next"+g+", #last"+g,"#"+d).click(function(){var v=J(a.p.page,1),y=J(a.p.lastpage,1),E=false,I=true,F=true,K=true,z=true;if(y===0||y===1){z=K=F=I=false;
}else{if(y>1&&v>=1){if(v===1){F=I=false;}else{if(!(v>1&&v<y)){if(v===y){z=K=false;}}}}else{if(y>1&&v===0){z=K=false;v=y-1;}}}if(this.id==="first"+g&&I){a.p.page=1;E=true;}if(this.id==="prev"+g&&F){a.p.page=v-1;E=true;}if(this.id==="next"+g&&K){a.p.page=v+1;E=true;}if(this.id==="last"+g&&z){a.p.page=y;
E=true;}if(E){if(!s(this.id)){return false;}ja();}return false;});}a.p.pginput===true&&b("input.ui-pg-input","#"+x).keypress(function(v){if((v.charCode?v.charCode:v.keyCode?v.keyCode:0)==13){a.p.page=b(this).val()>0?b(this).val():a.p.page;if(!s("user")){return false;}ja();return false;}return this;});
};var Ca=function(d,g,h,q){if(a.p.colModel[g].sortable){if(!(a.p.savedRow.length>0)){if(!h){if(a.p.lastsort==g){if(a.p.sortorder=="asc"){a.p.sortorder="desc";}else{if(a.p.sortorder=="desc"){a.p.sortorder="asc";}}}else{a.p.sortorder=a.p.colModel[g].firstsortorder||"asc";}a.p.page=1;}if(q){if(a.p.lastsort==g&&a.p.sortorder==q&&!h){return;
}else{a.p.sortorder=q;}}h=b("thead:first",a.grid.hDiv).get(0);b("tr th:eq("+a.p.lastsort+") span.ui-grid-ico-sort",h).addClass("ui-state-disabled");b("tr th:eq("+a.p.lastsort+")",h).attr("aria-selected","false");b("tr th:eq("+g+") span.ui-icon-"+a.p.sortorder,h).removeClass("ui-state-disabled");b("tr th:eq("+g+")",h).attr("aria-selected","true");
if(!a.p.viewsortcols[0]){if(a.p.lastsort!=g){b("tr th:eq("+a.p.lastsort+") span.s-ico",h).hide();b("tr th:eq("+g+") span.s-ico",h).show();}}d=d.substring(5);a.p.sortname=a.p.colModel[g].index||d;h=a.p.sortorder;if(b.isFunction(a.p.onSortCol)){if(a.p.onSortCol.call(a,d,g,h)=="stop"){a.p.lastsort=g;return;
}}if(a.p.datatype=="local"){a.p.deselectAfterSort&&b(a).jqGrid("resetSelection");}else{a.p.selrow=null;a.p.multiselect&&b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv).attr("checked",false);a.p.selarrrow=[];a.p.savedRow=[];}if(a.p.scroll){h=a.grid.bDiv.scrollLeft;Y(a.grid.bDiv,true);a.grid.hDiv.scrollLeft=h;
}a.p.subGrid&&a.p.datatype=="local"&&b("td.sgexpanded","#"+a.p.id).each(function(){b(this).trigger("click");});ja();a.p.lastsort=g;if(a.p.sortname!=d&&g){a.p.lastsort=g;}}}},Fa=function(d){var g=d,h;for(h=d+1;h<a.p.colModel.length;h++){if(a.p.colModel[h].hidden!==true){g=h;break;}}return g-d;},Ga=function(d){var g,h={},q=G?0:a.p.cellLayout;
for(g=h[0]=h[1]=h[2]=0;g<=d;g++){if(a.p.colModel[g].hidden===false){h[0]+=a.p.colModel[g].width+q;}}if(a.p.direction=="rtl"){h[0]=a.p.width-h[0];}h[0]-=a.grid.bDiv.scrollLeft;if(b(a.grid.cDiv).is(":visible")){h[1]+=b(a.grid.cDiv).height()+parseInt(b(a.grid.cDiv).css("padding-top"),10)+parseInt(b(a.grid.cDiv).css("padding-bottom"),10);
}if(a.p.toolbar[0]===true&&(a.p.toolbar[1]=="top"||a.p.toolbar[1]=="both")){h[1]+=b(a.grid.uDiv).height()+parseInt(b(a.grid.uDiv).css("border-top-width"),10)+parseInt(b(a.grid.uDiv).css("border-bottom-width"),10);}if(a.p.toppager){h[1]+=b(a.grid.topDiv).height()+parseInt(b(a.grid.topDiv).css("border-bottom-width"),10);
}h[2]+=b(a.grid.bDiv).height()+b(a.grid.hDiv).height();return h;};this.p.id=this.id;if(b.inArray(a.p.multikey,["shiftKey","altKey","ctrlKey"])==-1){a.p.multikey=false;}a.p.keyIndex=false;for(k=0;k<a.p.colModel.length;k++){if(a.p.colModel[k].key===true){a.p.keyIndex=k;break;}}a.p.sortorder=a.p.sortorder.toLowerCase();
if(a.p.grouping===true){a.p.scroll=false;a.p.rownumbers=false;a.p.subGrid=false;a.p.treeGrid=false;a.p.gridview=true;}if(this.p.treeGrid===true){try{b(this).jqGrid("setTreeGrid");}catch(Ka){}if(a.p.datatype!="local"){a.p.localReader={id:"_id_"};}}if(this.p.subGrid){try{b(a).jqGrid("setSubGrid");}catch(La){}}if(this.p.multiselect){this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>");
this.p.colModel.unshift({name:"cb",width:G?a.p.multiselectWidth+a.p.cellLayout:a.p.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true});}if(this.p.rownumbers){this.p.colNames.unshift("");this.p.colModel.unshift({name:"rn",width:a.p.rownumWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true});
}a.p.xmlReader=b.extend(true,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:true,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:true,cell:"cell"}},a.p.xmlReader);a.p.jsonReader=b.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:true,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},a.p.jsonReader);
a.p.localReader=b.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:false,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},a.p.localReader);if(a.p.scroll){a.p.pgbuttons=false;a.p.pginput=false;a.p.rowList=[];}a.p.data.length&&O();
var ba="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",Da,ma,sa,qa,ta,V,R,na;ma=na="";if(a.p.shrinkToFit===true&&a.p.forceFit===true){for(k=a.p.colModel.length-1;k>=0;k--){if(!a.p.colModel[k].hidden){a.p.colModel[k].resizable=false;break;}}}if(a.p.viewsortcols[1]=="horizontal"){na=" ui-i-asc";
ma=" ui-i-desc";}Da=B?"class='ui-th-div-ie'":"";na="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+na+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+m+"'></span>";na+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+ma+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+m+"'></span></span>";
for(k=0;k<this.p.colNames.length;k++){ma=a.p.headertitles?' title="'+b.jgrid.stripHtml(a.p.colNames[k])+'"':"";ba+="<th id='"+a.p.id+"_"+a.p.colModel[k].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+m+"'"+ma+">";ma=a.p.colModel[k].index||a.p.colModel[k].name;ba+="<div id='jqgh_"+a.p.colModel[k].name+"' "+Da+">"+a.p.colNames[k];
a.p.colModel[k].width=a.p.colModel[k].width?parseInt(a.p.colModel[k].width,10):150;if(typeof a.p.colModel[k].title!=="boolean"){a.p.colModel[k].title=true;}if(ma==a.p.sortname){a.p.lastsort=k;}ba+=na+"</div></th>";}ba+="</tr></thead>";na=null;b(this).append(ba);b("thead tr:first th",this).hover(function(){b(this).addClass("ui-state-hover");
},function(){b(this).removeClass("ui-state-hover");});if(this.p.multiselect){var za=[],ua;b("#cb_"+b.jgrid.jqID(a.p.id),this).bind("click",function(){if(this.checked){b("[id^=jqg_"+a.p.id+"_]").attr("checked","checked");b(a.rows).each(function(d){if(d>0){if(!b(this).hasClass("subgrid")&&!b(this).hasClass("jqgroup")){b(this).addClass("ui-state-highlight").attr("aria-selected","true");
a.p.selarrrow[d]=a.p.selrow=this.id;}}});ua=true;za=[];}else{b("[id^=jqg_"+a.p.id+"_]").removeAttr("checked");b(a.rows).each(function(d){if(!b(this).hasClass("subgrid")){b(this).removeClass("ui-state-highlight").attr("aria-selected","false");za[d]=this.id;}});a.p.selarrrow=[];a.p.selrow=null;ua=false;
}if(b.isFunction(a.p.onSelectAll)){a.p.onSelectAll.call(a,ua?a.p.selarrrow:za,ua);}});}if(a.p.autowidth===true){ba=b(Q).innerWidth();a.p.width=ba>0?ba:"nw";}(function(){var d=0,g=a.p.cellLayout,h=0,q,o=a.p.scrollOffset,x,w=false,C,D=0,s=0,v=0,y;if(G){g=0;}b.each(a.p.colModel,function(){if(typeof this.hidden==="undefined"){this.hidden=false;
}if(this.hidden===false){d+=J(this.width,0);if(this.fixed){D+=this.width;s+=this.width+g;}else{h++;}v++;}});if(isNaN(a.p.width)){a.p.width=e.width=d;}else{e.width=a.p.width;}a.p.tblwidth=d;if(a.p.shrinkToFit===false&&a.p.forceFit===true){a.p.forceFit=false;}if(a.p.shrinkToFit===true&&h>0){C=e.width-g*h-s;
if(!isNaN(a.p.height)){C-=o;w=true;}d=0;b.each(a.p.colModel,function(E){if(this.hidden===false&&!this.fixed){this.width=x=Math.round(C*this.width/(a.p.tblwidth-D));d+=x;q=E;}});y=0;if(w){if(e.width-s-(d+g*h)!==o){y=e.width-s-(d+g*h)-o;}}else{if(!w&&Math.abs(e.width-s-(d+g*h))!==1){y=e.width-s-(d+g*h);
}}a.p.colModel[q].width+=y;a.p.tblwidth=d+y+D+v*g;if(a.p.tblwidth>a.p.width){a.p.colModel[q].width-=a.p.tblwidth-parseInt(a.p.width,10);a.p.tblwidth=a.p.width;}}})();b(Q).css("width",e.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+a.p.id+"'>&#160;</div>");b(r).css("width",e.width+"px");
ba=b("thead:first",a).get(0);var va="";if(a.p.footerrow){va+="<table role='grid' style='width:"+a.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+m+"'>";}r=b("tr:first",ba);var wa="<tr class='jqgfirstrow' role='row' style='height:auto'>";
a.p.disableClick=false;b("th",r).each(function(d){sa=a.p.colModel[d].width;if(typeof a.p.colModel[d].resizable==="undefined"){a.p.colModel[d].resizable=true;}if(a.p.colModel[d].resizable){qa=document.createElement("span");b(qa).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+m);b.browser.opera||b(qa).css("cursor","col-resize");
b(this).addClass(a.p.resizeclass);}else{qa="";}b(this).css("width",sa+"px").prepend(qa);var g="";if(a.p.colModel[d].hidden){b(this).css("display","none");g="display:none;";}wa+="<td role='gridcell' style='height:0px;width:"+sa+"px;"+g+"'></td>";e.headers[d]={width:sa,el:this};ta=a.p.colModel[d].sortable;
if(typeof ta!=="boolean"){ta=a.p.colModel[d].sortable=true;}g=a.p.colModel[d].name;g=="cb"||g=="subgrid"||g=="rn"||a.p.viewsortcols[2]&&b("div",this).addClass("ui-jqgrid-sortable");if(ta){if(a.p.viewsortcols[0]){b("div span.s-ico",this).show();d==a.p.lastsort&&b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled");
}else{if(d==a.p.lastsort){b("div span.s-ico",this).show();b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled");}}}if(a.p.footerrow){va+="<td role='gridcell' "+M(d,0,"")+">&#160;</td>";}}).mousedown(function(d){if(b(d.target).closest("th>span.ui-jqgrid-resize").length==1){var g=b.jgrid.getCellIndex(this);
if(a.p.forceFit===true){a.p.nv=Fa(g);}e.dragStart(g,d,Ga(g));return false;}}).click(function(d){if(a.p.disableClick){return a.p.disableClick=false;}var g="th>div.ui-jqgrid-sortable",h,q;a.p.viewsortcols[2]||(g="th>div>span>span.ui-grid-ico-sort");d=b(d.target).closest(g);if(d.length==1){g=b.jgrid.getCellIndex(this);
if(!a.p.viewsortcols[2]){h=true;q=d.attr("sort");}Ca(b("div",this)[0].id,g,h,q);return false;}});if(a.p.sortable&&b.fn.sortable){try{b(a).jqGrid("sortableColumns",r);}catch(Ma){}}if(a.p.footerrow){va+="</tr></tbody></table>";}wa+="</tr>";this.appendChild(document.createElement("tbody"));b(this).addClass("ui-jqgrid-btable").append(wa);
wa=null;r=b("<table class='ui-jqgrid-htable' style='width:"+a.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(ba);var ea=a.p.caption&&a.p.hiddengrid===true?true:false;k=b("<div class='ui-jqgrid-hbox"+(m=="rtl"?"-rtl":"")+"'></div>");
ba=null;e.hDiv=document.createElement("div");b(e.hDiv).css({width:e.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(k);b(k).append(r);r=null;ea&&b(e.hDiv).hide();if(a.p.pager){if(typeof a.p.pager=="string"){if(a.p.pager.substr(0,1)!="#"){a.p.pager="#"+a.p.pager;}}else{a.p.pager="#"+b(a.p.pager).attr("id");
}b(a.p.pager).css({width:e.width+"px"}).appendTo(Q).addClass("ui-state-default ui-jqgrid-pager");ea&&b(a.p.pager).hide();u(a.p.pager,"");}a.p.cellEdit===false&&a.p.hoverrows===true&&b(a).bind("mouseover",function(d){R=b(d.target).closest("tr.jqgrow");b(R).attr("class")!=="subgrid"&&b(R).addClass("ui-state-hover");
return false;}).bind("mouseout",function(d){R=b(d.target).closest("tr.jqgrow");b(R).removeClass("ui-state-hover");return false;});var ka,la;b(a).before(e.hDiv).click(function(d){V=d.target;var g=b(V).hasClass("cbox");R=b(V,a.rows).closest("tr.jqgrow");if(b(R).length===0){return this;}var h=true;if(b.isFunction(a.p.beforeSelectRow)){h=a.p.beforeSelectRow.call(a,R[0].id,d);
}if(V.tagName=="A"||(V.tagName=="INPUT"||V.tagName=="TEXTAREA"||V.tagName=="OPTION"||V.tagName=="SELECT")&&!g){return this;}if(h===true){if(a.p.cellEdit===true){if(a.p.multiselect&&g){b(a).jqGrid("setSelection",R[0].id,true);}else{ka=R[0].rowIndex;la=b.jgrid.getCellIndex(V);try{b(a).jqGrid("editCell",ka,la,true);
}catch(q){}}}else{if(a.p.multikey){if(d[a.p.multikey]){b(a).jqGrid("setSelection",R[0].id,true);}else{if(a.p.multiselect&&g){g=b("[id^=jqg_"+a.p.id+"_]").attr("checked");b("[id^=jqg_"+a.p.id+"_]").attr("checked",!g);}}}else{if(a.p.multiselect&&a.p.multiboxonly){if(!g){b(a.p.selarrrow).each(function(o,x){o=a.rows.namedItem(x);
b(o).removeClass("ui-state-highlight");b("#jqg_"+a.p.id+"_"+b.jgrid.jqID(x)).attr("checked",false);});a.p.selarrrow=[];b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv).attr("checked",false);}}b(a).jqGrid("setSelection",R[0].id,true);}}if(b.isFunction(a.p.onCellSelect)){ka=R[0].id;la=b.jgrid.getCellIndex(V);
a.p.onCellSelect.call(a,ka,la,b(V).html(),d);}d.stopPropagation();}else{return this;}}).bind("reloadGrid",function(d,g){if(a.p.treeGrid===true){a.p.datatype=a.p.treedatatype;}g&&g.current&&a.grid.selectionPreserver(a);if(a.p.datatype=="local"){b(a).jqGrid("resetSelection");a.p.data.length&&O();}else{if(!a.p.treeGrid){a.p.selrow=null;
if(a.p.multiselect){a.p.selarrrow=[];b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv).attr("checked",false);}a.p.savedRow=[];}}a.p.scroll&&Y(a.grid.bDiv,true);if(g&&g.page){d=g.page;if(d>a.p.lastpage){d=a.p.lastpage;}if(d<1){d=1;}a.p.page=d;a.grid.bDiv.scrollTop=a.grid.prevRowHeight?(d-1)*a.grid.prevRowHeight*a.p.rowNum:0;
}if(a.grid.prevRowHeight&&a.p.scroll){delete a.p.lastpage;a.grid.populateVisible();}else{a.grid.populate();}return false;});b.isFunction(this.p.ondblClickRow)&&b(this).dblclick(function(d){V=d.target;R=b(V,a.rows).closest("tr.jqgrow");if(b(R).length===0){return false;}ka=R[0].rowIndex;la=b.jgrid.getCellIndex(V);
a.p.ondblClickRow.call(a,b(R).attr("id"),ka,la,d);return false;});b.isFunction(this.p.onRightClickRow)&&b(this).bind("contextmenu",function(d){V=d.target;R=b(V,a.rows).closest("tr.jqgrow");if(b(R).length===0){return false;}a.p.multiselect||b(a).jqGrid("setSelection",R[0].id,true);ka=R[0].rowIndex;la=b.jgrid.getCellIndex(V);
a.p.onRightClickRow.call(a,b(R).attr("id"),ka,la,d);return false;});e.bDiv=document.createElement("div");b(e.bDiv).append(b('<div style="position:relative;'+(B&&b.browser.version<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:a.p.height+(isNaN(a.p.height)?"":"px"),width:e.width+"px"}).scroll(e.scrollGrid);
b("table:first",e.bDiv).css({width:a.p.tblwidth+"px"});if(B){b("tbody",this).size()==2&&b("tbody:gt(0)",this).remove();a.p.multikey&&b(e.bDiv).bind("selectstart",function(){return false;});}else{a.p.multikey&&b(e.bDiv).bind("mousedown",function(){return false;});}ea&&b(e.bDiv).hide();e.cDiv=document.createElement("div");
var Aa=a.p.hidegrid===true?b("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){Aa.addClass("ui-state-hover");},function(){Aa.removeClass("ui-state-hover");}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css(m=="rtl"?"left":"right","0px"):"";
b(e.cDiv).append(Aa).append("<span class='ui-jqgrid-title"+(m=="rtl"?"-rtl":"")+"'>"+a.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix");b(e.cDiv).insertBefore(e.hDiv);if(a.p.toolbar[0]){e.uDiv=document.createElement("div");if(a.p.toolbar[1]=="top"){b(e.uDiv).insertBefore(e.hDiv);
}else{a.p.toolbar[1]=="bottom"&&b(e.uDiv).insertAfter(e.hDiv);}if(a.p.toolbar[1]=="both"){e.ubDiv=document.createElement("div");b(e.uDiv).insertBefore(e.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id);b(e.ubDiv).insertAfter(e.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id);
ea&&b(e.ubDiv).hide();}else{b(e.uDiv).width(e.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id);}ea&&b(e.uDiv).hide();}if(a.p.toppager){a.p.toppager=a.p.id+"_toppager";e.topDiv=b("<div id='"+a.p.toppager+"'></div>")[0];a.p.toppager="#"+a.p.toppager;b(e.topDiv).insertBefore(e.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(e.width);
u(a.p.toppager,"_t");}if(a.p.footerrow){e.sDiv=b("<div class='ui-jqgrid-sdiv'></div>")[0];k=b("<div class='ui-jqgrid-hbox"+(m=="rtl"?"-rtl":"")+"'></div>");b(e.sDiv).append(k).insertAfter(e.hDiv).width(e.width);b(k).append(va);e.footers=b(".ui-jqgrid-ftable",e.sDiv)[0].rows[0].cells;if(a.p.rownumbers){e.footers[0].className="ui-state-default jqgrid-rownum";
}ea&&b(e.sDiv).hide();}k=null;if(a.p.caption){var Ha=a.p.datatype;if(a.p.hidegrid===true){b(".ui-jqgrid-titlebar-close",e.cDiv).click(function(d){var g=b.isFunction(a.p.onHeaderClick);if(a.p.gridstate=="visible"){b(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+a.p.id).slideUp("fast");a.p.pager&&b(a.p.pager).slideUp("fast");
a.p.toppager&&b(a.p.toppager).slideUp("fast");if(a.p.toolbar[0]===true){a.p.toolbar[1]=="both"&&b(e.ubDiv).slideUp("fast");b(e.uDiv).slideUp("fast");}a.p.footerrow&&b(".ui-jqgrid-sdiv","#gbox_"+a.p.id).slideUp("fast");b("span",this).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");
a.p.gridstate="hidden";b("#gbox_"+a.p.id).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+a.p.id).hide();if(g){ea||a.p.onHeaderClick.call(a,a.p.gridstate,d);}}else{if(a.p.gridstate=="hidden"){b(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+a.p.id).slideDown("fast");a.p.pager&&b(a.p.pager).slideDown("fast");
a.p.toppager&&b(a.p.toppager).slideDown("fast");if(a.p.toolbar[0]===true){a.p.toolbar[1]=="both"&&b(e.ubDiv).slideDown("fast");b(e.uDiv).slideDown("fast");}a.p.footerrow&&b(".ui-jqgrid-sdiv","#gbox_"+a.p.id).slideDown("fast");b("span",this).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");
if(ea){a.p.datatype=Ha;ja();ea=false;}a.p.gridstate="visible";b("#gbox_"+a.p.id).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+a.p.id).show();g&&a.p.onHeaderClick.call(a,a.p.gridstate,d);}}return false;});if(ea){a.p.datatype="local";b(".ui-jqgrid-titlebar-close",e.cDiv).trigger("click");
}}}else{b(e.cDiv).hide();}b(e.hDiv).after(e.bDiv).mousemove(function(d){if(e.resizing){e.dragMove(d);return false;}});b(".ui-jqgrid-labels",e.hDiv).bind("selectstart",function(){return false;});b(document).mouseup(function(){if(e.resizing){e.dragEnd();return false;}return true;});a.formatCol=M;a.sortData=Ca;
a.updatepager=function(d,g){var h,q,o,x,w,C,D,s="";o=parseInt(a.p.page,10)-1;if(o<0){o=0;}o*=parseInt(a.p.rowNum,10);w=o+a.p.reccount;if(a.p.scroll){h=b("tbody:first > tr:gt(0)",a.grid.bDiv);o=w-h.length;a.p.reccount=h.length;if(q=h.outerHeight()||a.grid.prevRowHeight){h=o*q;q=parseInt(a.p.records,10)*q;
b(">div:first",a.grid.bDiv).css({height:q}).children("div:first").css({height:h,display:h?"":"none"});}a.grid.bDiv.scrollLeft=a.grid.hDiv.scrollLeft;}s=a.p.pager?a.p.pager:"";s+=a.p.toppager?s?","+a.p.toppager:a.p.toppager:"";if(s){D=b.jgrid.formatter.integer||{};h=J(a.p.page);q=J(a.p.lastpage);b(".selbox",s).attr("disabled",false);
if(a.p.pginput===true){b(".ui-pg-input",s).val(a.p.page);b("#sp_1",s).html(b.fmatter?b.fmatter.util.NumberFormat(a.p.lastpage,D):a.p.lastpage);}if(a.p.viewrecords){if(a.p.reccount===0){b(".ui-paging-info",s).html(a.p.emptyrecords);}else{x=o+1;C=a.p.records;if(b.fmatter){x=b.fmatter.util.NumberFormat(x,D);
w=b.fmatter.util.NumberFormat(w,D);C=b.fmatter.util.NumberFormat(C,D);}b(".ui-paging-info",s).html(b.jgrid.format(a.p.recordtext,x,w,C));}}if(a.p.pgbuttons===true){if(h<=0){h=q=0;}if(h==1||h===0){b("#first, #prev",a.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover");a.p.toppager&&b("#first_t, #prev_t",a.p.toppager).addClass("ui-state-disabled").removeClass("ui-state-hover");
}else{b("#first, #prev",a.p.pager).removeClass("ui-state-disabled");a.p.toppager&&b("#first_t, #prev_t",a.p.toppager).removeClass("ui-state-disabled");}if(h==q||h===0){b("#next, #last",a.p.pager).addClass("ui-state-disabled").removeClass("ui-state-hover");a.p.toppager&&b("#next_t, #last_t",a.p.toppager).addClass("ui-state-disabled").removeClass("ui-state-hover");
}else{b("#next, #last",a.p.pager).removeClass("ui-state-disabled");a.p.toppager&&b("#next_t, #last_t",a.p.toppager).removeClass("ui-state-disabled");}}}d===true&&a.p.rownumbers===true&&b("td.jqgrid-rownum",a.rows).each(function(v){b(this).html(o+1+v);});g&&a.p.jqgdnd&&b(a).jqGrid("gridDnD","updateDnD");
b.isFunction(a.p.gridComplete)&&a.p.gridComplete.call(a);};a.refreshIndex=O;a.formatter=function(d,g,h,q,o){return l(d,g,h,q,o);};b.extend(e,{populate:ja,emptyRows:Y});this.grid=e;a.addXmlData=function(d){fa(d,a.grid.bDiv);};a.addJSONData=function(d){ca(d,a.grid.bDiv);};this.grid.cols=this.rows[0].cells;
ja();a.p.hiddengrid=false;b(window).unload(function(){a=null;});}}}});};b.jgrid.extend({getGridParam:function(f){var j=this[0];if(j&&j.grid){return f?typeof j.p[f]!="undefined"?j.p[f]:null:j.p;}},setGridParam:function(f){return this.each(function(){this.grid&&typeof f==="object"&&b.extend(true,this.p,f);
});},getDataIDs:function(){var f=[],j=0,i,c=0;this.each(function(){if((i=this.rows.length)&&i>0){for(;j<i;){if(b(this.rows[j]).hasClass("jqgrow")){f[c]=this.rows[j].id;c++;}j++;}}});return f;},setSelection:function(f,j){return this.each(function(){function i(m){var a=b(c.grid.bDiv)[0].clientHeight,r=b(c.grid.bDiv)[0].scrollTop,u=c.rows[m].offsetTop;
m=c.rows[m].clientHeight;if(u+m>=a+r){b(c.grid.bDiv)[0].scrollTop=u-(a+r)+m+r;}else{if(u<a+r){if(u<r){b(c.grid.bDiv)[0].scrollTop=u;}}}}var c=this,e,k;if(f!==undefined){j=j===false?false:true;if(e=c.rows.namedItem(f+"")){if(c.p.scrollrows===true){k=c.rows.namedItem(f).rowIndex;k>=0&&i(k);}if(c.p.multiselect){c.p.selrow=e.id;
k=b.inArray(c.p.selrow,c.p.selarrrow);if(k===-1){e.className!=="ui-subgrid"&&b(e).addClass("ui-state-highlight").attr("aria-selected","true");e=true;b("#jqg_"+c.p.id+"_"+b.jgrid.jqID(c.p.selrow)).attr("checked",e);c.p.selarrrow.push(c.p.selrow);c.p.onSelectRow&&j&&c.p.onSelectRow.call(c,c.p.selrow,e);
}else{e.className!=="ui-subgrid"&&b(e).removeClass("ui-state-highlight").attr("aria-selected","false");e=false;b("#jqg_"+c.p.id+"_"+b.jgrid.jqID(c.p.selrow)).attr("checked",e);c.p.selarrrow.splice(k,1);c.p.onSelectRow&&j&&c.p.onSelectRow.call(c,c.p.selrow,e);e=c.p.selarrrow[0];c.p.selrow=e===undefined?null:e;
}}else{if(e.className!=="ui-subgrid"){c.p.selrow&&b(c.rows.namedItem(c.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false");c.p.selrow=e.id;b(e).addClass("ui-state-highlight").attr("aria-selected","true");c.p.onSelectRow&&j&&c.p.onSelectRow.call(c,c.p.selrow,true);}}}}});},resetSelection:function(){return this.each(function(){var f=this,j;
if(f.p.multiselect){b(f.p.selarrrow).each(function(i,c){j=f.rows.namedItem(c);b(j).removeClass("ui-state-highlight").attr("aria-selected","false");b("#jqg_"+f.p.id+"_"+b.jgrid.jqID(c)).attr("checked",false);});b("#cb_"+b.jgrid.jqID(f.p.id)).attr("checked",false);f.p.selarrrow=[];}else{if(f.p.selrow){b("#"+f.p.id+" tbody:first tr#"+b.jgrid.jqID(f.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false");
f.p.selrow=null;}}f.p.savedRow=[];});},getRowData:function(f){var j={},i,c=false,e,k=0;this.each(function(){var m=this,a,r;if(typeof f=="undefined"){c=true;i=[];e=m.rows.length;}else{r=m.rows.namedItem(f);if(!r){return j;}e=2;}for(;k<e;){if(c){r=m.rows[k];}if(b(r).hasClass("jqgrow")){b("td",r).each(function(u){a=m.p.colModel[u].name;
if(a!=="cb"&&a!=="subgrid"&&a!=="rn"){if(m.p.treeGrid===true&&a==m.p.ExpandColumn){j[a]=b.jgrid.htmlDecode(b("span:first",this).html());}else{try{j[a]=b.unformat(this,{rowId:r.id,colModel:m.p.colModel[u]},u);}catch(B){j[a]=b.jgrid.htmlDecode(b(this).html());}}}});if(c){i.push(j);j={};}}k++;}});return i?i:j;
},delRowData:function(f){var j=false,i,c;this.each(function(){var e=this;if(i=e.rows.namedItem(f)){b(i).remove();e.p.records--;e.p.reccount--;e.updatepager(true,false);j=true;if(e.p.multiselect){c=b.inArray(f,e.p.selarrrow);c!=-1&&e.p.selarrrow.splice(c,1);}if(f==e.p.selrow){e.p.selrow=null;}}else{return false;
}if(e.p.datatype=="local"){var k=e.p._index[f];if(typeof k!="undefined"){e.p.data.splice(k,1);e.refreshIndex();}}if(e.p.altRows===true&&j){var m=e.p.altclass;b(e.rows).each(function(a){a%2==1?b(this).addClass(m):b(this).removeClass(m);});}});return j;},setRowData:function(f,j,i){var c,e=true,k;this.each(function(){if(!this.grid){return false;
}var m=this,a,r,u=typeof i,B={};r=m.rows.namedItem(f);if(!r){return false;}if(j){try{b(this.p.colModel).each(function(J){c=this.name;if(j[c]!==undefined){B[c]=this.formatter&&typeof this.formatter==="string"&&this.formatter=="date"?b.unformat.date(j[c],this):j[c];a=m.formatter(f,j[c],J,j,"edit");k=this.title?{title:b.jgrid.stripHtml(a)}:{};
m.p.treeGrid===true&&c==m.p.ExpandColumn?b("td:eq("+J+") > span:first",r).html(a).attr(k):b("td:eq("+J+")",r).html(a).attr(k);}});if(m.p.datatype=="local"){var G=m.p._index[f];if(typeof G!="undefined"){m.p.data[G]=b.extend(true,m.p.data[G],B);}B=null;}}catch(Q){e=false;}}if(e){if(u==="string"){b(r).addClass(i);
}else{u==="object"&&b(r).css(i);}}});return e;},addRowData:function(f,j,i,c){i||(i="last");var e=false,k,m,a,r,u,B,G,Q,J="",M,n,l,p,A;if(j){if(b.isArray(j)){M=true;i="last";n=f;}else{j=[j];M=false;}this.each(function(){var t=this,H=j.length;u=t.p.rownumbers===true?1:0;a=t.p.multiselect===true?1:0;r=t.p.subGrid===true?1:0;
if(!M){if(typeof f!="undefined"){f+="";}else{f=t.p.records+1+"";if(t.p.keyIndex!==false){n=t.p.colModel[t.p.keyIndex+a+r+u].name;if(typeof j[0][n]!="undefined"){f=j[0][n];}}}}l=t.p.altclass;for(var T=0,Y="",O={},fa=b.isFunction(t.p.afterInsertRow)?true:false;T<H;){p=j[T];m="";if(M){try{f=p[n];}catch(ca){f=t.p.records+1+"";
}Y=t.p.altRows===true?(t.rows.length-1)%2===0?l:"":"";}if(u){J=t.formatCol(0,1,"");m+='<td role="gridcell" aria-describedby="'+t.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+J+">0</td>";}if(a){Q='<input role="checkbox" type="checkbox" id="jqg_'+t.p.id+"_"+f+'" class="cbox"/>';J=t.formatCol(u,1,"");
m+='<td role="gridcell" aria-describedby="'+t.p.id+'_cb" '+J+">"+Q+"</td>";}if(r){m+=b(t).jqGrid("addSubGridCell",a+u,1);}for(G=a+r+u;G<t.p.colModel.length;G++){A=t.p.colModel[G];k=A.name;O[k]=A.formatter&&typeof A.formatter==="string"&&A.formatter=="date"?b.unformat.date(p[k],A):p[k];Q=t.formatter(f,b.jgrid.getAccessor(p,k),G,p,"edit");
J=t.formatCol(G,1,Q);m+='<td role="gridcell" aria-describedby="'+t.p.id+"_"+k+'" '+J+">"+Q+"</td>";}m='<tr id="'+f+'" role="row" class="ui-widget-content jqgrow ui-row-'+t.p.direction+" "+Y+'">'+m+"</tr>";if(t.p.subGrid===true){m=b(m)[0];b(t).jqGrid("addSubGrid",m,a+u);}if(t.rows.length===0){b("table:first",t.grid.bDiv).append(m);
}else{switch(i){case"last":b(t.rows[t.rows.length-1]).after(m);break;case"first":b(t.rows[0]).after(m);break;case"after":if(B=t.rows.namedItem(c)){b(t.rows[B.rowIndex+1]).hasClass("ui-subgrid")?b(t.rows[B.rowIndex+1]).after(m):b(B).after(m);}break;case"before":if(B=t.rows.namedItem(c)){b(B).before(m);
B=B.rowIndex;}break;}}t.p.records++;t.p.reccount++;fa&&t.p.afterInsertRow.call(t,f,p,p);T++;if(t.p.datatype=="local"){t.p._index[f]=t.p.data.length;t.p.data.push(O);O={};}}if(t.p.altRows===true&&!M){if(i=="last"){(t.rows.length-1)%2==1&&b(t.rows[t.rows.length-1]).addClass(l);}else{b(t.rows).each(function(P){P%2==1?b(this).addClass(l):b(this).removeClass(l);
});}}t.updatepager(true,true);e=true;});}return e;},footerData:function(f,j,i){function c(r){for(var u in r){if(r.hasOwnProperty(u)){return false;}}return true;}var e,k=false,m={},a;if(typeof f=="undefined"){f="get";}if(typeof i!="boolean"){i=true;}f=f.toLowerCase();this.each(function(){var r=this,u;
if(!r.grid||!r.p.footerrow){return false;}if(f=="set"){if(c(j)){return false;}}k=true;b(this.p.colModel).each(function(B){e=this.name;if(f=="set"){if(j[e]!==undefined){u=i?r.formatter("",j[e],B,j,"edit"):j[e];a=this.title?{title:b.jgrid.stripHtml(u)}:{};b("tr.footrow td:eq("+B+")",r.grid.sDiv).html(u).attr(a);
k=true;}}else{if(f=="get"){m[e]=b("tr.footrow td:eq("+B+")",r.grid.sDiv).html();}}});});return f=="get"?m:k;},ShowHideCol:function(f,j){return this.each(function(){var i=this,c=false;if(i.grid){if(typeof f==="string"){f=[f];}j=j!="none"?"":"none";var e=j===""?true:false;b(this.p.colModel).each(function(k){if(b.inArray(this.name,f)!==-1&&this.hidden===e){b("tr",i.grid.hDiv).each(function(){b("th:eq("+k+")",this).css("display",j);
});b(i.rows).each(function(m){b("td:eq("+k+")",i.rows[m]).css("display",j);});i.p.footerrow&&b("td:eq("+k+")",i.grid.sDiv).css("display",j);if(j=="none"){i.p.tblwidth-=this.width+i.p.cellLayout;}else{i.p.tblwidth+=this.width;}this.hidden=!e;c=true;}});if(c===true){b("table:first",i.grid.hDiv).width(i.p.tblwidth);
b("table:first",i.grid.bDiv).width(i.p.tblwidth);i.grid.hDiv.scrollLeft=i.grid.bDiv.scrollLeft;if(i.p.footerrow){b("table:first",i.grid.sDiv).width(i.p.tblwidth);i.grid.sDiv.scrollLeft=i.grid.bDiv.scrollLeft;}i.p.shrinkToFit===true&&b(i).jqGrid("setGridWidth",i.grid.width-0.001,true);}}});},hideCol:function(f){return this.each(function(){b(this).jqGrid("ShowHideCol",f,"none");
});},showCol:function(f){return this.each(function(){b(this).jqGrid("ShowHideCol",f,"");});},remapColumns:function(f,j,i){function c(m){var a;a=m.length?b.makeArray(m):b.extend({},m);b.each(f,function(r){m[r]=a[this];});}function e(m,a){b(">tr"+(a||""),m).each(function(){var r=this,u=b.makeArray(r.cells);
b.each(f,function(){var B=u[this];B&&r.appendChild(B);});});}var k=this.get(0);c(k.p.colModel);c(k.p.colNames);c(k.grid.headers);e(b("thead:first",k.grid.hDiv),i&&":not(.ui-jqgrid-labels)");j&&e(b("#"+k.p.id+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");k.p.footerrow&&e(b("tbody:first",k.grid.sDiv));
if(k.p.remapColumns){if(k.p.remapColumns.length){c(k.p.remapColumns);}else{k.p.remapColumns=b.makeArray(f);}}k.p.lastsort=b.inArray(k.p.lastsort,f);if(k.p.treeGrid){k.p.expColInd=b.inArray(k.p.expColInd,f);}},setGridWidth:function(f,j){return this.each(function(){if(this.grid){var i=this,c,e=0,k=i.p.cellLayout,m,a=0,r=false,u=i.p.scrollOffset,B,G=0,Q=0,J=0,M;
if(typeof j!="boolean"){j=i.p.shrinkToFit;}if(!isNaN(f)){f=parseInt(f,10);i.grid.width=i.p.width=f;b("#gbox_"+i.p.id).css("width",f+"px");b("#gview_"+i.p.id).css("width",f+"px");b(i.grid.bDiv).css("width",f+"px");b(i.grid.hDiv).css("width",f+"px");i.p.pager&&b(i.p.pager).css("width",f+"px");i.p.toppager&&b(i.p.toppager).css("width",f+"px");
if(i.p.toolbar[0]===true){b(i.grid.uDiv).css("width",f+"px");i.p.toolbar[1]=="both"&&b(i.grid.ubDiv).css("width",f+"px");}i.p.footerrow&&b(i.grid.sDiv).css("width",f+"px");if(j===false&&i.p.forceFit===true){i.p.forceFit=false;}if(j===true){if(b.browser.safari){k=0;}b.each(i.p.colModel,function(){if(this.hidden===false){e+=parseInt(this.width,10);
if(this.fixed){Q+=this.width;G+=this.width+k;}else{a++;}J++;}});if(a!==0){i.p.tblwidth=e;B=f-k*a-G;if(!isNaN(i.p.height)){if(b(i.grid.bDiv)[0].clientHeight<b(i.grid.bDiv)[0].scrollHeight||i.rows.length===1){r=true;B-=u;}}e=0;var n=i.grid.cols.length>0;b.each(i.p.colModel,function(l){if(this.hidden===false&&!this.fixed){c=Math.round(B*this.width/(i.p.tblwidth-Q));
if(!(c<0)){this.width=c;e+=c;i.grid.headers[l].width=c;i.grid.headers[l].el.style.width=c+"px";if(i.p.footerrow){i.grid.footers[l].style.width=c+"px";}if(n){i.grid.cols[l].style.width=c+"px";}m=l;}}});M=0;if(r){if(f-G-(e+k*a)!==u){M=f-G-(e+k*a)-u;}}else{if(Math.abs(f-G-(e+k*a))!==1){M=f-G-(e+k*a);}}i.p.colModel[m].width+=M;
i.p.tblwidth=e+M+Q+k*J;if(i.p.tblwidth>f){r=i.p.tblwidth-parseInt(f,10);i.p.tblwidth=f;c=i.p.colModel[m].width-=r;}else{c=i.p.colModel[m].width;}i.grid.headers[m].width=c;i.grid.headers[m].el.style.width=c+"px";if(n){i.grid.cols[m].style.width=c+"px";}b("table:first",i.grid.bDiv).css("width",i.p.tblwidth+"px");
b("table:first",i.grid.hDiv).css("width",i.p.tblwidth+"px");i.grid.hDiv.scrollLeft=i.grid.bDiv.scrollLeft;if(i.p.footerrow){i.grid.footers[m].style.width=c+"px";b("table:first",i.grid.sDiv).css("width",i.p.tblwidth+"px");}}}}}});},setGridHeight:function(f){return this.each(function(){var j=this;if(j.grid){b(j.grid.bDiv).css({height:f+(isNaN(f)?"":"px")});
j.p.height=f;j.p.scroll&&j.grid.populateVisible();}});},setCaption:function(f){return this.each(function(){this.p.caption=f;b("span.ui-jqgrid-title",this.grid.cDiv).html(f);b(this.grid.cDiv).show();});},setLabel:function(f,j,i,c){return this.each(function(){var e=this,k=-1;if(e.grid){if(isNaN(f)){b(e.p.colModel).each(function(r){if(this.name==f){k=r;
return false;}});}else{k=parseInt(f,10);}if(k>=0){var m=b("tr.ui-jqgrid-labels th:eq("+k+")",e.grid.hDiv);if(j){var a=b(".s-ico",m);b("[id^=jqgh_]",m).empty().html(j).append(a);e.p.colNames[k]=j;}if(i){typeof i==="string"?b(m).addClass(i):b(m).css(i);}typeof c==="object"&&b(m).attr(c);}}});},setCell:function(f,j,i,c,e,k){return this.each(function(){var m=this,a=-1,r,u;
if(m.grid){if(isNaN(j)){b(m.p.colModel).each(function(G){if(this.name==j){a=G;return false;}});}else{a=parseInt(j,10);}if(a>=0){if(r=m.rows.namedItem(f)){var B=b("td:eq("+a+")",r);if(i!==""||k===true){r=m.formatter(f,i,a,r,"edit");u=m.p.colModel[a].title?{title:b.jgrid.stripHtml(r)}:{};m.p.treeGrid&&b(".tree-wrap",b(B)).length>0?b("span",b(B)).html(r).attr(u):b(B).html(r).attr(u);
if(m.p.datatype=="local"){r=m.p.colModel[a];i=r.formatter&&typeof r.formatter==="string"&&r.formatter=="date"?b.unformat.date(i,r):i;u=m.p._index[f];if(typeof u!="undefined"){m.p.data[u][r.name]=i;}}}if(typeof c==="string"){b(B).addClass(c);}else{c&&b(B).css(c);}typeof e==="object"&&b(B).attr(e);}}}});
},getCell:function(f,j){var i=false;this.each(function(){var c=this,e=-1;if(c.grid){if(isNaN(j)){b(c.p.colModel).each(function(a){if(this.name===j){e=a;return false;}});}else{e=parseInt(j,10);}if(e>=0){var k=c.rows.namedItem(f);if(k){try{i=b.unformat(b("td:eq("+e+")",k),{rowId:k.id,colModel:c.p.colModel[e]},e);
}catch(m){i=b.jgrid.htmlDecode(b("td:eq("+e+")",k).html());}}}}});return i;},getCol:function(f,j,i){var c=[],e,k=0;j=typeof j!="boolean"?false:j;if(typeof i=="undefined"){i=false;}this.each(function(){var m=this,a=-1;if(m.grid){if(isNaN(f)){b(m.p.colModel).each(function(G){if(this.name===f){a=G;return false;
}});}else{a=parseInt(f,10);}if(a>=0){var r=m.rows.length,u=0;if(r&&r>0){for(;u<r;){if(b(m.rows[u]).hasClass("jqgrow")){try{e=b.unformat(b(m.rows[u].cells[a]),{rowId:m.rows[u].id,colModel:m.p.colModel[a]},a);}catch(B){e=b.jgrid.htmlDecode(m.rows[u].cells[a].innerHTML);}if(i){k+=parseFloat(e);}else{if(j){c.push({id:m.rows[u].id,value:e});
}else{c[u]=e;}}}u++;}if(i){switch(i.toLowerCase()){case"sum":c=k;break;case"avg":c=k/r;break;case"count":c=r;break;}}}}}});return c;},clearGridData:function(f){return this.each(function(){var j=this;if(j.grid){if(typeof f!="boolean"){f=false;}if(j.p.deepempty){b("#"+j.p.id+" tbody:first tr:gt(0)").remove();
}else{var i=b("#"+j.p.id+" tbody:first tr:first")[0];b("#"+j.p.id+" tbody:first").empty().append(i);}j.p.footerrow&&f&&b(".ui-jqgrid-ftable td",j.grid.sDiv).html("&#160;");j.p.selrow=null;j.p.selarrrow=[];j.p.savedRow=[];j.p.records=0;j.p.page=1;j.p.lastpage=0;j.p.reccount=0;j.p.data=[];j.p_index={};
j.updatepager(true,false);}});},getInd:function(f,j){var i=false,c;this.each(function(){if(c=this.rows.namedItem(f)){i=j===true?c:c.rowIndex;}});return i;}});})(jQuery);(function(b){b.fmatter={};b.extend(b.fmatter,{isBoolean:function(a){return typeof a==="boolean";},isObject:function(a){return a&&(typeof a==="object"||b.isFunction(a))||false;
},isString:function(a){return typeof a==="string";},isNumber:function(a){return typeof a==="number"&&isFinite(a);},isNull:function(a){return a===null;},isUndefined:function(a){return typeof a==="undefined";},isValue:function(a){return this.isObject(a)||this.isString(a)||this.isNumber(a)||this.isBoolean(a);
},isEmpty:function(a){if(!this.isString(a)&&this.isValue(a)){return false;}else{if(!this.isValue(a)){return true;}}a=b.trim(a).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return a==="";}});b.fn.fmatter=function(h,n,a,d,g){var e=n;a=b.extend({},b.jgrid.formatter,a);if(b.fn.fmatter[h]){e=b.fn.fmatter[h](n,a,d,g);
}return e;};b.fmatter.util={NumberFormat:function(f,r){b.fmatter.isNumber(f)||(f*=1);if(b.fmatter.isNumber(f)){var g=f<0,h=f+"",d=r.decimalSeparator?r.decimalSeparator:".";if(b.fmatter.isNumber(r.decimalPlaces)){var a=r.decimalPlaces;h=Math.pow(10,a);h=Math.round(f*h)/h+"";f=h.lastIndexOf(".");if(a>0){if(f<0){h+=d;
f=h.length-1;}else{if(d!=="."){h=h.replace(".",d);}}for(;h.length-1-f<a;){h+="0";}}}if(r.thousandsSeparator){a=r.thousandsSeparator;f=h.lastIndexOf(d);f=f>-1?f:h.length;d=h.substring(f);for(var q=-1,e=f;e>0;e--){q++;if(q%3===0&&e!==f&&(!g||e>1)){d=a+d;}d=h.charAt(e-1)+d;}h=d;}h=r.prefix?r.prefix+h:h;
return h=r.suffix?h+r.suffix:h;}else{return f;}},DateFormat:function(I,J,d,e){var k=function(c,m){c=String(c);for(m=parseInt(m,10)||2;c.length<m;){c="0"+c;}return c;},g={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},f=0,l,n,o=["i18n"];o.i18n={dayNames:e.dayNames,monthNames:e.monthNames};if(I in e.masks){I=e.masks[I];
}if(J.constructor===Number){f=new Date(J);}else{if(J.constructor===Date){f=J;}else{J=J.split(/[\\\/:_;.,\t\T\s-]/);I=I.split(/[\\\/:_;.,\t\T\s-]/);l=0;for(n=I.length;l<n;l++){if(I[l]=="M"){f=b.inArray(J[l],o.i18n.monthNames);if(f!==-1&&f<12){J[l]=f+1;}}if(I[l]=="F"){f=b.inArray(J[l],o.i18n.monthNames);
if(f!==-1&&f>11){J[l]=f+1-12;}}if(J[l]){g[I[l].toLowerCase()]=parseInt(J[l],10);}}if(g.f){g.m=g.f;}if(g.m===0&&g.y===0&&g.d===0){return"&#160;";}g.m=parseInt(g.m,10)-1;f=g.y;if(f>=70&&f<=99){g.y=1900+g.y;}else{if(f>=0&&f<=69){g.y=2000+g.y;}}f=new Date(g.y,g.m,g.d,g.h,g.i,g.s,g.u);}}if(d in e.masks){d=e.masks[d];
}else{d||(d="Y-m-d");}g=f.getHours();I=f.getMinutes();J=f.getDate();l=f.getMonth()+1;n=f.getTimezoneOffset();var q=f.getSeconds(),a=f.getMilliseconds(),t=f.getDay(),h=f.getFullYear(),j=(t+6)%7+1,p=(new Date(h,l-1,J)-new Date(h,0,1))/86400000,s={d:k(J),D:o.i18n.dayNames[t],j:J,l:o.i18n.dayNames[t+7],N:j,S:e.S(J),w:t,z:p,W:j<5?Math.floor((p+j-1)/7)+1:Math.floor((p+j-1)/7)||(((new Date(h-1,0,1)).getDay()+6)%7<4?53:52),F:o.i18n.monthNames[l-1+12],m:k(l),M:o.i18n.monthNames[l-1],n:l,t:"?",L:"?",o:"?",Y:h,y:String(h).substring(2),a:g<12?e.AmPm[0]:e.AmPm[1],A:g<12?e.AmPm[2]:e.AmPm[3],B:"?",g:g%12||12,G:g,h:k(g%12||12),H:k(g),i:k(I),s:k(q),u:a,e:"?",I:"?",O:(n>0?"-":"+")+k(Math.floor(Math.abs(n)/60)*100+Math.abs(n)%60,4),P:"?",T:(String(f).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(f/1000)};
return d.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(c){return c in s?s[c]:c.substring(1);});}};b.fn.fmatter.defaultFormat=function(a,e){return b.fmatter.isValue(a)&&a!==""?a:e.defaultValue?e.defaultValue:"&#160;";};b.fn.fmatter.email=function(a,e){return b.fmatter.isEmpty(a)?b.fn.fmatter.defaultFormat(a,e):'<a href="mailto:'+a+'">'+a+"</a>";
};b.fn.fmatter.checkbox=function(d,g){var a=b.extend({},g.checkbox);b.fmatter.isUndefined(g.colModel.formatoptions)||(a=b.extend({},a,g.colModel.formatoptions));g=a.disabled===true?'disabled="disabled"':"";if(b.fmatter.isEmpty(d)||b.fmatter.isUndefined(d)){d=b.fn.fmatter.defaultFormat(d,a);}d+="";d=d.toLowerCase();
return'<input type="checkbox" '+(d.search(/(false|0|no|off)/i)<0?" checked='checked' ":"")+' value="'+d+'" offval="no" '+g+"/>";};b.fn.fmatter.link=function(e,j){var a={target:j.target},d="";b.fmatter.isUndefined(j.colModel.formatoptions)||(a=b.extend({},a,j.colModel.formatoptions));if(a.target){d="target="+a.target;
}return b.fmatter.isEmpty(e)?b.fn.fmatter.defaultFormat(e,j):"<a "+d+' href="'+e+'">'+e+"</a>";};b.fn.fmatter.showlink=function(e,j){var a={baseLinkUrl:j.baseLinkUrl,showAction:j.showAction,addParam:j.addParam||"",target:j.target,idName:j.idName},d="";b.fmatter.isUndefined(j.colModel.formatoptions)||(a=b.extend({},a,j.colModel.formatoptions));
if(a.target){d="target="+a.target;}a=a.baseLinkUrl+a.showAction+"?"+a.idName+"="+j.rowId+a.addParam;return b.fmatter.isString(e)||b.fmatter.isNumber(e)?"<a "+d+' href="'+a+'">'+e+"</a>":b.fn.fmatter.defaultFormat(e,j);};b.fn.fmatter.integer=function(d,g){var a=b.extend({},g.integer);b.fmatter.isUndefined(g.colModel.formatoptions)||(a=b.extend({},a,g.colModel.formatoptions));
if(b.fmatter.isEmpty(d)){return a.defaultValue;}return b.fmatter.util.NumberFormat(d,a);};b.fn.fmatter.number=function(d,g){var a=b.extend({},g.number);b.fmatter.isUndefined(g.colModel.formatoptions)||(a=b.extend({},a,g.colModel.formatoptions));if(b.fmatter.isEmpty(d)){return a.defaultValue;}return b.fmatter.util.NumberFormat(d,a);
};b.fn.fmatter.currency=function(d,g){var a=b.extend({},g.currency);b.fmatter.isUndefined(g.colModel.formatoptions)||(a=b.extend({},a,g.colModel.formatoptions));if(b.fmatter.isEmpty(d)){return a.defaultValue;}return b.fmatter.util.NumberFormat(d,a);};b.fn.fmatter.date=function(e,j,a,d){a=b.extend({},j.date);
b.fmatter.isUndefined(j.colModel.formatoptions)||(a=b.extend({},a,j.colModel.formatoptions));return !a.reformatAfterEdit&&d=="edit"?b.fn.fmatter.defaultFormat(e,j):b.fmatter.isEmpty(e)?b.fn.fmatter.defaultFormat(e,j):b.fmatter.util.DateFormat(a.srcformat,e,a.newformat,a);};b.fn.fmatter.select=function(u,v){u+="";
var a=false,d=[];if(b.fmatter.isUndefined(v.colModel.formatoptions)){if(!b.fmatter.isUndefined(v.colModel.editoptions)){a=v.colModel.editoptions.value;}}else{a=v.colModel.formatoptions.value;}if(a){var g=v.colModel.editoptions.multiple===true?true:false,f=[],e;if(g){f=u.split(",");f=b.map(f,function(c){return b.trim(c);
});}if(b.fmatter.isString(a)){for(var h=a.split(";"),j=0,k=0;k<h.length;k++){e=h[k].split(":");if(e.length>2){e[1]=jQuery.map(e,function(c,l){if(l>0){return c;}}).join(":");}if(g){if(jQuery.inArray(e[0],f)>-1){d[j]=e[1];j++;}}else{if(b.trim(e[0])==b.trim(u)){d[0]=e[1];break;}}}}else{if(b.fmatter.isObject(a)){if(g){d=jQuery.map(f,function(c){return a[c];
});}else{d[0]=a[u]||"";}}}}u=d.join(", ");return u===""?b.fn.fmatter.defaultFormat(u,v):u;};b.fn.fmatter.rowactions=function(e,j,a,d){switch(a){case"edit":a=function(){b("tr#"+e+" div.ui-inline-edit, tr#"+e+" div.ui-inline-del","#"+j).show();b("tr#"+e+" div.ui-inline-save, tr#"+e+" div.ui-inline-cancel","#"+j).hide();
};b("#"+j).jqGrid("editRow",e,d,null,null,null,{oper:"edit"},a,null,a);b("tr#"+e+" div.ui-inline-edit, tr#"+e+" div.ui-inline-del","#"+j).hide();b("tr#"+e+" div.ui-inline-save, tr#"+e+" div.ui-inline-cancel","#"+j).show();break;case"save":b("#"+j).jqGrid("saveRow",e,null,null);b("tr#"+e+" div.ui-inline-edit, tr#"+e+" div.ui-inline-del","#"+j).show();
b("tr#"+e+" div.ui-inline-save, tr#"+e+" div.ui-inline-cancel","#"+j).hide();break;case"cancel":b("#"+j).jqGrid("restoreRow",e);b("tr#"+e+" div.ui-inline-edit, tr#"+e+" div.ui-inline-del","#"+j).show();b("tr#"+e+" div.ui-inline-save, tr#"+e+" div.ui-inline-cancel","#"+j).hide();break;}};b.fn.fmatter.actions=function(h,l){h={keys:false,editbutton:true,delbutton:true};
b.fmatter.isUndefined(l.colModel.formatoptions)||(h=b.extend(h,l.colModel.formatoptions));var a=l.rowId,d="",e;if(typeof a=="undefined"||b.fmatter.isEmpty(a)){return"";}if(h.editbutton){e="onclick=$.fn.fmatter.rowactions('"+a+"','"+l.gid+"','edit',"+h.keys+");";d=d+"<div style='margin-left:8px;'><div title='"+b.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+e+"><span class='ui-icon ui-icon-pencil'></span></div>";
}if(h.delbutton){e="onclick=jQuery('#"+l.gid+"').jqGrid('delGridRow','"+a+"');";d=d+"<div title='"+b.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+e+"><span class='ui-icon ui-icon-trash'></span></div>";}e="onclick=$.fn.fmatter.rowactions('"+a+"','"+l.gid+"','save',false);";
d=d+"<div title='"+b.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save'><span class='ui-icon ui-icon-disk' "+e+"></span></div>";e="onclick=$.fn.fmatter.rowactions('"+a+"','"+l.gid+"','cancel',false);";return d=d+"<div title='"+b.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel'><span class='ui-icon ui-icon-cancel' "+e+"></span></div></div>";
};b.unformat=function(a,d,e,f){var j,h=d.colModel.formatter,g=d.colModel.formatoptions||{},s=/([\.\*\_\'\(\)\{\}\+\?\\])/g,t=d.colModel.unformat||b.fn.fmatter[h]&&b.fn.fmatter[h].unformat;if(typeof t!=="undefined"&&b.isFunction(t)){j=t(b(a).text(),d,a);}else{if(!b.fmatter.isUndefined(h)&&b.fmatter.isString(h)){j=b.jgrid.formatter||{};
switch(h){case"integer":g=b.extend({},j.integer,g);d=g.thousandsSeparator.replace(s,"\\$1");d=new RegExp(d,"g");j=b(a).text().replace(d,"");break;case"number":g=b.extend({},j.number,g);d=g.thousandsSeparator.replace(s,"\\$1");d=new RegExp(d,"g");j=b(a).text().replace(d,"").replace(g.decimalSeparator,".");
break;case"currency":g=b.extend({},j.currency,g);d=g.thousandsSeparator.replace(s,"\\$1");d=new RegExp(d,"g");j=b(a).text().replace(d,"").replace(g.decimalSeparator,".").replace(g.prefix,"").replace(g.suffix,"");break;case"checkbox":g=d.colModel.editoptions?d.colModel.editoptions.value.split(":"):["Yes","No"];
j=b("input",a).attr("checked")?g[0]:g[1];break;case"select":j=b.unformat.select(a,d,e,f);break;case"actions":return"";default:j=b(a).text();}}}return j?j:f===true?b(a).text():b.jgrid.htmlDecode(b(a).html());};b.unformat.select=function(a,d,e,f){e=[];a=b(a).text();if(f===true){return a;}d=b.extend({},d.colModel.editoptions);
if(d.value){var j=d.value;d=d.multiple===true?true:false;f=[];var h;if(d){f=a.split(",");f=b.map(f,function(c){return b.trim(c);});}if(b.fmatter.isString(j)){for(var g=j.split(";"),s=0,t=0;t<g.length;t++){h=g[t].split(":");if(h.length>2){h[1]=jQuery.map(h,function(k,c){if(c>0){return k;}}).join(":");
}if(d){if(jQuery.inArray(h[1],f)>-1){e[s]=h[0];s++;}}else{if(b.trim(h[1])==b.trim(a)){e[0]=h[0];break;}}}}else{if(b.fmatter.isObject(j)||b.isArray(j)){d||(f[0]=a);e=jQuery.map(f,function(k){var c;b.each(j,function(m,l){if(l==k){c=m;return false;}});if(typeof c!="undefined"){return c;}});}}return e.join(", ");
}else{return a||"";}};b.unformat.date=function(d,g){var a=b.jgrid.formatter.date||{};b.fmatter.isUndefined(g.formatoptions)||(a=b.extend({},a,g.formatoptions));return b.fmatter.isEmpty(d)?b.fn.fmatter.defaultFormat(d,g):b.fmatter.util.DateFormat(a.newformat,d,a.srcformat,a);};})(jQuery);(function(a){a.jgrid.extend({getColProp:function(f){var d={},h=this[0];
if(h.grid){h=h.p.colModel;for(var b=0;b<h.length;b++){if(h[b].name==f){d=h[b];break;}}return d;}},setColProp:function(b,d){return this.each(function(){if(this.grid){if(d){for(var c=this.p.colModel,f=0;f<c.length;f++){if(c[f].name==b){a.extend(this.p.colModel[f],d);break;}}}}});},sortGrid:function(f,d,b){return this.each(function(){var h=this,e=-1;
if(h.grid){if(!f){f=h.p.sortname;}for(var c=0;c<h.p.colModel.length;c++){if(h.p.colModel[c].index==f||h.p.colModel[c].name==f){e=c;break;}}if(e!=-1){c=h.p.colModel[e].sortable;if(typeof c!=="boolean"){c=true;}if(typeof d!=="boolean"){d=false;}c&&h.sortData("jqgh_"+f,e,d,b);}}});},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&a(this.p.pager).remove();
var b=this.id;try{a("#gbox_"+b).remove();}catch(d){}}});},GridUnload:function(){return this.each(function(){if(this.grid){var b={id:a(this).attr("id"),cl:a(this).attr("class")};this.p.pager&&a(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");var d=document.createElement("table");
a(d).attr({id:b.id});d.className=b.cl;b=this.id;a(d).removeClass("ui-jqgrid-btable");if(a(this.p.pager).parents("#gbox_"+b).length===1){a(d).insertBefore("#gbox_"+b).show();a(this.p.pager).insertBefore("#gbox_"+b);}else{a(d).insertBefore("#gbox_"+b).show();}a("#gbox_"+b).remove();}});},setGridState:function(b){return this.each(function(){if(this.grid){var d=this;
if(b=="hidden"){a(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+d.p.id).slideUp("fast");d.p.pager&&a(d.p.pager).slideUp("fast");d.p.toppager&&a(d.p.toppager).slideUp("fast");if(d.p.toolbar[0]===true){d.p.toolbar[1]=="both"&&a(d.grid.ubDiv).slideUp("fast");a(d.grid.uDiv).slideUp("fast");}d.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+d.p.id).slideUp("fast");
a(".ui-jqgrid-titlebar-close span",d.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");d.p.gridstate="hidden";}else{if(b=="visible"){a(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+d.p.id).slideDown("fast");d.p.pager&&a(d.p.pager).slideDown("fast");d.p.toppager&&a(d.p.toppager).slideDown("fast");
if(d.p.toolbar[0]===true){d.p.toolbar[1]=="both"&&a(d.grid.ubDiv).slideDown("fast");a(d.grid.uDiv).slideDown("fast");}d.p.footerrow&&a(".ui-jqgrid-sdiv","#gbox_"+d.p.id).slideDown("fast");a(".ui-jqgrid-titlebar-close span",d.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");
d.p.gridstate="visible";}}}});},updateGridRows:function(f,d,m){var b,l=false,k;this.each(function(){var g=this,h,c,j,e;if(!g.grid){return false;}d||(d="id");f&&f.length>0&&a(f).each(function(){j=this;if(c=g.rows.namedItem(j[d])){e=j[d];if(m===true){if(g.p.jsonReader.repeatitems===true){if(g.p.jsonReader.cell){j=j[g.p.jsonReader.cell];
}for(var n=0;n<j.length;n++){h=g.formatter(e,j[n],n,j,"edit");k=g.p.colModel[n].title?{title:a.jgrid.stripHtml(h)}:{};g.p.treeGrid===true&&b==g.p.ExpandColumn?a("td:eq("+n+") > span:first",c).html(h).attr(k):a("td:eq("+n+")",c).html(h).attr(k);}return l=true;}}a(g.p.colModel).each(function(p){b=m===true?this.jsonmap||this.name:this.name;
if(j[b]!==undefined){h=g.formatter(e,j[b],p,j,"edit");k=this.title?{title:a.jgrid.stripHtml(h)}:{};g.p.treeGrid===true&&b==g.p.ExpandColumn?a("td:eq("+p+") > span:first",c).html(h).attr(k):a("td:eq("+p+")",c).html(h).attr(k);l=true;}});}});});return l;},filterGrid:function(b,d){d=a.extend({gridModel:false,gridNames:false,gridToolbar:false,filterModel:[],formtype:"horizontal",autosearch:true,formclass:"filterform",tableclass:"filtertable",buttonclass:"filterbutton",searchButton:"Search",clearButton:"Clear",enableSearch:false,enableClear:false,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,url:"",marksearched:true},d||{});
return this.each(function(){var q=this;this.p=d;if(this.p.filterModel.length===0&&this.p.gridModel===false){alert("No filter is set");}else{if(b){this.p.gridid=b.indexOf("#")!=-1?b:"#"+b;var r=a(this.p.gridid).jqGrid("getGridParam","colModel");if(r){if(this.p.gridModel===true){var k=a(this.p.gridid)[0],c;
a.each(r,function(f){var e=[];this.search=this.search===false?false:true;c=this.editrules&&this.editrules.searchhidden===true?true:this.hidden===true?false:true;if(this.search===true&&c===true){e.label=q.p.gridNames===true?k.p.colNames[f]:"";e.name=this.name;e.index=this.index||this.name;e.stype=this.edittype||"text";
if(e.stype!="select"){e.stype="text";}e.defval=this.defval||"";e.surl=this.surl||"";e.sopt=this.editoptions||{};e.width=this.width;q.p.filterModel.push(e);}});}else{a.each(q.p.filterModel,function(){for(var e=0;e<r.length;e++){if(this.name==r[e].name){this.index=r[e].index||this.name;break;}}if(!this.index){this.index=this.name;
}});}var h=function(){var p={},l=0,j,e=a(q.p.gridid)[0],f;e.p.searchdata={};a.isFunction(q.p.beforeSearch)&&q.p.beforeSearch();a.each(q.p.filterModel,function(){f=this.index;switch(this.stype){case"select":if(j=a("select[name="+f+"]",q).val()){p[f]=j;q.p.marksearched&&a("#jqgh_"+this.name,e.grid.hDiv).addClass("dirty-cell");
l++;}else{q.p.marksearched&&a("#jqgh_"+this.name,e.grid.hDiv).removeClass("dirty-cell");try{delete e.p.postData[this.index];}catch(v){}}break;default:if(j=a("input[name="+f+"]",q).val()){p[f]=j;q.p.marksearched&&a("#jqgh_"+this.name,e.grid.hDiv).addClass("dirty-cell");l++;}else{q.p.marksearched&&a("#jqgh_"+this.name,e.grid.hDiv).removeClass("dirty-cell");
try{delete e.p.postData[this.index];}catch(w){}}}});var n=l>0?true:false;a.extend(e.p.postData,p);var g;if(q.p.url){g=a(e).jqGrid("getGridParam","url");a(e).jqGrid("setGridParam",{url:q.p.url});}a(e).jqGrid("setGridParam",{search:n}).trigger("reloadGrid",[{page:1}]);g&&a(e).jqGrid("setGridParam",{url:g});
a.isFunction(q.p.afterSearch)&&q.p.afterSearch();},m=function(){var p={},l,j=0,e=a(q.p.gridid)[0],f;a.isFunction(q.p.beforeClear)&&q.p.beforeClear();a.each(q.p.filterModel,function(){f=this.index;l=this.defval?this.defval:"";if(!this.stype){this.stype="text";}switch(this.stype){case"select":var u;a("select[name="+f+"] option",q).each(function(t){if(t===0){this.selected=true;
}if(a(this).text()==l){this.selected=true;u=a(this).val();return false;}});if(u){p[f]=u;q.p.marksearched&&a("#jqgh_"+this.name,e.grid.hDiv).addClass("dirty-cell");j++;}else{q.p.marksearched&&a("#jqgh_"+this.name,e.grid.hDiv).removeClass("dirty-cell");try{delete e.p.postData[this.index];}catch(x){}}break;
case"text":a("input[name="+f+"]",q).val(l);if(l){p[f]=l;q.p.marksearched&&a("#jqgh_"+this.name,e.grid.hDiv).addClass("dirty-cell");j++;}else{q.p.marksearched&&a("#jqgh_"+this.name,e.grid.hDiv).removeClass("dirty-cell");try{delete e.p.postData[this.index];}catch(y){}}break;}});var n=j>0?true:false;a.extend(e.p.postData,p);
var g;if(q.p.url){g=a(e).jqGrid("getGridParam","url");a(e).jqGrid("setGridParam",{url:q.p.url});}a(e).jqGrid("setGridParam",{search:n}).trigger("reloadGrid",[{page:1}]);g&&a(e).jqGrid("setGridParam",{url:g});a.isFunction(q.p.afterClear)&&q.p.afterClear();},s,o=a("<form name='SearchForm' style=display:inline;' class='"+this.p.formclass+"'></form>");
s=a("<table class='"+this.p.tableclass+"' cellspacing='0' cellpading='0' border='0'><tbody></tbody></table>");a(o).append(s);(function(){var e=document.createElement("tr"),l,j,f,g;q.p.formtype=="horizontal"&&a(s).append(e);a.each(q.p.filterModel,function(p){f=document.createElement("td");a(f).append("<label for='"+this.name+"'>"+this.label+"</label>");
g=document.createElement("td");var v=this;if(!this.stype){this.stype="text";}switch(this.stype){case"select":if(this.surl){a(g).load(this.surl,function(){v.defval&&a("select",this).val(v.defval);a("select",this).attr({name:v.index||v.name,id:"sg_"+v.name});v.sopt&&a("select",this).attr(v.sopt);q.p.gridToolbar===true&&v.width&&a("select",this).width(v.width);
q.p.autosearch===true&&a("select",this).change(function(){h();return false;});});}else{if(v.sopt.value){var B=v.sopt.value,C=document.createElement("select");a(C).attr({name:v.index||v.name,id:"sg_"+v.name}).attr(v.sopt);var n;if(typeof B==="string"){p=B.split(";");for(var u=0;u<p.length;u++){B=p[u].split(":");
n=document.createElement("option");n.value=B[0];n.innerHTML=B[1];if(B[1]==v.defval){n.selected="selected";}C.appendChild(n);}}else{if(typeof B==="object"){for(u in B){if(B.hasOwnProperty(u)){p++;n=document.createElement("option");n.value=u;n.innerHTML=B[u];if(B[u]==v.defval){n.selected="selected";}C.appendChild(n);
}}}}q.p.gridToolbar===true&&v.width&&a(C).width(v.width);a(g).append(C);q.p.autosearch===true&&a(C).change(function(){h();return false;});}}break;case"text":C=this.defval?this.defval:"";a(g).append("<input type='text' name='"+(this.index||this.name)+"' id='sg_"+this.name+"' value='"+C+"'/>");v.sopt&&a("input",g).attr(v.sopt);
if(q.p.gridToolbar===true&&v.width){a.browser.msie?a("input",g).width(v.width-4):a("input",g).width(v.width-2);}q.p.autosearch===true&&a("input",g).keypress(function(t){if((t.charCode?t.charCode:t.keyCode?t.keyCode:0)==13){h();return false;}return this;});break;}if(q.p.formtype=="horizontal"){q.p.gridToolbar===true&&q.p.gridNames===false?a(e).append(g):a(e).append(f).append(g);
a(e).append(g);}else{l=document.createElement("tr");a(l).append(f).append(g);a(s).append(l);}});g=document.createElement("td");if(q.p.enableSearch===true){j="<input type='button' id='sButton' class='"+q.p.buttonclass+"' value='"+q.p.searchButton+"'/>";a(g).append(j);a("input#sButton",g).click(function(){h();
return false;});}if(q.p.enableClear===true){j="<input type='button' id='cButton' class='"+q.p.buttonclass+"' value='"+q.p.clearButton+"'/>";a(g).append(j);a("input#cButton",g).click(function(){m();return false;});}if(q.p.enableClear===true||q.p.enableSearch===true){if(q.p.formtype=="horizontal"){a(e).append(g);
}else{l=document.createElement("tr");a(l).append("<td>&#160;</td>").append(g);a(s).append(l);}}})();a(this).append(o);this.triggerSearch=h;this.clearSearch=m;}else{alert("Could not get grid colModel");}}else{alert("No target grid is set!");}}});},filterToolbar:function(b){b=a.extend({autosearch:true,searchOnEnter:true,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:false,groupOp:"AND",defaultSearch:"bw"},b||{});
return this.each(function(){function d(e,f){var c=a(e);c[0]&&jQuery.each(f,function(){this.data!==undefined?c.bind(this.type,this.data,this.fn):c.bind(this.type,this.fn);});}var l=this,m=function(){var p={},B=0,f,h,o={},n;a.each(l.p.colModel,function(){h=this.index||this.name;switch(this.stype){case"select":n=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"eq";
if(f=a("select[name="+h+"]",l.grid.hDiv).val()){p[h]=f;o[h]=n;B++;}else{try{delete l.p.postData[h];}catch(q){}}break;case"text":n=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:b.defaultSearch;if(f=a("input[name="+h+"]",l.grid.hDiv).val()){p[h]=f;o[h]=n;B++;}else{try{delete l.p.postData[h];
}catch(r){}}break;}});var e=B>0?true:false;if(b.stringResult===true||l.p.datatype=="local"){var z='{"groupOp":"'+b.groupOp+'","rules":[',A=0;a.each(p,function(q,r){if(A>0){z+=",";}z+='{"field":"'+q+'",';z+='"op":"'+o[q]+'",';z+='"data":"'+r+'"}';A++;});z+="]}";a.extend(l.p.postData,{filters:z});}else{a.extend(l.p.postData,p);
}var g;if(l.p.searchurl){g=l.p.url;a(l).jqGrid("setGridParam",{url:l.p.searchurl});}var c=false;if(a.isFunction(b.beforeSearch)){c=b.beforeSearch.call(l);}c||a(l).jqGrid("setGridParam",{search:e}).trigger("reloadGrid",[{page:1}]);g&&a(l).jqGrid("setGridParam",{url:g});a.isFunction(b.afterSearch)&&b.afterSearch();
},k=a("<tr class='ui-search-toolbar' role='rowheader'></tr>"),j;a.each(l.p.colModel,function(){var c=this,g,n,o,w;n=a("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+l.p.direction+"'></th>");g=a("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'></div>");
this.hidden===true&&a(n).css("display","none");this.search=this.search===false?false:true;if(typeof this.stype=="undefined"){this.stype="text";}o=a.extend({},this.searchoptions||{});if(this.search){switch(this.stype){case"select":if(w=this.surl||o.dataUrl){a.ajax(a.extend({url:w,dataType:"html",complete:function(p){if(o.buildSelect!==undefined){(p=o.buildSelect(p))&&a(g).append(p);
}else{a(g).append(p.responseText);}o.defaultValue&&a("select",g).val(o.defaultValue);a("select",g).attr({name:c.index||c.name,id:"gs_"+c.name});o.attr&&a("select",g).attr(o.attr);a("select",g).css({width:"100%"});o.dataInit!==undefined&&o.dataInit(a("select",g)[0]);o.dataEvents!==undefined&&d(a("select",g)[0],o.dataEvents);
b.autosearch===true&&a("select",g).change(function(){m();return false;});p=null;}},a.jgrid.ajaxOptions,l.p.ajaxSelectOptions||{}));}else{var v;if(c.searchoptions&&c.searchoptions.value){v=c.searchoptions.value;}else{if(c.editoptions&&c.editoptions.value){v=c.editoptions.value;}}if(v){w=document.createElement("select");
w.style.width="100%";a(w).attr({name:c.index||c.name,id:"gs_"+c.name});var h,e;if(typeof v==="string"){v=v.split(";");for(var f=0;f<v.length;f++){h=v[f].split(":");e=document.createElement("option");e.value=h[0];e.innerHTML=h[1];w.appendChild(e);}}else{if(typeof v==="object"){for(h in v){if(v.hasOwnProperty(h)){e=document.createElement("option");
e.value=h;e.innerHTML=v[h];w.appendChild(e);}}}}o.defaultValue&&a(w).val(o.defaultValue);o.attr&&a(w).attr(o.attr);o.dataInit!==undefined&&o.dataInit(w);o.dataEvents!==undefined&&d(w,o.dataEvents);a(g).append(w);b.autosearch===true&&a(w).change(function(){m();return false;});}}break;case"text":w=o.defaultValue?o.defaultValue:"";
a(g).append("<input type='text' class='dojoValidateValid' style='width:95%;background: none repeat scroll 0 0 white !important;height: 16px;padding: 0 0 0 2px;' name='"+(c.index||c.name)+"' id='gs_"+c.name+"' value='"+w+"'/>");o.attr&&a("input",g).attr(o.attr);o.dataInit!==undefined&&o.dataInit(a("input",g)[0]);o.dataEvents!==undefined&&d(a("input",g)[0],o.dataEvents);if(b.autosearch===true){b.searchOnEnter?a("input",g).keypress(function(p){if((p.charCode?p.charCode:p.keyCode?p.keyCode:0)==13){m();
return false;}return this;}):a("input",g).keydown(function(p){switch(p.which){case 13:return false;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:j&&clearTimeout(j);j=setTimeout(function(){m();},500);}});}break;}}a(n).append(g);a(k).append(n);});a("table thead",l.grid.hDiv).append(k);
this.triggerToolbar=m;this.clearToolbar=function(x){var e={},g,n=0,p;x=typeof x!="boolean"?true:x;a.each(l.p.colModel,function(){g=this.searchoptions&&this.searchoptions.defaultValue?this.searchoptions.defaultValue:"";p=this.index||this.name;switch(this.stype){case"select":var r;a("select[name="+p+"] option",l.grid.hDiv).each(function(t){if(t===0){this.selected=true;
}if(a(this).text()==g){this.selected=true;r=a(this).val();return false;}});if(r){e[p]=r;n++;}else{try{delete l.p.postData[p];}catch(s){}}break;case"text":a("input[name="+p+"]",l.grid.hDiv).val(g);if(g){e[p]=g;n++;}else{try{delete l.p.postData[p];}catch(q){}}break;}});var o=n>0?true:false;if(b.stringResult===true||l.p.datatype=="local"){var f='{"groupOp":"'+b.groupOp+'","rules":[',y=0;
a.each(e,function(r,q){if(y>0){f+=",";}f+='{"field":"'+r+'",';f+='"op":"eq",';f+='"data":"'+q+'"}';y++;});f+="]}";a.extend(l.p.postData,{filters:f});}else{a.extend(l.p.postData,e);}var c;if(l.p.searchurl){c=l.p.url;a(l).jqGrid("setGridParam",{url:l.p.searchurl});}var h=false;if(a.isFunction(b.beforeClear)){h=b.beforeClear.call(l);
}h||x&&a(l).jqGrid("setGridParam",{search:o}).trigger("reloadGrid",[{page:1}]);c&&a(l).jqGrid("setGridParam",{url:c});a.isFunction(b.afterClear)&&b.afterClear();};this.toggleToolbar=function(){var c=a("tr.ui-search-toolbar",l.grid.hDiv);c.css("display")=="none"?c.show():c.hide();};});}});})(jQuery);var showModal=function(a){a.w.show();
},closeModal=function(a){a.w.hide().attr("aria-hidden","true");a.o&&a.o.remove();},hideModal=function(c,e){e=jQuery.extend({jqm:true,gb:""},e||{});if(e.onClose){var a=e.onClose(c);if(typeof a=="boolean"&&!a){return;}}if(jQuery.fn.jqm&&e.jqm===true){jQuery(c).attr("aria-hidden","true").jqmHide();}else{if(e.gb!==""){try{jQuery(".jqgrid-overlay:first",e.gb).hide();
}catch(b){}}jQuery(c).hide().attr("aria-hidden","true");}};function findPos(b){var c=0,a=0;if(b.offsetParent){do{c+=b.offsetLeft;a+=b.offsetTop;}while(b=b.offsetParent);}return[c,a];}var createModal=function(f,g,h,l,o,q){var j=document.createElement("div"),A;A=jQuery(h.gbox).attr("dir")=="rtl"?true:false;
j.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";j.id=f.themodal;var a=document.createElement("div");a.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";a.id=f.modalhead;jQuery(a).append("<span class='ui-jqdialog-title'>"+h.caption+"</span>");var b=jQuery("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){b.addClass("ui-state-hover");
},function(){b.removeClass("ui-state-hover");}).append("<span class='ui-icon ui-icon-closethick'></span>");jQuery(a).append(b);if(A){j.dir="rtl";jQuery(".ui-jqdialog-title",a).css("float","right");jQuery(".ui-jqdialog-titlebar-close",a).css("left","0.3em");}else{j.dir="ltr";jQuery(".ui-jqdialog-title",a).css("float","left");
jQuery(".ui-jqdialog-titlebar-close",a).css("right","0.3em");}var c=document.createElement("div");jQuery(c).addClass("ui-jqdialog-content ui-widget-content").attr("id",f.modalcontent);jQuery(c).append(g);j.appendChild(c);jQuery(j).prepend(a);q===true?jQuery("body").append(j):jQuery(j).insertBefore(l);
if(typeof h.jqModal==="undefined"){h.jqModal=true;}g={};if(jQuery.fn.jqm&&h.jqModal===true){if(h.left===0&&h.top===0){l=[];l=findPos(o);h.left=l[0]+4;h.top=l[1]+4;}g.top=h.top+"px";g.left=h.left;}else{if(h.left!==0||h.top!==0){g.left=h.left;g.top=h.top+"px";}}jQuery("a.ui-jqdialog-titlebar-close",a).click(function(){var k=jQuery("#"+f.themodal).data("onClose")||h.onClose,m=jQuery("#"+f.themodal).data("gbox")||h.gbox;
hideModal("#"+f.themodal,{gb:m,jqm:h.jqModal,onClose:k});return false;});if(h.width===0||!h.width){h.width=300;}if(h.height===0||!h.height){h.height=200;}if(!h.zIndex){h.zIndex=950;}o=0;if(A&&g.left&&!q){o=jQuery(h.gbox).width()-(!isNaN(h.width)?parseInt(h.width,10):0)-8;g.left=parseInt(g.left,10)+parseInt(o,10);
}if(g.left){g.left+="px";}jQuery(j).css(jQuery.extend({width:isNaN(h.width)?"auto":h.width+"px",height:isNaN(h.height)?"auto":h.height+"px",zIndex:h.zIndex,overflow:"hidden"},g)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":f.modalhead,"aria-hidden":"true"});if(typeof h.drag=="undefined"){h.drag=true;
}if(typeof h.resize=="undefined"){h.resize=true;}if(h.drag){jQuery(a).css("cursor","move");if(jQuery.fn.jqDrag){jQuery(j).jqDrag(a);}else{try{jQuery(j).draggable({handle:jQuery("#"+a.id)});}catch(e){}}}if(h.resize){if(jQuery.fn.jqResize){jQuery(j).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>");
jQuery("#"+f.themodal).jqResize(".jqResize",f.scrollelm?"#"+f.scrollelm:false);}else{try{jQuery(j).resizable({handles:"se, sw",alsoResize:f.scrollelm?"#"+f.scrollelm:false});}catch(d){}}}h.closeOnEscape===true&&jQuery(j).keydown(function(k){if(k.which==27){k=jQuery("#"+f.themodal).data("onClose")||h.onClose;
hideModal(this,{gb:h.gbox,jqm:h.jqModal,onClose:k});}});},viewModal=function(b,c){c=jQuery.extend({toTop:true,overlay:10,modal:false,onShow:showModal,onHide:closeModal,gbox:"",jqm:true,jqM:true},c||{});if(jQuery.fn.jqm&&c.jqm===true){c.jqM?jQuery(b).attr("aria-hidden","false").jqm(c).jqmShow():jQuery(b).attr("aria-hidden","false").jqmShow();
}else{if(c.gbox!==""){jQuery(".jqgrid-overlay:first",c.gbox).show();jQuery(b).data("gbox",c.gbox);}jQuery(b).show().attr("aria-hidden","false");try{jQuery(":input:visible",b)[0].focus();}catch(a){}}};function info_dialog(a,b,c,e){var f={width:290,height:"auto",dataheight:"auto",drag:true,resize:false,caption:"<b>"+a+"</b>",left:250,top:170,zIndex:1000,jqModal:true,modal:false,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]};
jQuery.extend(f,e||{});var g=f.jqModal;if(jQuery.fn.jqm&&!g){g=false;}a="";if(f.buttons.length>0){for(e=0;e<f.buttons.length;e++){if(typeof f.buttons[e].id=="undefined"){f.buttons[e].id="info_button_"+e;}a+="<a href='javascript:void(0)' id='"+f.buttons[e].id+"' class='fm-button ui-state-default ui-corner-all'>"+f.buttons[e].text+"</a>";
}}e=isNaN(f.dataheight)?f.dataheight:f.dataheight+"px";var d="<div id='info_id'>";d+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+e+";"+("text-align:"+f.align+";")+"'>"+b+"</div>";d+=c?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+c+"</a>"+a+"</div>":a!==""?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+f.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+a+"</div>":"";
d+="</div>";try{jQuery("#info_dialog").attr("aria-hidden")=="false"&&hideModal("#info_dialog",{jqm:g});jQuery("#info_dialog").remove();}catch(h){}createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},d,f,"","",true);a&&jQuery.each(f.buttons,function(j){jQuery("#"+this.id,"#info_id").bind("click",function(){f.buttons[j].onClick.call(jQuery("#info_dialog"));
return false;});});jQuery("#closedialog","#info_id").click(function(j){hideModal("#info_dialog",{jqm:g});return false;});jQuery(".fm-button","#info_dialog").hover(function(){jQuery(this).addClass("ui-state-hover");},function(){jQuery(this).removeClass("ui-state-hover");});jQuery.isFunction(f.beforeOpen)&&f.beforeOpen();
viewModal("#info_dialog",{onHide:function(j){j.w.hide().remove();j.o&&j.o.remove();},modal:f.modal,jqm:g});jQuery.isFunction(f.afterOpen)&&f.afterOpen();try{jQuery("#info_dialog").focus();}catch(s){}}function createEl(c,d,g,j,l){function n(k,m){if(jQuery.isFunction(m.dataInit)){k.id=m.id;m.dataInit(k);
delete m.id;delete m.dataInit;}if(m.dataEvents){jQuery.each(m.dataEvents,function(){this.data!==undefined?jQuery(k).bind(this.type,this.data,this.fn):jQuery(k).bind(this.type,this.fn);});delete m.dataEvents;}return m;}var h="";d.defaultValue&&delete d.defaultValue;switch(c){case"textarea":h=document.createElement("textarea");
if(j){d.cols||jQuery(h).css({width:"98%"});}else{if(!d.cols){d.cols=20;}}if(!d.rows){d.rows=2;}if(g=="&nbsp;"||g=="&#160;"||g.length==1&&g.charCodeAt(0)==160){g="";}h.value=g;d=n(h,d);jQuery(h).attr(d).attr({role:"textbox",multiline:"true"});break;case"checkbox":h=document.createElement("input");h.type="checkbox";
if(d.value){var o=d.value.split(":");if(g===o[0]){h.checked=true;h.defaultChecked=true;}h.value=o[0];jQuery(h).attr("offval",o[1]);try{delete d.value;}catch(q){}}else{o=g.toLowerCase();if(o.search(/(false|0|no|off|undefined)/i)<0&&o!==""){h.checked=true;h.defaultChecked=true;h.value=g;}else{h.value="on";
}jQuery(h).attr("offval","off");}d=n(h,d);jQuery(h).attr(d).attr("role","checkbox");break;case"select":h=document.createElement("select");h.setAttribute("role","select");var C,a=[];if(d.multiple===true){C=true;h.multiple="multiple";jQuery(h).attr("aria-multiselectable","true");}else{C=false;}if(typeof d.dataUrl!="undefined"){jQuery.ajax(jQuery.extend({url:d.dataUrl,type:"GET",dataType:"html",success:function(k,m){try{delete d.dataUrl;
delete d.value;}catch(p){}if(typeof d.buildSelect!="undefined"){k=d.buildSelect(k);k=jQuery(k).html();delete d.buildSelect;}else{k=jQuery(k).html();}if(k){jQuery(h).append(k);d=n(h,d);if(typeof d.size==="undefined"){d.size=C?3:1;}if(C){a=g.split(",");a=jQuery.map(a,function(r){return jQuery.trim(r);});
}else{a[0]=jQuery.trim(g);}jQuery(h).attr(d);setTimeout(function(){jQuery("option",h).each(function(r){if(r===0){this.selected="";}jQuery(this).attr("role","option");if(jQuery.inArray(jQuery.trim(jQuery(this).text()),a)>-1||jQuery.inArray(jQuery.trim(jQuery(this).val()),a)>-1){this.selected="selected";
if(!C){return false;}}});},0);}}},l||{}));}else{if(d.value){if(C){a=g.split(",");a=jQuery.map(a,function(k){return jQuery.trim(k);});if(typeof d.size==="undefined"){d.size=3;}}else{d.size=1;}if(typeof d.value==="function"){d.value=d.value();}if(typeof d.value==="string"){j=d.value.split(";");for(o=0;
o<j.length;o++){l=j[o].split(":");if(l.length>2){l[1]=jQuery.map(l,function(k,m){if(m>0){return k;}}).join(":");}c=document.createElement("option");c.setAttribute("role","option");c.value=l[0];c.innerHTML=l[1];if(!C&&(jQuery.trim(l[0])==jQuery.trim(g)||jQuery.trim(l[1])==jQuery.trim(g))){c.selected="selected";
}if(C&&(jQuery.inArray(jQuery.trim(l[1]),a)>-1||jQuery.inArray(jQuery.trim(l[0]),a)>-1)){c.selected="selected";}h.appendChild(c);}}else{if(typeof d.value==="object"){j=d.value;for(o in j){if(j.hasOwnProperty(o)){c=document.createElement("option");c.setAttribute("role","option");c.value=o;c.innerHTML=j[o];
if(!C&&(jQuery.trim(o)==jQuery.trim(g)||jQuery.trim(j[o])==jQuery.trim(g))){c.selected="selected";}if(C&&(jQuery.inArray(jQuery.trim(j[o]),a)>-1||jQuery.inArray(jQuery.trim(o),a)>-1)){c.selected="selected";}h.appendChild(c);}}}}d=n(h,d);try{delete d.value;}catch(f){}jQuery(h).attr(d);}}break;case"text":case"password":case"button":o=c=="button"?"button":"textbox";
h=document.createElement("input");h.type=c;h.value=g;d=n(h,d);if(c!="button"){if(j){d.size||jQuery(h).css({width:"98%"});}else{if(!d.size){d.size=20;}}}jQuery(h).attr(d).attr("role",o);break;case"image":case"file":h=document.createElement("input");h.type=c;d=n(h,d);jQuery(h).attr(d);break;case"custom":h=document.createElement("span");
try{if(jQuery.isFunction(d.custom_element)){var e=d.custom_element.call(this,g,d);if(e){e=jQuery(e).addClass("customelement").attr({id:d.id,name:d.name});jQuery(h).empty().append(e);}else{throw"e2";}}else{throw"e1";}}catch(b){b=="e1"&&info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_element' "+jQuery.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);
b=="e2"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_element' "+jQuery.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,typeof b==="string"?b:b.message,jQuery.jgrid.edit.bClose);}break;}return h;}function daysInFebruary(a){return a%4===0&&(a%100!==0||a%400===0)?29:28;
}function DaysArray(a){for(var b=1;b<=a;b++){this[b]=31;if(b==4||b==6||b==9||b==11){this[b]=30;}if(b==2){this[b]=29;}}return this;}function checkDate(a,b){var c={},e;a=a.toLowerCase();e=a.indexOf("/")!=-1?"/":a.indexOf("-")!=-1?"-":a.indexOf(".")!=-1?".":"/";a=a.split(e);b=b.split(e);if(b.length!=3){return false;
}e=-1;for(var f,g=-1,d=-1,h=0;h<a.length;h++){f=isNaN(b[h])?0:parseInt(b[h],10);c[a[h]]=f;f=a[h];if(f.indexOf("y")!=-1){e=h;}if(f.indexOf("m")!=-1){d=h;}if(f.indexOf("d")!=-1){g=h;}}f=a[e]=="y"||a[e]=="yyyy"?4:a[e]=="yy"?2:-1;h=DaysArray(12);var s;if(e===-1){return false;}else{s=c[a[e]].toString();if(f==2&&s.length==1){f=1;
}if(s.length!=f||c[a[e]]===0&&b[e]!="00"){return false;}}if(d===-1){return false;}else{s=c[a[d]].toString();if(s.length<1||c[a[d]]<1||c[a[d]]>12){return false;}}if(g===-1){return false;}else{s=c[a[g]].toString();if(s.length<1||c[a[g]]<1||c[a[g]]>31||c[a[d]]==2&&c[a[g]]>daysInFebruary(c[a[e]])||c[a[g]]>h[c[a[d]]]){return false;
}}return true;}function isEmpty(a){return a.match(/^\s+$/)||a===""?true:false;}function checkTime(a){var b=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!isEmpty(a)){if(a=a.match(b)){if(a[3]){if(a[1]<1||a[1]>12){return false;}}else{if(a[1]>23){return false;}}if(a[2]>59){return false;}}else{return false;}}return true;
}function checkValues(c,d,e){var g,h,a,f;if(typeof d=="string"){h=0;for(f=e.p.colModel.length;h<f;h++){if(e.p.colModel[h].name==d){g=e.p.colModel[h].editrules;d=h;try{a=e.p.colModel[h].formoptions.label;}catch(b){}break;}}}else{if(d>=0){g=e.p.colModel[d].editrules;}}if(g){a||(a=e.p.colNames[d]);if(g.required===true){if(isEmpty(c)){return[false,a+": "+jQuery.jgrid.edit.msg.required,""];
}}h=g.required===false?false:true;if(g.number===true){if(!(h===false&&isEmpty(c))){if(isNaN(c)){return[false,a+": "+jQuery.jgrid.edit.msg.number,""];}}}if(typeof g.minValue!="undefined"&&!isNaN(g.minValue)){if(parseFloat(c)<parseFloat(g.minValue)){return[false,a+": "+jQuery.jgrid.edit.msg.minValue+" "+g.minValue,""];
}}if(typeof g.maxValue!="undefined"&&!isNaN(g.maxValue)){if(parseFloat(c)>parseFloat(g.maxValue)){return[false,a+": "+jQuery.jgrid.edit.msg.maxValue+" "+g.maxValue,""];}}if(g.email===true){if(!(h===false&&isEmpty(c))){f=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;
if(!f.test(c)){return[false,a+": "+jQuery.jgrid.edit.msg.email,""];}}}if(g.integer===true){if(!(h===false&&isEmpty(c))){if(isNaN(c)){return[false,a+": "+jQuery.jgrid.edit.msg.integer,""];}if(c%1!==0||c.indexOf(".")!=-1){return[false,a+": "+jQuery.jgrid.edit.msg.integer,""];}}}if(g.date===true){if(!(h===false&&isEmpty(c))){d=e.p.colModel[d].formatoptions&&e.p.colModel[d].formatoptions.newformat?e.p.colModel[d].formatoptions.newformat:e.p.colModel[d].datefmt||"Y-m-d";
if(!checkDate(d,c)){return[false,a+": "+jQuery.jgrid.edit.msg.date+" - "+d,""];}}}if(g.time===true){if(!(h===false&&isEmpty(c))){if(!checkTime(c)){return[false,a+": "+jQuery.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];}}}if(g.url===true){if(!(h===false&&isEmpty(c))){f=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;
if(!f.test(c)){return[false,a+": "+jQuery.jgrid.edit.msg.url,""];}}}if(g.custom===true){if(!(h===false&&isEmpty(c))){if(jQuery.isFunction(g.custom_func)){c=g.custom_func.call(e,c,a);return jQuery.isArray(c)?c:[false,jQuery.jgrid.edit.msg.customarray,""];}else{return[false,jQuery.jgrid.edit.msg.customfcheck,""];
}}}}return[true,"",""];}(function(a){var d=null;a.jgrid.extend({searchGrid:function(b){b=a.extend({recreateFilter:false,drag:true,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:true,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,closeAfterSearch:false,closeAfterReset:false,closeOnEscape:false,multipleSearch:false,cloneSearchRowOnAdd:true,sopt:null,stringResult:undefined,onClose:null,useDataProxy:false,overlay:true},a.jgrid.search,b||{});
return this.each(function(){function v(p,e){e=p.p.postData[e.sFilter];if(typeof e=="string"){e=a.jgrid.parse(e);}if(e){e.groupOp&&p.SearchFilter.setGroupOp(e.groupOp);if(e.rules){var q,f=0,m=e.rules.length;for(q=false;f<m;f++){q=e.rules[f];if(q.field!==undefined&&q.op!==undefined&&q.data!==undefined){(q=p.SearchFilter.setFilter({sfref:p.SearchFilter.$.find(".sf:last"),filter:a.extend({},q)}))&&p.SearchFilter.add();
}}}}}function n(f){if(b.onClose){var e=b.onClose(f);if(typeof e=="boolean"&&!e){return;}}f.hide();b.overlay===true&&a(".jqgrid-overlay:first","#gbox_"+k.p.id).hide();}function s(){var f=a(".ui-searchFilter").length;if(f>1){var e=a("#"+I).css("zIndex");a("#"+I).css({zIndex:parseInt(e,10)+f});}a("#"+I).show();
b.overlay===true&&a(".jqgrid-overlay:first","#gbox_"+k.p.id).show();try{a(":input:visible","#"+I)[0].focus();}catch(m){}}function g(m){var e=m!==undefined,p=a("#"+k.p.id),f={};if(b.multipleSearch===false){f[b.sField]=m.rules[0].field;f[b.sValue]=m.rules[0].data;f[b.sOper]=m.rules[0].op;}else{f[b.sFilter]=m;
}p[0].p.search=e;a.extend(p[0].p.postData,f);p.trigger("reloadGrid",[{page:1}]);b.closeAfterSearch&&n(a("#"+I));}function o(f){f=f&&f.hasOwnProperty("reload")?f.reload:true;var e=a("#"+k.p.id),m={};e[0].p.search=false;if(b.multipleSearch===false){m[b.sField]=m[b.sValue]=m[b.sOper]="";}else{m[b.sFilter]="";
}a.extend(e[0].p.postData,m);f&&e.trigger("reloadGrid",[{page:1}]);b.closeAfterReset&&n(a("#"+I));}var k=this;if(k.grid){var I="fbox_"+k.p.id;if(a.fn.searchFilter){b.recreateFilter===true&&a("#"+I).remove();if(a("#"+I).html()!=null){a.isFunction(b.beforeShowSearch)&&b.beforeShowSearch(a("#"+I));s();a.isFunction(b.afterShowSearch)&&b.afterShowSearch(a("#"+I));
}else{var l=[],E=a("#"+k.p.id).jqGrid("getGridParam","colNames"),w=a("#"+k.p.id).jqGrid("getGridParam","colModel"),h=["eq","ne","lt","le","gt","ge","bw","bn","in","ni","ew","en","cn","nc"],B,c,j,H=[];if(b.sopt!==null){for(B=j=0;B<b.sopt.length;B++){if((c=a.inArray(b.sopt[B],h))!=-1){H[j]={op:b.sopt[B],text:b.odata[c]};
j++;}}}else{for(B=0;B<h.length;B++){H[B]={op:h[B],text:b.odata[B]};}}a.each(w,function(p,e){var q=typeof e.search==="undefined"?true:e.search,f=e.hidden===true;p=a.extend({},{text:E[p],itemval:e.index||e.name},this.searchoptions);e=p.searchhidden===true;if(typeof p.sopt!=="undefined"){j=0;p.ops=[];if(p.sopt.length>0){for(B=0;
B<p.sopt.length;B++){if((c=a.inArray(p.sopt[B],h))!=-1){p.ops[j]={op:p.sopt[B],text:b.odata[c]};j++;}}}}if(typeof this.stype==="undefined"){this.stype="text";}if(this.stype=="select"){if(p.dataUrl===undefined){var m;if(p.value){m=p.value;}else{if(this.editoptions){m=this.editoptions.value;}}if(m){p.dataValues=[];
if(typeof m==="string"){m=m.split(";");var r;for(B=0;B<m.length;B++){r=m[B].split(":");p.dataValues[B]={value:r[0],text:r[1]};}}else{if(typeof m==="object"){B=0;for(r in m){if(m.hasOwnProperty(r)){p.dataValues[B]={value:r,text:m[r]};B++;}}}}}}}if(e&&q||q&&!f){l.push(p);}});if(l.length>0){a("<div id='"+I+"' role='dialog' tabindex='-1'></div>").insertBefore("#gview_"+k.p.id);
if(b.stringResult===undefined){b.stringResult=b.multipleSearch;}k.SearchFilter=a("#"+I).searchFilter(l,{groupOps:b.groupOps,operators:H,onClose:n,resetText:b.Reset,searchText:b.Find,windowTitle:b.caption,rulesText:b.rulesText,matchText:b.matchText,onSearch:g,onReset:o,stringResult:b.stringResult,ajaxSelectOptions:a.extend({},a.jgrid.ajaxOptions,k.p.ajaxSelectOptions||{}),clone:b.cloneSearchRowOnAdd});
a(".ui-widget-overlay","#"+I).remove();k.p.direction=="rtl"&&a(".ui-closer","#"+I).css("float","left");if(b.drag===true){a("#"+I+" table thead tr:first td:first").css("cursor","move");if(jQuery.fn.jqDrag){a("#"+I).jqDrag(a("#"+I+" table thead tr:first td:first"));}else{try{a("#"+I).draggable({handle:a("#"+I+" table thead tr:first td:first")});
}catch(C){}}}if(b.multipleSearch===false){a(".ui-del, .ui-add, .ui-del, .ui-add-last, .matchText, .rulesText","#"+I).hide();a("select[name='groupOp']","#"+I).hide();}b.multipleSearch===true&&b.loadDefaults===true&&v(k,b);a.isFunction(b.onInitializeSearch)&&b.onInitializeSearch(a("#"+I));a.isFunction(b.beforeShowSearch)&&b.beforeShowSearch(a("#"+I));
s();a.isFunction(b.afterShowSearch)&&b.afterShowSearch(a("#"+I));b.closeOnEscape===true&&a("#"+I).keydown(function(e){e.which==27&&n(a("#"+I));});}}}}});},editGridRow:function(c,b){d=b=a.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:false,drag:true,resize:true,url:null,mtype:"POST",clearAfterAdd:true,closeAfterEdit:false,reloadAfterSubmit:true,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:false,jqModal:true,closeOnEscape:false,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[false,13],navkeys:[false,38,40],checkOnSubmit:false,checkOnUpdate:false,_savedData:{},processing:false,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:true},a.jgrid.edit,b||{});
return this.each(function(){function Y(){a(".FormElement","#"+M).each(function(){var e=a(".customelement",this);if(e.length){var f=a(e[0]).attr("name");a.each(E.p.colModel,function(){if(this.name==f&&this.editoptions&&a.isFunction(this.editoptions.custom_value)){try{D[f]=this.editoptions.custom_value(a("#"+f,"#"+M),"get");
if(D[f]===undefined){throw"e1";}}catch(r){r=="e1"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,r.message,jQuery.jgrid.edit.bClose);}return true;}});}else{switch(a(this).get(0).type){case"checkbox":if(a(this).attr("checked")){D[this.name]=a(this).val();
}else{e=a(this).attr("offval");D[this.name]=e;}break;case"select-one":D[this.name]=a("option:selected",this).val();k[this.name]=a("option:selected",this).text();break;case"select-multiple":D[this.name]=a(this).val();D[this.name]=D[this.name]?D[this.name].join(","):"";var p=[];a("option:selected",this).each(function(r,t){p[r]=a(t).text();
});k[this.name]=p.join(",");break;case"password":case"text":case"textarea":case"button":D[this.name]=a(this).val();break;}if(E.p.autoencode){D[this.name]=a.jgrid.htmlEncode(D[this.name]);}}});return true;}function ag(x,I,f,H){for(var L,r,R,S=0,e,t,p,y=[],J=false,G="",z=1;z<=H;z++){G+="<td class='CaptionTD ui-widget-content'>&#160;</td><td class='DataTD ui-widget-content' style='white-space:pre'>&#160;</td>";
}if(x!="_empty"){J=a(I).jqGrid("getInd",x);}a(I.p.colModel).each(function(X){L=this.name;t=(r=this.editrules&&this.editrules.edithidden===true?false:this.hidden===true?true:false)?"style='display:none'":"";if(L!=="cb"&&L!=="subgrid"&&this.editable===true&&L!=="rn"){if(J===false){e="";}else{if(L==I.p.ExpandColumn&&I.p.treeGrid===true){e=a("td:eq("+X+")",I.rows[J]).text();
}else{try{e=a.unformat(a("td:eq("+X+")",I.rows[J]),{rowId:x,colModel:this},X);}catch(aa){e=a("td:eq("+X+")",I.rows[J]).html();}}}var ab=a.extend({},this.editoptions||{},{id:L,name:L}),ac=a.extend({},{elmprefix:"",elmsuffix:"",rowabove:false,rowcontent:""},this.formoptions||{}),T=parseInt(ac.rowpos,10)||S+1,W=parseInt((parseInt(ac.colpos,10)||1)*2,10);
if(x=="_empty"&&ab.defaultValue){e=a.isFunction(ab.defaultValue)?ab.defaultValue():ab.defaultValue;}if(!this.edittype){this.edittype="text";}if(E.p.autoencode){e=a.jgrid.htmlDecode(e);}p=createEl(this.edittype,ab,e,false,a.extend({},a.jgrid.ajaxOptions,I.p.ajaxSelectOptions||{}));if(e===""&&this.edittype=="checkbox"){e=a(p).attr("offval");
}if(e===""&&this.edittype=="select"){e=a("option:eq(0)",p).text();}if(d.checkOnSubmit||d.checkOnUpdate){d._savedData[L]=e;}a(p).addClass("FormElement");R=a(f).find("tr[rowpos="+T+"]");if(ac.rowabove){ab=a("<tr><td class='contentinfo' colspan='"+H*2+"'>"+ac.rowcontent+"</td></tr>");a(f).append(ab);ab[0].rp=T;
}if(R.length===0){R=a("<tr "+t+" rowpos='"+T+"'></tr>").addClass("FormData").attr("id","tr_"+L);a(R).append(G);a(f).append(R);R[0].rp=T;}a("td:eq("+(W-2)+")",R[0]).html(typeof ac.label==="undefined"?I.p.colNames[X]:ac.label);a("td:eq("+(W-1)+")",R[0]).append(ac.elmprefix).append(p).append(ac.elmsuffix);
y[S]=X;S++;}});if(S>0){z=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(H*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+I.p.id+"_id' value='"+x+"'/></td></tr>");z[0].rp=S+999;a(f).append(z);if(d.checkOnSubmit||d.checkOnUpdate){d._savedData[I.p.id+"_id"]=x;
}}return y;}function l(x,G,H){var z,J=0,r,e,f,p,t;if(d.checkOnSubmit||d.checkOnUpdate){d._savedData={};d._savedData[G.p.id+"_id"]=x;}var I=G.p.colModel;if(x=="_empty"){a(I).each(function(){z=this.name;f=a.extend({},this.editoptions||{});e=a("#"+a.jgrid.jqID(z),"#"+H);if(e[0]!=null){p="";if(f.defaultValue){p=a.isFunction(f.defaultValue)?f.defaultValue():f.defaultValue;
if(e[0].type=="checkbox"){t=p.toLowerCase();if(t.search(/(false|0|no|off|undefined)/i)<0&&t!==""){e[0].checked=true;e[0].defaultChecked=true;e[0].value=p;}else{e.attr({checked:"",defaultChecked:""});}}else{e.val(p);}}else{if(e[0].type=="checkbox"){e[0].checked=false;e[0].defaultChecked=false;p=a(e).attr("offval");
}else{if(e[0].type&&e[0].type.substr(0,6)=="select"){e[0].selectedIndex=0;}else{e.val(p);}}}if(d.checkOnSubmit===true||d.checkOnUpdate){d._savedData[z]=p;}}});a("#id_g","#"+H).val(x);}else{var y=a(G).jqGrid("getInd",x,true);if(y){a("td",y).each(function(S){z=I[S].name;if(z!=="cb"&&z!=="subgrid"&&z!=="rn"&&I[S].editable===true){if(z==G.p.ExpandColumn&&G.p.treeGrid===true){r=a(this).text();
}else{try{r=a.unformat(a(this),{rowId:x,colModel:I[S]},S);}catch(R){r=a(this).html();}}if(E.p.autoencode){r=a.jgrid.htmlDecode(r);}if(d.checkOnSubmit===true||d.checkOnUpdate){d._savedData[z]=r;}z=a.jgrid.jqID(z);switch(I[S].edittype){case"password":case"text":case"button":case"image":a("#"+z,"#"+H).val(r);
break;case"textarea":if(r=="&nbsp;"||r=="&#160;"||r.length==1&&r.charCodeAt(0)==160){r="";}a("#"+z,"#"+H).val(r);break;case"select":var T=r.split(",");T=a.map(T,function(W){return a.trim(W);});a("#"+z+" option","#"+H).each(function(){this.selected=!I[S].editoptions.multiple&&(T[0]==a.trim(a(this).text())||T[0]==a.trim(a(this).val()))?true:I[S].editoptions.multiple?a.inArray(a.trim(a(this).text()),T)>-1||a.inArray(a.trim(a(this).val()),T)>-1?true:false:false;
});break;case"checkbox":r+="";if(I[S].editoptions&&I[S].editoptions.value){if(I[S].editoptions.value.split(":")[0]==r){a("#"+z,"#"+H).attr("checked",true);a("#"+z,"#"+H).attr("defaultChecked",true);}else{a("#"+z,"#"+H).attr("checked",false);a("#"+z,"#"+H).attr("defaultChecked","");}}else{r=r.toLowerCase();
if(r.search(/(false|0|no|off|undefined)/i)<0&&r!==""){a("#"+z,"#"+H).attr("checked",true);a("#"+z,"#"+H).attr("defaultChecked",true);}else{a("#"+z,"#"+H).attr("checked",false);a("#"+z,"#"+H).attr("defaultChecked","");}}break;case"custom":try{if(I[S].editoptions&&a.isFunction(I[S].editoptions.custom_value)){I[S].editoptions.custom_value(a("#"+z,"#"+H),"set",r);
}else{throw"e1";}}catch(L){L=="e1"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,L.message,jQuery.jgrid.edit.bClose);}break;}J++;}});J>0&&a("#id_g","#"+M).val(x);}}}function af(){var e=[true,"",""],p={},r=E.p.prmNames,f,t;
if(a.isFunction(d.beforeCheckValues)){var y=d.beforeCheckValues(D,a("#"+F),D[E.p.id+"_id"]=="_empty"?r.addoper:r.editoper);if(y&&typeof y==="object"){D=y;}}for(var x in D){if(D.hasOwnProperty(x)){e=checkValues(D[x],x,E);if(e[0]===false){break;}}}if(e[0]){if(a.isFunction(d.onclickSubmit)){p=d.onclickSubmit(d,D)||{};
}if(a.isFunction(d.beforeSubmit)){e=d.beforeSubmit(D,a("#"+F));}}if(e[0]&&!d.processing){d.processing=true;a("#sData","#"+M+"_2").addClass("ui-state-active");t=r.oper;f=r.id;D[t]=a.trim(D[E.p.id+"_id"])=="_empty"?r.addoper:r.editoper;if(D[t]!=r.addoper){D[f]=D[E.p.id+"_id"];}else{if(D[f]===undefined){D[f]=D[E.p.id+"_id"];
}}delete D[E.p.id+"_id"];D=a.extend(D,d.editData,p);p=a.extend({url:d.url?d.url:a(E).jqGrid("getGridParam","editurl"),type:d.mtype,data:a.isFunction(d.serializeEditData)?d.serializeEditData(D):D,complete:function(H,z){if(z!="success"){e[0]=false;e[1]=a.isFunction(d.errorTextFormat)?d.errorTextFormat(H):z+" Status: '"+H.statusText+"'. Error code: "+H.status;
}else{if(a.isFunction(d.afterSubmit)){e=d.afterSubmit(H,D);}}if(e[0]===false){a("#FormError>td","#"+M).html(e[1]);a("#FormError","#"+M).show();}else{a.each(E.p.colModel,function(){if(k[this.name]&&this.formatter&&this.formatter=="select"){try{delete k[this.name];}catch(J){}}});D=a.extend(D,k);E.p.autoencode&&a.each(D,function(J,L){D[J]=a.jgrid.htmlDecode(L);
});d.reloadAfterSubmit=d.reloadAfterSubmit&&E.p.datatype!="local";if(D[t]==r.addoper){e[2]||(e[2]=parseInt(E.p.records,10)+1+"");D[f]=e[2];if(d.closeAfterAdd){if(d.reloadAfterSubmit){a(E).trigger("reloadGrid");}else{a(E).jqGrid("addRowData",e[2],D,b.addedrow);a(E).jqGrid("setSelection",e[2]);}hideModal("#"+O.themodal,{gb:"#gbox_"+N,jqm:b.jqModal,onClose:d.onClose});
}else{if(d.clearAfterAdd){d.reloadAfterSubmit?a(E).trigger("reloadGrid"):a(E).jqGrid("addRowData",e[2],D,b.addedrow);l("_empty",E,F);}else{d.reloadAfterSubmit?a(E).trigger("reloadGrid"):a(E).jqGrid("addRowData",e[2],D,b.addedrow);}}}else{if(d.reloadAfterSubmit){a(E).trigger("reloadGrid");d.closeAfterEdit||setTimeout(function(){a(E).jqGrid("setSelection",D[f]);
},1000);}else{E.p.treeGrid===true?a(E).jqGrid("setTreeRow",D[f],D):a(E).jqGrid("setRowData",D[f],D);}d.closeAfterEdit&&hideModal("#"+O.themodal,{gb:"#gbox_"+N,jqm:b.jqModal,onClose:d.onClose});}if(a.isFunction(d.afterComplete)){Z=H;setTimeout(function(){d.afterComplete(Z,D,a("#"+F));Z=null;},500);}}d.processing=false;
if(d.checkOnSubmit||d.checkOnUpdate){a("#"+F).data("disabled",false);if(d._savedData[E.p.id+"_id"]!="_empty"){for(var I in d._savedData){if(D[I]){d._savedData[I]=D[I];}}}}a("#sData","#"+M+"_2").removeClass("ui-state-active");try{a(":input:visible","#"+F)[0].focus();}catch(G){}},error:function(G,z,H){a("#FormError>td","#"+M).html(z+" : "+H);
a("#FormError","#"+M).show();d.processing=false;a("#"+F).data("disabled",false);a("#sData","#"+M+"_2").removeClass("ui-state-active");}},a.jgrid.ajaxOptions,d.ajaxEditOptions);if(!p.url&&!d.useDataProxy){if(a.isFunction(E.p.dataProxy)){d.useDataProxy=true;}else{e[0]=false;e[1]+=" "+a.jgrid.errors.nourl;
}}if(e[0]){d.useDataProxy?E.p.dataProxy.call(E,p,"set_"+E.p.id):a.ajax(p);}}if(e[0]===false){a("#FormError>td","#"+M).html(e[1]);a("#FormError","#"+M).show();}}function m(e,p){var r=false,f;for(f in e){if(e[f]!=p[f]){r=true;break;}}return r;}function K(){var e=true;a("#FormError","#"+M).hide();if(d.checkOnUpdate){D={};
k={};Y();s=a.extend({},D,k);if(B=m(s,d._savedData)){a("#"+F).data("disabled",true);a(".confirm","#"+O.themodal).show();e=false;}}return e;}function U(e,f){e===0?a("#pData","#"+M+"_2").addClass("ui-state-disabled"):a("#pData","#"+M+"_2").removeClass("ui-state-disabled");e==f?a("#nData","#"+M+"_2").addClass("ui-state-disabled"):a("#nData","#"+M+"_2").removeClass("ui-state-disabled");
}function h(){var e=a(E).jqGrid("getDataIDs"),f=a("#id_g","#"+M).val();return[a.inArray(f,e),e];}var E=this;if(E.grid&&c){var N=E.p.id,F="FrmGrid_"+N,M="TblGrid_"+N,O={themodal:"editmod"+N,modalhead:"edithd"+N,modalcontent:"editcnt"+N,scrollelm:F},ah=a.isFunction(d.beforeShowForm)?d.beforeShowForm:false,u=a.isFunction(d.afterShowForm)?d.afterShowForm:false,P=a.isFunction(d.beforeInitData)?d.beforeInitData:false,ae=a.isFunction(d.onInitializeForm)?d.onInitializeForm:false,Z=null,j=1,q=0,D,k,s,B;
if(c=="new"){c="_empty";b.caption=b.addCaption;}else{b.caption=b.editCaption;}b.recreateForm===true&&a("#"+O.themodal).html()!=null&&a("#"+O.themodal).remove();var w=true;if(b.checkOnUpdate&&b.jqModal&&!b.modal){w=false;}if(a("#"+O.themodal).html()!=null){a(".ui-jqdialog-title","#"+O.modalhead).html(b.caption);
a("#FormError","#"+M).hide();if(d.topinfo){a(".topinfo","#"+M+"_2").html(d.topinfo);a(".tinfo","#"+M+"_2").show();}else{a(".tinfo","#"+M+"_2").hide();}if(d.bottominfo){a(".bottominfo","#"+M+"_2").html(d.bottominfo);a(".binfo","#"+M+"_2").show();}else{a(".binfo","#"+M+"_2").hide();}P&&P(a("#"+F));l(c,E,F);
c=="_empty"||!d.viewPagerButtons?a("#pData, #nData","#"+M+"_2").hide():a("#pData, #nData","#"+M+"_2").show();if(d.processing===true){d.processing=false;a("#sData","#"+M+"_2").removeClass("ui-state-active");}if(a("#"+F).data("disabled")===true){a(".confirm","#"+O.themodal).hide();a("#"+F).data("disabled",false);
}ah&&ah(a("#"+F));a("#"+O.themodal).data("onClose",d.onClose);viewModal("#"+O.themodal,{gbox:"#gbox_"+N,jqm:b.jqModal,jqM:false,closeoverlay:w,modal:b.modal});w||a(".jqmOverlay").click(function(){if(!K()){return false;}hideModal("#"+O.themodal,{gb:"#gbox_"+N,jqm:b.jqModal,onClose:d.onClose});return false;
});u&&u(a("#"+F));}else{a(E.p.colModel).each(function(){var e=this.formoptions;j=Math.max(j,e?e.colpos||0:0);q=Math.max(q,e?e.rowpos||0:0);});var n=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px";n=a("<form name='FormPost' id='"+F+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+n+";'></form>").data("disabled",false);
var v=a("<table id='"+M+"' class='EditTable' cellspacing='0' cellpading='0' border='0'><tbody></tbody></table>");a(n).append(v);var g=a("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+j*2+"'></td></tr>");g[0].rp=0;a(v).append(g);g=a("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+j*2+"'>"+d.topinfo+"</td></tr>");
g[0].rp=0;a(v).append(g);P&&P(a("#"+F));g=(P=E.p.direction=="rtl"?true:false)?"nData":"pData";var C=P?"pData":"nData";ag(c,E,v,j);g="<a href='javascript:void(0)' id='"+g+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></div>";C="<a href='javascript:void(0)' id='"+C+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></div>";
var V="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+b.bSubmit+"</a>",A="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+b.bCancel+"</a>";g="<table border='0' class='EditTable' id='"+M+"_2'><tbody><tr id='Act_Buttons'><td class='navButton ui-widget-content'>"+(P?C+g:g+C)+"</td><td class='EditButton ui-widget-content'>"+V+A+"</td></tr>";
g+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+d.bottominfo+"</td></tr>";g+="</tbody></table>";if(q>0){var Q=[];a.each(a(v)[0].rows,function(e,f){Q[e]=f;});Q.sort(function(e,f){if(e.rp>f.rp){return 1;}if(e.rp<f.rp){return -1;}return 0;});a.each(Q,function(e,f){a("tbody",v).append(f);
});}b.gbox="#gbox_"+N;var o=false;if(b.closeOnEscape===true){b.closeOnEscape=false;o=true;}n=a("<span></span>").append(n).append(g);createModal(O,n,b,"#gview_"+E.p.id,a("#gbox_"+E.p.id)[0]);if(P){a("#pData, #nData","#"+M+"_2").css("float","right");a(".EditButton","#"+M+"_2").css("text-align","left");
}d.topinfo&&a(".tinfo","#"+M+"_2").show();d.bottominfo&&a(".binfo","#"+M+"_2").show();g=n=null;a("#"+O.themodal).keydown(function(e){var f=e.target;if(a("#"+F).data("disabled")===true){return false;}if(d.savekey[0]===true&&e.which==d.savekey[1]){if(f.tagName!="TEXTAREA"){a("#sData","#"+M+"_2").trigger("click");
return false;}}if(e.which===27){if(!K()){return false;}o&&hideModal(this,{gb:b.gbox,jqm:b.jqModal,onClose:d.onClose});return false;}if(d.navkeys[0]===true){if(a("#id_g","#"+M).val()=="_empty"){return true;}if(e.which==d.navkeys[1]){a("#pData","#"+M+"_2").trigger("click");return false;}if(e.which==d.navkeys[2]){a("#nData","#"+M+"_2").trigger("click");
return false;}}});if(b.checkOnUpdate){a("a.ui-jqdialog-titlebar-close span","#"+O.themodal).removeClass("jqmClose");a("a.ui-jqdialog-titlebar-close","#"+O.themodal).unbind("click").click(function(){if(!K()){return false;}hideModal("#"+O.themodal,{gb:"#gbox_"+N,jqm:b.jqModal,onClose:d.onClose});return false;
});}b.saveicon=a.extend([true,"left","ui-icon-disk"],b.saveicon);b.closeicon=a.extend([true,"left","ui-icon-close"],b.closeicon);if(b.saveicon[0]===true){a("#sData","#"+M+"_2").addClass(b.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.saveicon[2]+"'></span>");
}if(b.closeicon[0]===true){a("#cData","#"+M+"_2").addClass(b.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.closeicon[2]+"'></span>");}if(d.checkOnSubmit||d.checkOnUpdate){V="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bYes+"</a>";
C="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bNo+"</a>";A="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+b.bExit+"</a>";n=b.zIndex||999;n++;a("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+n+";display:none;'>&#160;"+(a.browser.msie&&a.browser.version==6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"")+"</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(n+1)+"'>"+b.saveData+"<br/><br/>"+V+C+A+"</div>").insertAfter("#"+F);
a("#sNew","#"+O.themodal).click(function(){af();a("#"+F).data("disabled",false);a(".confirm","#"+O.themodal).hide();return false;});a("#nNew","#"+O.themodal).click(function(){a(".confirm","#"+O.themodal).hide();a("#"+F).data("disabled",false);setTimeout(function(){a(":input","#"+F)[0].focus();},0);return false;
});a("#cNew","#"+O.themodal).click(function(){a(".confirm","#"+O.themodal).hide();a("#"+F).data("disabled",false);hideModal("#"+O.themodal,{gb:"#gbox_"+N,jqm:b.jqModal,onClose:d.onClose});return false;});}ae&&ae(a("#"+F));c=="_empty"||!d.viewPagerButtons?a("#pData,#nData","#"+M+"_2").hide():a("#pData,#nData","#"+M+"_2").show();
ah&&ah(a("#"+F));a("#"+O.themodal).data("onClose",d.onClose);viewModal("#"+O.themodal,{gbox:"#gbox_"+N,jqm:b.jqModal,closeoverlay:w,modal:b.modal});w||a(".jqmOverlay").click(function(){if(!K()){return false;}hideModal("#"+O.themodal,{gb:"#gbox_"+N,jqm:b.jqModal,onClose:d.onClose});return false;});u&&u(a("#"+F));
a(".fm-button","#"+O.themodal).hover(function(){a(this).addClass("ui-state-hover");},function(){a(this).removeClass("ui-state-hover");});a("#sData","#"+M+"_2").click(function(){D={};k={};a("#FormError","#"+M).hide();Y();if(D[E.p.id+"_id"]=="_empty"){af();}else{if(b.checkOnSubmit===true){s=a.extend({},D,k);
if(B=m(s,d._savedData)){a("#"+F).data("disabled",true);a(".confirm","#"+O.themodal).show();}else{af();}}else{af();}}return false;});a("#cData","#"+M+"_2").click(function(){if(!K()){return false;}hideModal("#"+O.themodal,{gb:"#gbox_"+N,jqm:b.jqModal,onClose:d.onClose});return false;});a("#nData","#"+M+"_2").click(function(){if(!K()){return false;
}a("#FormError","#"+M).hide();var e=h();e[0]=parseInt(e[0],10);if(e[0]!=-1&&e[1][e[0]+1]){a.isFunction(b.onclickPgButtons)&&b.onclickPgButtons("next",a("#"+F),e[1][e[0]]);l(e[1][e[0]+1],E,F);a(E).jqGrid("setSelection",e[1][e[0]+1]);a.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons("next",a("#"+F),e[1][e[0]+1]);
U(e[0]+1,e[1].length-1);}return false;});a("#pData","#"+M+"_2").click(function(){if(!K()){return false;}a("#FormError","#"+M).hide();var e=h();if(e[0]!=-1&&e[1][e[0]-1]){a.isFunction(b.onclickPgButtons)&&b.onclickPgButtons("prev",a("#"+F),e[1][e[0]]);l(e[1][e[0]-1],E,F);a(E).jqGrid("setSelection",e[1][e[0]-1]);
a.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons("prev",a("#"+F),e[1][e[0]-1]);U(e[0]-1,e[1].length-1);}return false;});}ah=h();U(ah[0],ah[1].length-1);}});},viewGridRow:function(c,b){b=a.extend({top:0,left:0,width:0,height:"auto",dataheight:"auto",modal:false,drag:true,resize:true,jqModal:true,closeOnEscape:false,labelswidth:"30%",closeicon:[],navkeys:[false,38,40],onClose:null,beforeShowForm:null,viewPagerButtons:true},a.jgrid.view,b||{});
return this.each(function(){function w(){if(b.closeOnEscape===true||b.navkeys[0]===true){setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+l.modalhead).focus();},0);}}function q(e,D,z,O){for(var J,L,H,x=0,P,U,N=[],R=false,M="<td class='CaptionTD form-view-label ui-widget-content' width='"+b.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",f="",r=["integer","number","currency"],y=0,p=0,G,u,I,t=1;
t<=O;t++){f+=t==1?M:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>";}a(D.p.colModel).each(function(){L=this.editrules&&this.editrules.edithidden===true?false:this.hidden===true?true:false;if(!L&&this.align==="right"){if(this.formatter&&a.inArray(this.formatter,r)!==-1){y=Math.max(y,parseInt(this.width,10));
}else{p=Math.max(p,parseInt(this.width,10));}}});G=y!==0?y:p!==0?p:0;R=a(D).jqGrid("getInd",e);a(D.p.colModel).each(function(ab){J=this.name;u=false;U=(L=this.editrules&&this.editrules.edithidden===true?false:this.hidden===true?true:false)?"style='display:none'":"";I=typeof this.viewable!="boolean"?true:this.viewable;
if(J!=="cb"&&J!=="subgrid"&&J!=="rn"&&I){P=R===false?"":J==D.p.ExpandColumn&&D.p.treeGrid===true?a("td:eq("+ab+")",D.rows[R]).text():a("td:eq("+ab+")",D.rows[R]).html();u=this.align==="right"&&G!==0?true:false;a.extend({},this.editoptions||{},{id:J,name:J});var aa=a.extend({},{rowabove:false,rowcontent:""},this.formoptions||{}),ac=parseInt(aa.rowpos,10)||x+1,T=parseInt((parseInt(aa.colpos,10)||1)*2,10);
if(aa.rowabove){var Z=a("<tr><td class='contentinfo' colspan='"+O*2+"'>"+aa.rowcontent+"</td></tr>");a(z).append(Z);Z[0].rp=ac;}H=a(z).find("tr[rowpos="+ac+"]");if(H.length===0){H=a("<tr "+U+" rowpos='"+ac+"'></tr>").addClass("FormData").attr("id","trv_"+J);a(H).append(f);a(z).append(H);H[0].rp=ac;}a("td:eq("+(T-2)+")",H[0]).html("<b>"+(typeof aa.label==="undefined"?D.p.colNames[ab]:aa.label)+"</b>");
a("td:eq("+(T-1)+")",H[0]).append("<span>"+P+"</span>").attr("id","v_"+J);u&&a("td:eq("+(T-1)+") span",H[0]).css({"text-align":"right",width:G+"px"});N[x]=ab;x++;}});if(x>0){e=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(O*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+e+"'/></td></tr>");
e[0].rp=x+99;a(z).append(e);}return N;}function F(x,t){var e,u,p=0,r,f;if(f=a(t).jqGrid("getInd",x,true)){a("td",f).each(function(y){e=t.p.colModel[y].name;u=t.p.colModel[y].editrules&&t.p.colModel[y].editrules.edithidden===true?false:t.p.colModel[y].hidden===true?true:false;if(e!=="cb"&&e!=="subgrid"&&e!=="rn"){r=e==t.p.ExpandColumn&&t.p.treeGrid===true?a(this).text():a(this).html();
a.extend({},t.p.colModel[y].editoptions||{});e=a.jgrid.jqID("v_"+e);a("#"+e+" span","#"+g).html(r);u&&a("#"+e,"#"+g).parents("tr:first").hide();p++;}});p>0&&a("#id_g","#"+g).val(x);}}function n(e,f){e===0?a("#pData","#"+g+"_2").addClass("ui-state-disabled"):a("#pData","#"+g+"_2").removeClass("ui-state-disabled");
e==f?a("#nData","#"+g+"_2").addClass("ui-state-disabled"):a("#nData","#"+g+"_2").removeClass("ui-state-disabled");}function K(){var e=a(j).jqGrid("getDataIDs"),f=a("#id_g","#"+g).val();return[a.inArray(f,e),e];}var j=this;if(j.grid&&c){if(!b.imgpath){b.imgpath=j.p.imgpath;}var s=j.p.id,B="ViewGrid_"+s,g="ViewTbl_"+s,l={themodal:"viewmod"+s,modalhead:"viewhd"+s,modalcontent:"viewcnt"+s,scrollelm:B},h=1,k=0;
if(a("#"+l.themodal).html()!=null){a(".ui-jqdialog-title","#"+l.modalhead).html(b.caption);a("#FormError","#"+g).hide();F(c,j);a.isFunction(b.beforeShowForm)&&b.beforeShowForm(a("#"+B));viewModal("#"+l.themodal,{gbox:"#gbox_"+s,jqm:b.jqModal,jqM:false,modal:b.modal});w();}else{a(j.p.colModel).each(function(){var e=this.formoptions;
h=Math.max(h,e?e.colpos||0:0);k=Math.max(k,e?e.rowpos||0:0);});var m=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px",v=a("<form name='FormPost' id='"+B+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+m+";'></form>"),S=a("<table id='"+g+"' class='EditTable' cellspacing='1' cellpading='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");
a(v).append(S);q(c,j,S,h);m=j.p.direction=="rtl"?true:false;var o="<a href='javascript:void(0)' id='"+(m?"nData":"pData")+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",E="<a href='javascript:void(0)' id='"+(m?"pData":"nData")+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",A="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+b.bClose+"</a>";
if(k>0){var C=[];a.each(a(S)[0].rows,function(e,f){C[e]=f;});C.sort(function(e,f){if(e.rp>f.rp){return 1;}if(e.rp<f.rp){return -1;}return 0;});a.each(C,function(e,f){a("tbody",S).append(f);});}b.gbox="#gbox_"+s;var Q=false;if(b.closeOnEscape===true){b.closeOnEscape=false;Q=true;}v=a("<span></span>").append(v).append("<table border='0' class='EditTable' id='"+g+"_2'><tbody><tr id='Act_Buttons'><td class='navButton ui-widget-content' width='"+b.labelswidth+"'>"+(m?E+o:o+E)+"</td><td class='EditButton ui-widget-content'>"+A+"</td></tr></tbody></table>");
createModal(l,v,b,"#gview_"+j.p.id,a("#gview_"+j.p.id)[0]);if(m){a("#pData, #nData","#"+g+"_2").css("float","right");a(".EditButton","#"+g+"_2").css("text-align","left");}b.viewPagerButtons||a("#pData, #nData","#"+g+"_2").hide();v=null;a("#"+l.themodal).keydown(function(e){if(e.which===27){Q&&hideModal(this,{gb:b.gbox,jqm:b.jqModal,onClose:b.onClose});
return false;}if(b.navkeys[0]===true){if(e.which===b.navkeys[1]){a("#pData","#"+g+"_2").trigger("click");return false;}if(e.which===b.navkeys[2]){a("#nData","#"+g+"_2").trigger("click");return false;}}});b.closeicon=a.extend([true,"left","ui-icon-close"],b.closeicon);if(b.closeicon[0]===true){a("#cData","#"+g+"_2").addClass(b.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.closeicon[2]+"'></span>");
}a.isFunction(b.beforeShowForm)&&b.beforeShowForm(a("#"+B));viewModal("#"+l.themodal,{gbox:"#gbox_"+s,jqm:b.jqModal,modal:b.modal});a(".fm-button:not(.ui-state-disabled)","#"+g+"_2").hover(function(){a(this).addClass("ui-state-hover");},function(){a(this).removeClass("ui-state-hover");});w();a("#cData","#"+g+"_2").click(function(){hideModal("#"+l.themodal,{gb:"#gbox_"+s,jqm:b.jqModal,onClose:b.onClose});
return false;});a("#nData","#"+g+"_2").click(function(){a("#FormError","#"+g).hide();var e=K();e[0]=parseInt(e[0],10);if(e[0]!=-1&&e[1][e[0]+1]){a.isFunction(b.onclickPgButtons)&&b.onclickPgButtons("next",a("#"+B),e[1][e[0]]);F(e[1][e[0]+1],j);a(j).jqGrid("setSelection",e[1][e[0]+1]);a.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons("next",a("#"+B),e[1][e[0]+1]);
n(e[0]+1,e[1].length-1);}w();return false;});a("#pData","#"+g+"_2").click(function(){a("#FormError","#"+g).hide();var e=K();if(e[0]!=-1&&e[1][e[0]-1]){a.isFunction(b.onclickPgButtons)&&b.onclickPgButtons("prev",a("#"+B),e[1][e[0]]);F(e[1][e[0]-1],j);a(j).jqGrid("setSelection",e[1][e[0]-1]);a.isFunction(b.afterclickPgButtons)&&b.afterclickPgButtons("prev",a("#"+B),e[1][e[0]-1]);
n(e[0]-1,e[1].length-1);}w();return false;});}m=K();n(m[0],m[1].length-1);}});},delGridRow:function(c,b){d=b=a.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:false,drag:true,resize:true,url:"",mtype:"POST",reloadAfterSubmit:true,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:true,closeOnEscape:false,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:false,serializeDelData:null,useDataProxy:false},a.jgrid.del,b||{});
return this.each(function(){var n=this;if(n.grid){if(c){var v=typeof b.beforeShowForm==="function"?true:false,z=typeof b.afterShowForm==="function"?true:false,o=n.p.id,A={},g="DelTbl_"+o,k,w,B,j,C={themodal:"delmod"+o,modalhead:"delhd"+o,modalcontent:"delcnt"+o,scrollelm:g};if(jQuery.isArray(c)){c=c.join();
}if(a("#"+C.themodal).html()!=null){a("#DelData>td","#"+g).text(c);a("#DelError","#"+g).hide();if(d.processing===true){d.processing=false;a("#dData","#"+g).removeClass("ui-state-active");}v&&b.beforeShowForm(a("#"+g));viewModal("#"+C.themodal,{gbox:"#gbox_"+o,jqm:b.jqModal,jqM:false,modal:b.modal});}else{var h=isNaN(b.dataheight)?b.dataheight:b.dataheight+"px";
h="<div id='"+g+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+h+";'>";h+="<table class='DelTable'><tbody>";h+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>";h+="<tr id='DelData' style='display:none'><td >"+c+"</td></tr>";h+='<tr><td class="delmsg" style="white-space:pre;">'+b.msg+"</td></tr><tr><td >&#160;</td></tr>";
h+="</tbody></table></div>";h+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+g+"_2'><tbody><tr><td class='DataTD ui-widget-content'></td></tr><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DelButton EditButton'>"+("<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+b.bSubmit+"</a>")+"&#160;"+("<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+b.bCancel+"</a>")+"</td></tr></tbody></table>";
b.gbox="#gbox_"+o;createModal(C,h,b,"#gview_"+n.p.id,a("#gview_"+n.p.id)[0]);a(".fm-button","#"+g+"_2").hover(function(){a(this).addClass("ui-state-hover");},function(){a(this).removeClass("ui-state-hover");});b.delicon=a.extend([true,"left","ui-icon-scissors"],b.delicon);b.cancelicon=a.extend([true,"left","ui-icon-cancel"],b.cancelicon);
if(b.delicon[0]===true){a("#dData","#"+g+"_2").addClass(b.delicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.delicon[2]+"'></span>");}if(b.cancelicon[0]===true){a("#eData","#"+g+"_2").addClass(b.cancelicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+b.cancelicon[2]+"'></span>");
}a("#dData","#"+g+"_2").click(function(){var l=[true,""];A={};var f=a("#DelData>td","#"+g).text();if(typeof b.onclickSubmit==="function"){A=b.onclickSubmit(d,f)||{};}if(typeof b.beforeSubmit==="function"){l=b.beforeSubmit(f);}if(l[0]&&!d.processing){d.processing=true;a(this).addClass("ui-state-active");
B=n.p.prmNames;k=a.extend({},d.delData,A);j=B.oper;k[j]=B.deloper;w=B.id;k[w]=f;var e=a.extend({url:d.url?d.url:a(n).jqGrid("getGridParam","editurl"),type:b.mtype,data:a.isFunction(b.serializeDelData)?b.serializeDelData(k):k,complete:function(r,p){if(p!="success"){l[0]=false;l[1]=a.isFunction(d.errorTextFormat)?d.errorTextFormat(r):p+" Status: '"+r.statusText+"'. Error code: "+r.status;
}else{if(typeof d.afterSubmit==="function"){l=d.afterSubmit(r,k);}}if(l[0]===false){a("#DelError>td","#"+g).html(l[1]);a("#DelError","#"+g).show();}else{if(d.reloadAfterSubmit&&n.p.datatype!="local"){a(n).trigger("reloadGrid");}else{p=[];p=f.split(",");if(n.p.treeGrid===true){try{a(n).jqGrid("delTreeNode",p[0]);
}catch(m){}}else{for(var q=0;q<p.length;q++){a(n).jqGrid("delRowData",p[q]);}}n.p.selrow=null;n.p.selarrrow=[];}a.isFunction(d.afterComplete)&&setTimeout(function(){d.afterComplete(r,f);},500);}d.processing=false;a("#dData","#"+g+"_2").removeClass("ui-state-active");l[0]&&hideModal("#"+C.themodal,{gb:"#gbox_"+o,jqm:b.jqModal,onClose:d.onClose});
},error:function(q,p,m){a("#DelError>td","#"+g).html(p+" : "+m);a("#DelError","#"+g).show();d.processing=false;a("#dData","#"+g+"_2").removeClass("ui-state-active");}},a.jgrid.ajaxOptions,b.ajaxDelOptions);if(!e.url&&!d.useDataProxy){if(a.isFunction(n.p.dataProxy)){d.useDataProxy=true;}else{l[0]=false;
l[1]+=" "+a.jgrid.errors.nourl;}}if(l[0]){d.useDataProxy?n.p.dataProxy.call(n,e,"del_"+n.p.id):a.ajax(e);}}if(l[0]===false){a("#DelError>td","#"+g).html(l[1]);a("#DelError","#"+g).show();}return false;});a("#eData","#"+g+"_2").click(function(){hideModal("#"+C.themodal,{gb:"#gbox_"+o,jqm:b.jqModal,onClose:d.onClose});
return false;});v&&b.beforeShowForm(a("#"+g));viewModal("#"+C.themodal,{gbox:"#gbox_"+o,jqm:b.jqModal,modal:b.modal});}z&&b.afterShowForm(a("#"+g));b.closeOnEscape===true&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+C.modalhead).focus();},0);}}});},navGrid:function(m,b,f,l,n,c,o){b=a.extend({edit:true,editicon:"ui-icon-pencil",add:true,addicon:"ui-icon-plus",del:true,delicon:"ui-icon-trash",search:true,searchicon:"ui-icon-search",refresh:true,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:false,viewicon:"ui-icon-document",position:"left",closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false},a.jgrid.nav,b||{});
return this.each(function(){var v={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},g=this,h,j,e;if(!(!g.grid||typeof m!="string")){if(a("#"+v.themodal).html()===null){if(typeof window.innerWidth!="undefined"){h=window.innerWidth;j=window.innerHeight;}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0){h=document.documentElement.clientWidth;
j=document.documentElement.clientHeight;}else{h=1024;j=768;}}createModal(v,"<div>"+b.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+g.p.id,jqModal:true,drag:true,resize:true,caption:b.alertcap,top:j/2-25,left:h/2-100,width:200,height:"auto",closeOnEscape:b.closeOnEscape},"","",true);
}h=1;if(b.cloneToTop&&g.p.toppager){h=2;}for(j=0;j<h;j++){var u=a("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),w,k;if(j===0){w=m;k=g.p.id;if(w==g.p.toppager){k+="_top";h=1;}}else{w=g.p.toppager;
k=g.p.id+"_top";}g.p.direction=="rtl"&&a(u).attr("dir","rtl").css("float","right");if(b.add){l=l||{};e=a("<td class='ui-pg-button ui-corner-all'></td>");a(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.addicon+"'></span>"+b.addtext+"</div>");a("tr",u).append(e);a(e,u).attr({title:b.addtitle||"",id:l.id||"add_"+k}).click(function(){a(this).hasClass("ui-state-disabled")||(typeof b.addfunc=="function"?b.addfunc():a(g).jqGrid("editGridRow","new",l));
return false;}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover");},function(){a(this).removeClass("ui-state-hover");});e=null;}if(b.edit){e=a("<td class='ui-pg-button ui-corner-all'></td>");f=f||{};a(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.editicon+"'></span>"+b.edittext+"</div>");
a("tr",u).append(e);a(e,u).attr({title:b.edittitle||"",id:f.id||"edit_"+k}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var p=g.p.selrow;if(p){typeof b.editfunc=="function"?b.editfunc(p):a(g).jqGrid("editGridRow",p,f);}else{viewModal("#"+v.themodal,{gbox:"#gbox_"+g.p.id,jqm:true});a("#jqg_alrt").focus();
}}return false;}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover");},function(){a(this).removeClass("ui-state-hover");});e=null;}if(b.view){e=a("<td class='ui-pg-button ui-corner-all'></td>");o=o||{};a(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.viewicon+"'></span>"+b.viewtext+"</div>");
a("tr",u).append(e);a(e,u).attr({title:b.viewtitle||"",id:o.id||"view_"+k}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var p=g.p.selrow;if(p){a(g).jqGrid("viewGridRow",p,o);}else{viewModal("#"+v.themodal,{gbox:"#gbox_"+g.p.id,jqm:true});a("#jqg_alrt").focus();}}return false;}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover");
},function(){a(this).removeClass("ui-state-hover");});e=null;}if(b.del){e=a("<td class='ui-pg-button ui-corner-all'></td>");n=n||{};a(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.delicon+"'></span>"+b.deltext+"</div>");a("tr",u).append(e);a(e,u).attr({title:b.deltitle||"",id:n.id||"del_"+k}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var p;
if(g.p.multiselect){p=g.p.selarrrow;if(p.length===0){p=null;}}else{p=g.p.selrow;}if(p){"function"==typeof b.delfunc?b.delfunc(p):a(g).jqGrid("delGridRow",p,n);}else{viewModal("#"+v.themodal,{gbox:"#gbox_"+g.p.id,jqm:true});a("#jqg_alrt").focus();}}return false;}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover");
},function(){a(this).removeClass("ui-state-hover");});e=null;}if(b.add||b.edit||b.del||b.view){a("tr",u).append("<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>");}if(b.search){e=a("<td class='ui-pg-button ui-corner-all'></td>");c=c||{};a(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.searchicon+"'></span>"+b.searchtext+"</div>");
a("tr",u).append(e);a(e,u).attr({title:b.searchtitle||"",id:c.id||"search_"+k}).click(function(){a(this).hasClass("ui-state-disabled")||a(g).jqGrid("searchGrid",c);return false;}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover");},function(){a(this).removeClass("ui-state-hover");
});e=null;}if(b.refresh){e=a("<td class='ui-pg-button ui-corner-all'></td>");a(e).append("<div class='ui-pg-div'><span class='ui-icon "+b.refreshicon+"'></span>"+b.refreshtext+"</div>");a("tr",u).append(e);a(e,u).attr({title:b.refreshtitle||"",id:"refresh_"+k}).click(function(){if(!a(this).hasClass("ui-state-disabled")){a.isFunction(b.beforeRefresh)&&b.beforeRefresh();
g.p.search=false;try{a("#fbox_"+g.p.id).searchFilter().reset({reload:false});a.isFunction(g.clearToolbar)&&g.clearToolbar(false);}catch(p){}switch(b.refreshstate){case"firstpage":a(g).trigger("reloadGrid",[{page:1}]);break;case"current":a(g).trigger("reloadGrid",[{current:true}]);break;}a.isFunction(b.afterRefresh)&&b.afterRefresh();
}return false;}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover");},function(){a(this).removeClass("ui-state-hover");});e=null;}e=a(".ui-jqgrid").css("font-size")||"11px";a("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+e+";visibility:hidden;' ></div>");
e=a(u).clone().appendTo("#testpg2").width();a("#testpg2").remove();a(w+"_"+b.position,w).append(u);if(g.p._nvtd){if(e>g.p._nvtd[0]){a(w+"_"+b.position,w).width(e);g.p._nvtd[0]=e;}g.p._nvtd[1]=e;}u=e=e=null;}}});},navButtonAdd:function(c,b){b=a.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},b||{});
return this.each(function(){if(this.grid){if(c.indexOf("#")!==0){c="#"+c;}var h=a(".navtable",c)[0],j=this;if(h){var k=a("<td></td>");b.buttonicon.toString().toUpperCase()=="NONE"?a(k).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+b.caption+"</div>"):a(k).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+b.buttonicon+"'></span>"+b.caption+"</div>");
b.id&&a(k).attr("id",b.id);if(b.position=="first"){h.rows[0].cells.length===0?a("tr",h).append(k):a("tr td:eq(0)",h).before(k);}else{a("tr",h).append(k);}a(k,h).attr("title",b.title||"").click(function(e){a(this).hasClass("ui-state-disabled")||a.isFunction(b.onClickButton)&&b.onClickButton.call(j,e);
return false;}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover");},function(){a(this).removeClass("ui-state-hover");});}}});},navSeparatorAdd:function(c,b){b=a.extend({sepclass:"ui-separator",sepcontent:""},b||{});return this.each(function(){if(this.grid){if(c.indexOf("#")!==0){c="#"+c;
}var g=a(".navtable",c)[0];if(g){var h="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+b.sepclass+"'></span>"+b.sepcontent+"</td>";a("tr",g).append(h);}}});},GridToForm:function(c,b){return this.each(function(){var h=this;if(h.grid){var j=a(h).jqGrid("getRowData",c);if(j){for(var k in j){a("[name="+k+"]",b).is("input:radio")||a("[name="+k+"]",b).is("input:checkbox")?a("[name="+k+"]",b).each(function(){a(this).val()==j[k]?a(this).attr("checked","checked"):a(this).attr("checked","");
}):a("[name="+k+"]",b).val(j[k]);}}}});},FormToGrid:function(h,b,c,f){return this.each(function(){var g=this;if(g.grid){c||(c="set");f||(f="first");var e=a(b).serializeArray(),k={};a.each(e,function(m,j){k[j.name]=j.value;});if(c=="add"){a(g).jqGrid("addRowData",h,k,f);}else{c=="set"&&a(g).jqGrid("setRowData",h,k);
}}});}});})(jQuery);jQuery.fn.searchFilter=function(e,f){function d(a,c,x){this.$=a;this.add=function(g){g==null?a.find(".ui-add-last").click():a.find(".sf:eq("+g+") .ui-add").click();return this;};this.del=function(g){g==null?a.find(".sf:last .ui-del").click():a.find(".sf:eq("+g+") .ui-del").click();
return this;};this.search=function(){a.find(".ui-search").click();return this;};this.reset=function(g){if(g===undefined){g=false;}a.find(".ui-reset").trigger("click",[g]);return this;};this.close=function(){a.find(".ui-closer").click();return this;};if(c!=null){function r(){jQuery(this).toggleClass("ui-state-hover");
return false;}function s(g){jQuery(this).toggleClass("ui-state-active",g.type=="mousedown");return false;}function l(g,h){return"<option value='"+g+"'>"+h+"</option>";}function C(h,j,g){return"<select class='"+h+"'"+(g?" style='display:none;'":"")+">"+j+"</select>";}function w(g,h){g=a.find("tr.sf td.data "+g);
g[0]!=null&&h(g);}function v(h,j){var g=a.find("tr.sf td.data "+h);g[0]!=null&&jQuery.each(j,function(){this.data!=null?g.bind(this.type,this.data,this.fn):g.bind(this.type,this.fn);});}var b=jQuery.extend({},jQuery.fn.searchFilter.defaults,x),m=-1,p="";jQuery.each(b.groupOps,function(){p+=l(this.op,this.text);
});p="<select name='groupOp'>"+p+"</select>";a.html("").addClass("ui-searchFilter").append("<div class='ui-widget-overlay' style='z-index: -1'>&#160;</div><table class='ui-widget-content ui-corner-all'><thead><tr><td colspan='5' class='ui-widget-header ui-corner-all' style='line-height: 18px;'><div class='ui-closer ui-state-default ui-corner-all ui-helper-clearfix' style='float: right;'><span class='ui-icon ui-icon-close'></span></div>"+b.windowTitle+"</td></tr></thead><tbody><tr class='sf'><td class='fields'></td><td class='ops'></td><td class='data'></td><td><div class='ui-del ui-state-default ui-corner-all'><span class='ui-icon ui-icon-minus'></span></div></td><td><div class='ui-add ui-state-default ui-corner-all'><span class='ui-icon ui-icon-plus'></span></div></td></tr><tr><td colspan='5' class='divider'><div>&#160;</div></td></tr></tbody><tfoot><tr><td colspan='3'><span class='ui-reset ui-state-default ui-corner-all' style='display: inline-block; float: left;'><span class='ui-icon ui-icon-arrowreturnthick-1-w' style='float: left;'></span><span style='line-height: 18px; padding: 0 7px 0 3px;'>"+b.resetText+"</span></span><span class='ui-search ui-state-default ui-corner-all' style='display: inline-block; float: right;'><span class='ui-icon ui-icon-search' style='float: left;'></span><span style='line-height: 18px; padding: 0 7px 0 3px;'>"+b.searchText+"</span></span><span class='matchText'>"+b.matchText+"</span> "+p+" <span class='rulesText'>"+b.rulesText+"</span></td><td>&#160;</td><td><div class='ui-add-last ui-state-default ui-corner-all'><span class='ui-icon ui-icon-plusthick'></span></div></td></tr></tfoot></table>");
var D=a.find("tr.sf"),z=D.find("td.fields"),E=D.find("td.ops"),n=D.find("td.data"),t="";jQuery.each(b.operators,function(){t+=l(this.op,this.text);});t=C("default",t,true);E.append(t);n.append("<input type='text' class='default' style='display:none;' />");var y="",F=false,o=false;jQuery.each(c,function(j){y+=l(this.itemval,this.text);
if(this.ops!=null){F=true;var k="";jQuery.each(this.ops,function(){k+=l(this.op,this.text);});k=C("field"+j,k,true);E.append(k);}if(this.dataUrl!=null){if(j>m){m=j;}o=true;var u=this.dataEvents,q=this.dataInit,g=this.buildSelect;jQuery.ajax(jQuery.extend({url:this.dataUrl,complete:function(A){A=g!=null?jQuery("<div />").append(g(A)):jQuery("<div />").append(A.responseText);
A.find("select").addClass("field"+j).hide();n.append(A.html());q&&w(".field"+j,q);u&&v(".field"+j,u);j==m&&a.find("tr.sf td.fields select[name='field']").change();}},b.ajaxSelectOptions));}else{if(this.dataValues!=null){o=true;var h="";jQuery.each(this.dataValues,function(){h+=l(this.value,this.text);
});h=C("field"+j,h,true);n.append(h);}else{if(this.dataEvents!=null||this.dataInit!=null){o=true;h="<input type='text' class='field"+j+"' />";n.append(h);}}}this.dataInit!=null&&j!=m&&w(".field"+j,this.dataInit);this.dataEvents!=null&&j!=m&&v(".field"+j,this.dataEvents);});y="<select name='field'>"+y+"</select>";
z.append(y);c=z.find("select[name='field']");F?c.change(function(g){var h=g.target.selectedIndex;g=jQuery(g.target).parents("tr.sf").find("td.ops");g.find("select").removeAttr("name").hide();h=g.find(".field"+h);if(h[0]==null){h=g.find(".default");}h.attr("name","op").show();return false;}):E.find(".default").attr("name","op").show();
o?c.change(function(g){var h=g.target.selectedIndex;g=jQuery(g.target).parents("tr.sf").find("td.data");g.find("select,input").removeClass("vdata").hide();h=g.find(".field"+h);if(h[0]==null){h=g.find(".default");}h.show().addClass("vdata");return false;}):n.find(".default").show().addClass("vdata");if(F||o){c.change();
}a.find(".ui-state-default").hover(r,r).mousedown(s).mouseup(s);a.find(".ui-closer").click(function(){b.onClose(jQuery(a.selector));return false;});a.find(".ui-del").click(function(g){g=jQuery(g.target).parents(".sf");if(g.siblings(".sf").length>0){b.datepickerFix===true&&jQuery.fn.datepicker!==undefined&&g.find(".hasDatepicker").datepicker("destroy");
g.remove();}else{g.find("select[name='field']")[0].selectedIndex=0;g.find("select[name='op']")[0].selectedIndex=0;g.find(".data input").val("");g.find(".data select").each(function(){this.selectedIndex=0;});g.find("select[name='field']").change(function(h){h.stopPropagation();});}return false;});a.find(".ui-add").click(function(h){h=jQuery(h.target).parents(".sf");
var j=h.clone(true).insertAfter(h);j.find(".ui-state-default").removeClass("ui-state-hover ui-state-active");if(b.clone){j.find("select[name='field']")[0].selectedIndex=h.find("select[name='field']")[0].selectedIndex;if(j.find("select[name='op']")[0]!=null){j.find("select[name='op']").focus()[0].selectedIndex=h.find("select[name='op']")[0].selectedIndex;
}var g=j.find("select.vdata");if(g[0]!=null){g[0].selectedIndex=h.find("select.vdata")[0].selectedIndex;}}else{j.find(".data input").val("");j.find("select[name='field']").focus();}b.datepickerFix===true&&jQuery.fn.datepicker!==undefined&&h.find(".hasDatepicker").each(function(){var k=jQuery.data(this,"datepicker").settings;
j.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(k);});j.find("select[name='field']").change(function(k){k.stopPropagation();});return false;});a.find(".ui-search").click(function(){var h=jQuery(a.selector),j,g=h.find("select[name='groupOp'] :selected").val();j=b.stringResult?'{"groupOp":"'+g+'","rules":[':{groupOp:g,rules:[]};
h.find(".sf").each(function(q){var u=jQuery(this).find("select[name='field'] :selected").val(),k=jQuery(this).find("select[name='op'] :selected").val(),A=jQuery(this).find("input.vdata,select.vdata :selected").val();A+="";A=A.replace(/\\/g,"\\\\").replace(/\"/g,'\\"');if(b.stringResult){if(q>0){j+=",";
}j+='{"field":"'+u+'",';j+='"op":"'+k+'",';j+='"data":"'+A+'"}';}else{j.rules.push({field:u,op:k,data:A});}});if(b.stringResult){j+="]}";}b.onSearch(j);return false;});a.find(".ui-reset").click(function(g,h){g=jQuery(a.selector);g.find(".ui-del").click();g.find("select[name='groupOp']")[0].selectedIndex=0;
b.onReset(h);return false;});a.find(".ui-add-last").click(function(){var g=jQuery(a.selector+" .sf:last"),h=g.clone(true).insertAfter(g);h.find(".ui-state-default").removeClass("ui-state-hover ui-state-active");h.find(".data input").val("");h.find("select[name='field']").focus();b.datepickerFix===true&&jQuery.fn.datepicker!==undefined&&g.find(".hasDatepicker").each(function(){var j=jQuery.data(this,"datepicker").settings;
h.find("#"+this.id).unbind().removeAttr("id").removeClass("hasDatepicker").datepicker(j);});h.find("select[name='field']").change(function(j){j.stopPropagation();});return false;});this.setGroupOp=function(j){selDOMobj=a.find("select[name='groupOp']")[0];var k={},h=selDOMobj.options.length,g;for(g=0;
g<h;g++){k[selDOMobj.options[g].value]=g;}selDOMobj.selectedIndex=k[j];jQuery(selDOMobj).change(function(q){q.stopPropagation();});};this.setFilter=function(H){var I=H.sfref;H=H.filter;var g=[],J,h,k,j,q={};selDOMobj=I.find("select[name='field']")[0];J=0;for(k=selDOMobj.options.length;J<k;J++){q[selDOMobj.options[J].value]={index:J,ops:{}};
g.push(selDOMobj.options[J].value);}J=0;for(k=g.length;J<k;J++){if(selDOMobj=I.find(".ops > select[class='field"+J+"']")[0]){h=0;for(j=selDOMobj.options.length;h<j;h++){q[g[J]].ops[selDOMobj.options[h].value]=h;}}if(selDOMobj=I.find(".data > select[class='field"+J+"']")[0]){q[g[J]].data={};h=0;for(j=selDOMobj.options.length;
h<j;h++){q[g[J]].data[selDOMobj.options[h].value]=h;}}}var G,B,u,A;g=H.field;if(q[g]){G=q[g].index;}if(G!=null){B=q[g].ops[H.op];if(B===undefined){J=0;for(k=x.operators.length;J<k;J++){if(x.operators[J].op==H.op){B=J;break;}}}u=H.data;A=q[g].data==null?-1:q[g].data[u];}if(G!=null&&B!=null&&A!=null){I.find("select[name='field']")[0].selectedIndex=G;
I.find("select[name='field']").change();I.find("select[name='op']")[0].selectedIndex=B;I.find("input.vdata").val(u);if(I=I.find("select.vdata")[0]){I.selectedIndex=A;}return true;}else{return false;}};}}return new d(this,e,f);};jQuery.fn.searchFilter.version="1.2.9";jQuery.fn.searchFilter.defaults={clone:true,datepickerFix:true,onReset:function(b){alert("Reset Clicked. Data Returned: "+b);
},onSearch:function(b){alert("Search Clicked. Data Returned: "+b);},onClose:function(b){b.hide();},groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],operators:[{op:"eq",text:"is equal to"},{op:"ne",text:"is not equal to"},{op:"lt",text:"is less than"},{op:"le",text:"is less or equal to"},{op:"gt",text:"is greater than"},{op:"ge",text:"is greater or equal to"},{op:"in",text:"is in"},{op:"ni",text:"is not in"},{op:"bw",text:"begins with"},{op:"bn",text:"does not begin with"},{op:"ew",text:"ends with"},{op:"en",text:"does not end with"},{op:"cn",text:"contains"},{op:"nc",text:"does not contain"}],matchText:"match",rulesText:"rules",resetText:"Reset",searchText:"Search",stringResult:true,windowTitle:"Search Rules",ajaxSelectOptions:{}};
(function(a){a.jgrid.extend({editRow:function(f,c,o,q,r,s,b,d,n){return this.each(function(){var p=this,j,l,m=0,e=null,g={},k,h;if(p.grid){k=a(p).jqGrid("getInd",f,true);if(k!==false){if((a(k).attr("editable")||"0")=="0"&&!a(k).hasClass("not-editable-row")){h=p.p.colModel;a("td",k).each(function(v){j=h[v].name;
var y=p.p.treeGrid===true&&j==p.p.ExpandColumn;if(y){l=a("span:first",this).html();}else{try{l=a.unformat(this,{rowId:f,colModel:h[v]},v);}catch(z){l=a(this).html();}}if(j!="cb"&&j!="subgrid"&&j!="rn"){if(p.p.autoencode){l=a.jgrid.htmlDecode(l);}g[j]=l;if(h[v].editable===true){if(e===null){e=v;}y?a("span:first",this).html(""):a(this).html("");
var u=a.extend({},h[v].editoptions||{},{id:f+"_"+j,name:j});if(!h[v].edittype){h[v].edittype="text";}u=createEl(h[v].edittype,u,l,true,a.extend({},a.jgrid.ajaxOptions,p.p.ajaxSelectOptions||{}));a(u).addClass("editable ui-jqgrid-celledit");y?a("span:first",this).append(u):a(this).append(u);h[v].edittype=="select"&&h[v].editoptions.multiple===true&&a.browser.msie&&a(u).width(a(u).width());
m++;}}});if(m>0){g.id=f;p.p.savedRow.push(g);a(k).attr("editable","1");a("td:eq("+e+") input",k).focus();c===true&&a(k).bind("keydown",function(t){t.keyCode===27&&a(p).jqGrid("restoreRow",f,n);if(t.keyCode===13){if(t.target.tagName=="TEXTAREA"){return true;}a(p).jqGrid("saveRow",f,q,r,s,b,d,n);return false;
}t.stopPropagation();});a.isFunction(o)&&o.call(p,f);}}}}});},saveRow:function(k,b,o,d,l,m,n){return this.each(function(){var t=this,v,q={},e={},g,f,h,j;if(t.grid){j=a(t).jqGrid("getInd",k,true);if(j!==false){g=a(j).attr("editable");o=o?o:t.p.editurl;if(g==="1"){var C;a("td",j).each(function(r){C=t.p.colModel[r];
v=C.name;if(v!="cb"&&v!="subgrid"&&C.editable===true&&v!="rn"){switch(C.edittype){case"checkbox":var u=["Yes","No"];if(C.editoptions){u=C.editoptions.value.split(":");}q[v]=a("input",this).attr("checked")?u[0]:u[1];break;case"text":case"password":case"textarea":case"button":q[v]=a("input, textarea",this).val();
break;case"select":if(C.editoptions.multiple){u=a("select",this);var s=[];q[v]=a(u).val();q[v]=q[v]?q[v].join(","):"";a("select > option:selected",this).each(function(x,y){s[x]=a(y).text();});e[v]=s.join(",");}else{q[v]=a("select>option:selected",this).val();e[v]=a("select>option:selected",this).text();
}if(C.formatter&&C.formatter=="select"){e={};}break;case"custom":try{if(C.editoptions&&a.isFunction(C.editoptions.custom_value)){q[v]=C.editoptions.custom_value.call(t,a(".customelement",this),"get");if(q[v]===undefined){throw"e2";}}else{throw"e1";}}catch(w){w=="e1"&&info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);
w=="e2"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+a.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,w.message,jQuery.jgrid.edit.bClose);}break;}h=checkValues(q[v],r,t);if(h[0]===false){h[1]=q[v]+" "+h[1];return false;}if(t.p.autoencode){q[v]=a.jgrid.htmlEncode(q[v]);
}}});if(h[0]===false){try{var B=findPos(a("#"+a.jgrid.jqID(k),t.grid.bDiv)[0]);info_dialog(a.jgrid.errors.errcap,h[1],a.jgrid.edit.bClose,{left:B[0],top:B[1]});}catch(c){alert(h[1]);}}else{if(q){var p;B=t.p.prmNames;p=B.oper;g=B.id;q[p]=B.editoper;q[g]=k;if(typeof t.p.inlineData=="undefined"){t.p.inlineData={};
}if(typeof d=="undefined"){d={};}q=a.extend({},q,t.p.inlineData,d);}if(o=="clientArray"){q=a.extend({},q,e);t.p.autoencode&&a.each(q,function(s,r){q[s]=a.jgrid.htmlDecode(r);});g=a(t).jqGrid("setRowData",k,q);a(j).attr("editable","0");for(B=0;B<t.p.savedRow.length;B++){if(t.p.savedRow[B].id==k){f=B;break;
}}f>=0&&t.p.savedRow.splice(f,1);a.isFunction(l)&&l.call(t,k,g);}else{a("#lui_"+t.p.id).show();a.ajax(a.extend({url:o,data:a.isFunction(t.p.serializeRowData)?t.p.serializeRowData.call(t,q):q,type:"POST",complete:function(s,r){a("#lui_"+t.p.id).hide();if(r==="success"){if((a.isFunction(b)?b.call(t,s):true)===true){t.p.autoencode&&a.each(q,function(w,u){q[w]=a.jgrid.htmlDecode(u);
});q=a.extend({},q,e);a(t).jqGrid("setRowData",k,q);a(j).attr("editable","0");for(r=0;r<t.p.savedRow.length;r++){if(t.p.savedRow[r].id==k){f=r;break;}}f>=0&&t.p.savedRow.splice(f,1);a.isFunction(l)&&l.call(t,k,s);}else{a.isFunction(m)&&m.call(t,k,s,r);a(t).jqGrid("restoreRow",k,n);}}},error:function(s,r){a("#lui_"+t.p.id).hide();
a.isFunction(m)?m.call(t,k,s,r):alert("Error Row: "+k+" Result: "+s.status+":"+s.statusText+" Status: "+r);a(t).jqGrid("restoreRow",k,n);}},a.jgrid.ajaxOptions,t.p.ajaxRowOptions||{}));}a(j).unbind("keydown");}}}}});},restoreRow:function(d,b){return this.each(function(){var o=this,c,l,m={};if(o.grid){l=a(o).jqGrid("getInd",d,true);
if(l!==false){for(var n=0;n<o.p.savedRow.length;n++){if(o.p.savedRow[n].id==d){c=n;break;}}if(c>=0){if(a.isFunction(a.fn.datepicker)){try{a("input.hasDatepicker","#"+a.jgrid.jqID(l.id)).datepicker("hide");}catch(k){}}a.each(o.p.colModel,function(){if(this.editable===true&&this.name in o.p.savedRow[c]){m[this.name]=o.p.savedRow[c][this.name];
}});a(o).jqGrid("setRowData",d,m);a(l).attr("editable","0").unbind("keydown");o.p.savedRow.splice(c,1);}a.isFunction(b)&&b.call(o,d);}}});}});})(jQuery);(function(b){b.jgrid.extend({editCell:function(d,e,a){return this.each(function(){var h=this,c,k,q;if(!(!h.grid||h.p.cellEdit!==true)){e=parseInt(e,10);
h.p.selrow=h.rows[d].id;h.p.knv||b(h).jqGrid("GridNav");if(h.p.savedRow.length>0){if(a===true){if(d==h.p.iRow&&e==h.p.iCol){return;}}b(h).jqGrid("saveCell",h.p.savedRow[0].id,h.p.savedRow[0].ic);}else{window.setTimeout(function(){b("#"+h.p.knv).attr("tabindex","-1").focus();},0);}c=h.p.colModel[e].name;
if(!(c=="subgrid"||c=="cb"||c=="rn")){q=b("td:eq("+e+")",h.rows[d]);if(h.p.colModel[e].editable===true&&a===true&&!q.hasClass("not-editable-cell")){if(parseInt(h.p.iCol,10)>=0&&parseInt(h.p.iRow,10)>=0){b("td:eq("+h.p.iCol+")",h.rows[h.p.iRow]).removeClass("edit-cell ui-state-highlight");b(h.rows[h.p.iRow]).removeClass("selected-row ui-state-hover");
}b(q).addClass("edit-cell ui-state-highlight");b(h.rows[d]).addClass("selected-row ui-state-hover");try{k=b.unformat(q,{rowId:h.rows[d].id,colModel:h.p.colModel[e]},e);}catch(j){k=b(q).html();}if(h.p.autoencode){k=b.jgrid.htmlDecode(k);}if(!h.p.colModel[e].edittype){h.p.colModel[e].edittype="text";}h.p.savedRow.push({id:d,ic:e,name:c,v:k});
if(b.isFunction(h.p.formatCell)){var g=h.p.formatCell.call(h,h.rows[d].id,c,k,d,e);if(g!==undefined){k=g;}}g=b.extend({},h.p.colModel[e].editoptions||{},{id:d+"_"+c,name:c});var f=createEl(h.p.colModel[e].edittype,g,k,true,b.extend({},b.jgrid.ajaxOptions,h.p.ajaxSelectOptions||{}));b.isFunction(h.p.beforeEditCell)&&h.p.beforeEditCell.call(h,h.rows[d].id,c,k,d,e);
b(q).html("").append(f).attr("tabindex","0");window.setTimeout(function(){b(f).focus();},0);b("input, select, textarea",q).bind("keydown",function(l){if(l.keyCode===27){if(b("input.hasDatepicker",q).length>0){b(".ui-datepicker").is(":hidden")?b(h).jqGrid("restoreCell",d,e):b("input.hasDatepicker",q).datepicker("hide");
}else{b(h).jqGrid("restoreCell",d,e);}}l.keyCode===13&&b(h).jqGrid("saveCell",d,e);if(l.keyCode==9){if(h.grid.hDiv.loading){return false;}else{l.shiftKey?b(h).jqGrid("prevCell",d,e):b(h).jqGrid("nextCell",d,e);}}l.stopPropagation();});b.isFunction(h.p.afterEditCell)&&h.p.afterEditCell.call(h,h.rows[d].id,c,k,d,e);
}else{if(parseInt(h.p.iCol,10)>=0&&parseInt(h.p.iRow,10)>=0){b("td:eq("+h.p.iCol+")",h.rows[h.p.iRow]).removeClass("edit-cell ui-state-highlight");b(h.rows[h.p.iRow]).removeClass("selected-row ui-state-hover");}q.addClass("edit-cell ui-state-highlight");b(h.rows[d]).addClass("selected-row ui-state-hover");
if(b.isFunction(h.p.onSelectCell)){k=q.html().replace(/\&#160\;/ig,"");h.p.onSelectCell.call(h,h.rows[d].id,c,k,d,e);}}h.p.iCol=e;h.p.iRow=d;}}});},saveCell:function(d,a){return this.each(function(){var f=this,h;if(!(!f.grid||f.p.cellEdit!==true)){h=f.p.savedRow.length>=1?0:null;if(h!==null){var q=b("td:eq("+a+")",f.rows[d]),j,o,t=f.p.colModel[a],s=t.name,r=b.jgrid.jqID(s);
switch(t.edittype){case"select":if(t.editoptions.multiple){r=b("#"+d+"_"+r,f.rows[d]);var F=[];if(j=b(r).val()){j.join(",");}else{j="";}b("option:selected",r).each(function(m,e){F[m]=b(e).text();});o=F.join(",");}else{j=b("#"+d+"_"+r+">option:selected",f.rows[d]).val();o=b("#"+d+"_"+r+">option:selected",f.rows[d]).text();
}if(t.formatter){o=j;}break;case"checkbox":var g=["Yes","No"];if(t.editoptions){g=t.editoptions.value.split(":");}o=j=b("#"+d+"_"+r,f.rows[d]).attr("checked")?g[0]:g[1];break;case"password":case"text":case"textarea":case"button":o=j=b("#"+d+"_"+r,f.rows[d]).val();break;case"custom":try{if(t.editoptions&&b.isFunction(t.editoptions.custom_value)){j=t.editoptions.custom_value.call(f,b(".customelement",q),"get");
if(j===undefined){throw"e2";}else{o=j;}}else{throw"e1";}}catch(l){l=="e1"&&info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+b.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);l=="e2"?info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+b.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):info_dialog(jQuery.jgrid.errors.errcap,l.message,jQuery.jgrid.edit.bClose);
}break;}if(o!=f.p.savedRow[h].v){if(b.isFunction(f.p.beforeSaveCell)){if(h=f.p.beforeSaveCell.call(f,f.rows[d].id,s,j,d,a)){o=j=h;}}var n=checkValues(j,a,f);if(n[0]===true){h={};if(b.isFunction(f.p.beforeSubmitCell)){(h=f.p.beforeSubmitCell.call(f,f.rows[d].id,s,j,d,a))||(h={});}b("input.hasDatepicker",q).length>0&&b("input.hasDatepicker",q).datepicker("hide");
if(f.p.cellsubmit=="remote"){if(f.p.cellurl){var k={};if(f.p.autoencode){j=b.jgrid.htmlEncode(j);}k[s]=j;g=f.p.prmNames;t=g.id;r=g.oper;k[t]=f.rows[d].id;k[r]=g.editoper;k=b.extend(h,k);b("#lui_"+f.p.id).show();f.grid.hDiv.loading=true;b.ajax(b.extend({url:f.p.cellurl,data:b.isFunction(f.p.serializeCellData)?f.p.serializeCellData.call(f,k):k,type:"POST",complete:function(m,e){b("#lui_"+f.p.id).hide();
f.grid.hDiv.loading=false;if(e=="success"){if(b.isFunction(f.p.afterSubmitCell)){m=f.p.afterSubmitCell.call(f,m,k.id,s,j,d,a);if(m[0]===true){b(q).empty();b(f).jqGrid("setCell",f.rows[d].id,a,o,false,false,true);b(q).addClass("dirty-cell");b(f.rows[d]).addClass("edited");b.isFunction(f.p.afterSaveCell)&&f.p.afterSaveCell.call(f,f.rows[d].id,s,j,d,a);
f.p.savedRow.splice(0,1);}else{info_dialog(b.jgrid.errors.errcap,m[1],b.jgrid.edit.bClose);b(f).jqGrid("restoreCell",d,a);}}else{b(q).empty();b(f).jqGrid("setCell",f.rows[d].id,a,o,false,false,true);b(q).addClass("dirty-cell");b(f.rows[d]).addClass("edited");b.isFunction(f.p.afterSaveCell)&&f.p.afterSaveCell.call(f,f.rows[d].id,s,j,d,a);
f.p.savedRow.splice(0,1);}}},error:function(m,e){b("#lui_"+f.p.id).hide();f.grid.hDiv.loading=false;b.isFunction(f.p.errorCell)?f.p.errorCell.call(f,m,e):info_dialog(b.jgrid.errors.errcap,m.status+" : "+m.statusText+"<br/>"+e,b.jgrid.edit.bClose);b(f).jqGrid("restoreCell",d,a);}},b.jgrid.ajaxOptions,f.p.ajaxCellOptions||{}));
}else{try{info_dialog(b.jgrid.errors.errcap,b.jgrid.errors.nourl,b.jgrid.edit.bClose);b(f).jqGrid("restoreCell",d,a);}catch(G){}}}if(f.p.cellsubmit=="clientArray"){b(q).empty();b(f).jqGrid("setCell",f.rows[d].id,a,o,false,false,true);b(q).addClass("dirty-cell");b(f.rows[d]).addClass("edited");b.isFunction(f.p.afterSaveCell)&&f.p.afterSaveCell.call(f,f.rows[d].id,s,j,d,a);
f.p.savedRow.splice(0,1);}}else{try{window.setTimeout(function(){info_dialog(b.jgrid.errors.errcap,j+" "+n[1],b.jgrid.edit.bClose);},100);b(f).jqGrid("restoreCell",d,a);}catch(c){}}}else{b(f).jqGrid("restoreCell",d,a);}}b.browser.opera?b("#"+f.p.knv).attr("tabindex","-1").focus():window.setTimeout(function(){b("#"+f.p.knv).attr("tabindex","-1").focus();
},0);}});},restoreCell:function(d,a){return this.each(function(){var k=this,c;if(!(!k.grid||k.p.cellEdit!==true)){c=k.p.savedRow.length>=1?0:null;if(c!==null){var h=b("td:eq("+a+")",k.rows[d]);if(b.isFunction(b.fn.datepicker)){try{b("input.hasDatepicker",h).datepicker("hide");}catch(f){}}b(h).empty().attr("tabindex","-1");
b(k).jqGrid("setCell",k.rows[d].id,a,k.p.savedRow[c].v,false,false,true);b.isFunction(k.p.afterRestoreCell)&&k.p.afterRestoreCell.call(k,k.rows[d].id,k.p.savedRow[c].v,d,a);k.p.savedRow.splice(0,1);}window.setTimeout(function(){b("#"+k.p.knv).attr("tabindex","-1").focus();},0);}});},nextCell:function(d,a){return this.each(function(){var h=this,c=false;
if(!(!h.grid||h.p.cellEdit!==true)){for(var g=a+1;g<h.p.colModel.length;g++){if(h.p.colModel[g].editable===true){c=g;break;}}if(c!==false){b(h).jqGrid("editCell",d,c,true);}else{h.p.savedRow.length>0&&b(h).jqGrid("saveCell",d,a);}}});},prevCell:function(d,a){return this.each(function(){var h=this,c=false;
if(!(!h.grid||h.p.cellEdit!==true)){for(var g=a-1;g>=0;g--){if(h.p.colModel[g].editable===true){c=g;break;}}if(c!==false){b(h).jqGrid("editCell",d,c,true);}else{h.p.savedRow.length>0&&b(h).jqGrid("saveCell",d,a);}}});},GridNav:function(){return this.each(function(){function d(g,n,l){if(l.substr(0,1)=="v"){var j=b(c.grid.bDiv)[0].clientHeight,q=b(c.grid.bDiv)[0].scrollTop,k=c.rows[g].offsetTop+c.rows[g].clientHeight,m=c.rows[g].offsetTop;
if(l=="vd"){if(k>=j){b(c.grid.bDiv)[0].scrollTop=b(c.grid.bDiv)[0].scrollTop+c.rows[g].clientHeight;}}if(l=="vu"){if(m<q){b(c.grid.bDiv)[0].scrollTop=b(c.grid.bDiv)[0].scrollTop-c.rows[g].clientHeight;}}}if(l=="h"){l=b(c.grid.bDiv)[0].clientWidth;j=b(c.grid.bDiv)[0].scrollLeft;q=c.rows[g].cells[n].offsetLeft;
if(c.rows[g].cells[n].offsetLeft+c.rows[g].cells[n].clientWidth>=l+parseInt(j,10)){b(c.grid.bDiv)[0].scrollLeft=b(c.grid.bDiv)[0].scrollLeft+c.rows[g].cells[n].clientWidth;}else{if(q<j){b(c.grid.bDiv)[0].scrollLeft=b(c.grid.bDiv)[0].scrollLeft-c.rows[g].cells[n].clientWidth;}}}}function e(g,l){var k,j;
if(l=="lft"){k=g+1;for(j=g;j>=0;j--){if(c.p.colModel[j].hidden!==true){k=j;break;}}}if(l=="rgt"){k=g-1;for(j=g;j<c.p.colModel.length;j++){if(c.p.colModel[j].hidden!==true){k=j;break;}}}return k;}var c=this;if(!(!c.grid||c.p.cellEdit!==true)){c.p.knv=c.p.id+"_kn";var a=b("<span style='width:0px;height:0px;background-color:black;' tabindex='0'><span tabindex='-1' style='width:0px;height:0px;background-color:grey' id='"+c.p.knv+"'></span></span>"),h,f;
b(a).insertBefore(c.grid.cDiv);b("#"+c.p.knv).focus().keydown(function(g){f=g.keyCode;if(c.p.direction=="rtl"){if(f==37){f=39;}else{if(f==39){f=37;}}}switch(f){case 38:if(c.p.iRow-1>0){d(c.p.iRow-1,c.p.iCol,"vu");b(c).jqGrid("editCell",c.p.iRow-1,c.p.iCol,false);}break;case 40:if(c.p.iRow+1<=c.rows.length-1){d(c.p.iRow+1,c.p.iCol,"vd");
b(c).jqGrid("editCell",c.p.iRow+1,c.p.iCol,false);}break;case 37:if(c.p.iCol-1>=0){h=e(c.p.iCol-1,"lft");d(c.p.iRow,h,"h");b(c).jqGrid("editCell",c.p.iRow,h,false);}break;case 39:if(c.p.iCol+1<=c.p.colModel.length-1){h=e(c.p.iCol+1,"rgt");d(c.p.iRow,h,"h");b(c).jqGrid("editCell",c.p.iRow,h,false);}break;
case 13:parseInt(c.p.iCol,10)>=0&&parseInt(c.p.iRow,10)>=0&&b(c).jqGrid("editCell",c.p.iRow,c.p.iCol,true);break;}return false;});}});},getChangedCells:function(d){var a=[];d||(d="all");this.each(function(){var f=this,c;!f.grid||f.p.cellEdit!==true||b(f.rows).each(function(h){var e={};if(b(this).hasClass("edited")){b("td",this).each(function(g){c=f.p.colModel[g].name;
if(c!=="cb"&&c!=="subgrid"){if(d=="dirty"){if(b(this).hasClass("dirty-cell")){try{e[c]=b.unformat(this,{rowId:f.rows[h].id,colModel:f.p.colModel[g]},g);}catch(k){e[c]=b.jgrid.htmlDecode(b(this).html());}}}else{try{e[c]=b.unformat(this,{rowId:f.rows[h].id,colModel:f.p.colModel[g]},g);}catch(j){e[c]=b.jgrid.htmlDecode(b(this).html());
}}}});e.id=this.id;a.push(e);}});});return a;}});})(jQuery);(function(c){c.fn.jqDrag=function(a){return l(this,a,"d");};c.fn.jqResize=function(a,e){return l(this,a,"r",e);};c.jqDnR={dnr:{},e:0,drag:function(a){if(o.k=="d"){b.css({left:o.X+a.pageX-o.pX,top:o.Y+a.pageY-o.pY});}else{b.css({width:Math.max(a.pageX-o.pX+o.W,0),height:Math.max(a.pageY-o.pY+o.H,0)});
M1&&d.css({width:Math.max(a.pageX-M1.pX+M1.W,0),height:Math.max(a.pageY-M1.pY+M1.H,0)});}return false;},stop:function(){c(document).unbind("mousemove",f.drag).unbind("mouseup",f.stop);}};var f=c.jqDnR,o=f.dnr,b=f.e,d,l=function(h,g,e,a){return h.each(function(){g=g?c(g,h):h;g.bind("mousedown",{e:h,k:e},function(t){var m=t.data,j={};
b=m.e;d=a?c(a):false;if(b.css("position")!="relative"){try{b.position(j);}catch(n){}}o={X:j.left||k("left")||0,Y:j.top||k("top")||0,W:k("width")||b[0].scrollWidth||0,H:k("height")||b[0].scrollHeight||0,pX:t.pageX,pY:t.pageY,k:m.k};M1=d&&m.k!="d"?{X:j.left||f1("left")||0,Y:j.top||f1("top")||0,W:d[0].offsetWidth||f1("width")||0,H:d[0].offsetHeight||f1("height")||0,pX:t.pageX,pY:t.pageY,k:m.k}:false;
try{c("input.hasDatepicker",b[0]).datepicker("hide");}catch(p){}c(document).mousemove(c.jqDnR.drag).mouseup(c.jqDnR.stop);return false;});});},k=function(a){return parseInt(b.css(a))||false;};f1=function(a){return parseInt(d.css(a))||false;};})(jQuery);(function(b){b.jgrid.extend({setSubGrid:function(){return this.each(function(){var a=this;
a.p.colNames.unshift("");a.p.colModel.unshift({name:"subgrid",width:b.browser.safari?a.p.subGridWidth+a.p.cellLayout:a.p.subGridWidth,sortable:false,resizable:false,hidedlg:true,search:false,fixed:true});a=a.p.subGridModel;if(a[0]){a[0].align=b.extend([],a[0].align||[]);for(var c=0;c<a[0].name.length;
c++){a[0].align[c]=a[0].align[c]||"left";}}});},addSubGridCell:function(k,c){var a="",e,j;this.each(function(){a=this.formatCol(k,c);e=this.p.gridview;j=this.p.id;});return e===false?'<td role="grid" aria-describedby="'+j+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+a+"><a href='javascript:void(0);'><span class='ui-icon ui-icon-plus'></span></a></td>":'<td role="grid" aria-describedby="'+j+'_subgrid" '+a+"></td>";
},addSubGrid:function(a,c){return this.each(function(){var p=this;if(p.grid){var s=function(g,e,f){e=b("<td align='"+p.p.subGridModel[0].align[f]+"'></td>").html(e);b(g).append(e);},t=function(h,l){var g,f,j,k=b("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),e=b("<tr></tr>");
for(f=0;f<p.p.subGridModel[0].name.length;f++){g=b("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+p.p.direction+"'></th>");b(g).html(p.p.subGridModel[0].name[f]);b(g).width(p.p.subGridModel[0].width[f]);b(e).append(g);}b(k).append(e);if(h){j=p.p.xmlReader.subgrid;b(j.root+" "+j.row,h).each(function(){e=b("<tr class='ui-widget-content ui-subtblcell'></tr>");
if(j.repeatitems===true){b(j.cell,this).each(function(y){s(e,b(this).text()||"&#160;",y);});}else{var q=p.p.subGridModel[0].mapping||p.p.subGridModel[0].name;if(q){for(f=0;f<q.length;f++){s(e,b(q[f],this).text()||"&#160;",f);}}}b(k).append(e);});}h=b("table:first",p.grid.bDiv).attr("id")+"_";b("#"+h+l).append(k);
p.grid.hDiv.loading=false;b("#load_"+p.p.id).hide();return false;},x=function(q,f){var l,k,y,e,g=b("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),h=b("<tr></tr>");for(k=0;k<p.p.subGridModel[0].name.length;k++){l=b("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+p.p.direction+"'></th>");
b(l).html(p.p.subGridModel[0].name[k]);b(l).width(p.p.subGridModel[0].width[k]);b(h).append(l);}b(g).append(h);if(q){l=p.p.jsonReader.subgrid;q=q[l.root];if(typeof q!=="undefined"){for(k=0;k<q.length;k++){y=q[k];h=b("<tr class='ui-widget-content ui-subtblcell'></tr>");if(l.repeatitems===true){if(l.cell){y=y[l.cell];
}for(e=0;e<y.length;e++){s(h,y[e]||"&#160;",e);}}else{var j=p.p.subGridModel[0].mapping||p.p.subGridModel[0].name;if(j.length){for(e=0;e<j.length;e++){s(h,y[j[e]]||"&#160;",e);}}}b(g).append(h);}}}k=b("table:first",p.grid.bDiv).attr("id")+"_";b("#"+k+f).append(g);p.grid.hDiv.loading=false;b("#load_"+p.p.id).hide();
return false;},o=function(h){var e,g,f,j;e=b(h).attr("id");g={nd_:(new Date).getTime()};g[p.p.prmNames.subgridid]=e;if(!p.p.subGridModel[0]){return false;}if(p.p.subGridModel[0].params){for(j=0;j<p.p.subGridModel[0].params.length;j++){for(f=0;f<p.p.colModel.length;f++){if(p.p.colModel[f].name==p.p.subGridModel[0].params[j]){g[p.p.colModel[f].name]=b("td:eq("+f+")",h).text().replace(/\&#160\;/ig,"");
}}}}if(!p.grid.hDiv.loading){p.grid.hDiv.loading=true;b("#load_"+p.p.id).show();if(!p.p.subgridtype){p.p.subgridtype=p.p.datatype;}if(b.isFunction(p.p.subgridtype)){p.p.subgridtype.call(p,g);}else{p.p.subgridtype=p.p.subgridtype.toLowerCase();}switch(p.p.subgridtype){case"xml":case"json":b.ajax(b.extend({type:p.p.mtype,url:p.p.subGridUrl,dataType:p.p.subgridtype,data:b.isFunction(p.p.serializeSubGridData)?p.p.serializeSubGridData(p,g):g,complete:function(k){p.p.subgridtype=="xml"?t(k.responseXML,e):x(b.jgrid.parse(k.responseText),e);
}},b.jgrid.ajaxOptions,p.p.ajaxSubgridOptions||{}));break;}}return false;},w,r,m,d,v,n,u;b("td:eq("+c+")",a).click(function(){if(b(this).hasClass("sgcollapsed")){m=p.p.id;w=b(this).parent();d=c>=1?"<td colspan='"+c+"'>&#160;</td>":"";r=b(w).attr("id");u=true;if(b.isFunction(p.p.subGridBeforeExpand)){u=p.p.subGridBeforeExpand.call(p,m+"_"+r,r);
}if(u===false){return false;}v=0;b.each(p.p.colModel,function(){if(this.hidden===true||this.name=="rn"||this.name=="cb"){v++;}});n="<tr role='row' class='ui-subgrid'>"+d+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon ui-icon-carat-1-sw'/></td><td colspan='"+parseInt(p.p.colNames.length-1-v,10)+"' class='ui-widget-content subgrid-data'><div id="+m+"_"+r+" class='tablediv'>";
b(this).parent().after(n+"</div></td></tr>");b.isFunction(p.p.subGridRowExpanded)?p.p.subGridRowExpanded.call(p,m+"_"+r,r):o(w);b(this).html("<a href='javascript:void(0);'><span class='ui-icon ui-icon-minus'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");}else{if(b(this).hasClass("sgexpanded")){u=true;
if(b.isFunction(p.p.subGridRowColapsed)){w=b(this).parent();r=b(w).attr("id");u=p.p.subGridRowColapsed.call(p,m+"_"+r,r);}if(u===false){return false;}b(this).parent().next().remove(".ui-subgrid");b(this).html("<a href='javascript:void(0);'><span class='ui-icon ui-icon-plus'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed");
}}return false;});p.subGridXml=function(f,e){t(f,e);};p.subGridJson=function(f,e){x(f,e);};}});},expandSubGridRow:function(a){return this.each(function(){var c=this;if(c.grid||a){if(c.p.subGrid===true){if(c=b(this).jqGrid("getInd",a,true)){(c=b("td.sgcollapsed",c)[0])&&b(c).trigger("click");}}}});},collapseSubGridRow:function(a){return this.each(function(){var c=this;
if(c.grid||a){if(c.p.subGrid===true){if(c=b(this).jqGrid("getInd",a,true)){(c=b("td.sgexpanded",c)[0])&&b(c).trigger("click");}}}});},toggleSubGridRow:function(a){return this.each(function(){var c=this;if(c.grid||a){if(c.p.subGrid===true){if(c=b(this).jqGrid("getInd",a,true)){var f=b("td.sgcollapsed",c)[0];
if(f){b(f).trigger("click");}else{(f=b("td.sgexpanded",c)[0])&&b(f).trigger("click");}}}}});}});})(jQuery);(function(b){b.jgrid.extend({groupingSetup:function(){return this.each(function(){var n=this,a=n.p.groupingView;if(a!==null&&(typeof a==="object"||b.isFunction(a))){if(a.groupField.length){for(var g=0;
g<a.groupField.length;g++){a.groupOrder[g]||(a.groupOrder[g]="asc");a.groupText[g]||(a.groupText[g]="{0}");if(typeof a.groupColumnShow[g]!="boolean"){a.groupColumnShow[g]=true;}if(typeof a.groupSummary[g]!="boolean"){a.groupSummary[g]=false;}a.groupColumnShow[g]===true?b(n).jqGrid("showCol",a.groupField[g]):b(n).jqGrid("hideCol",a.groupField[g]);
a.sortitems[g]=[];a.sortnames[g]=[];a.summaryval[g]=[];if(a.groupSummary[g]){a.summary[g]=[];for(var c=n.p.colModel,d=0,e=c.length;d<e;d++){c[d].summaryType&&a.summary[g].push({nm:c[d].name,st:c[d].summaryType,v:""});}}}n.p.scroll=false;n.p.rownumbers=false;n.p.subGrid=false;n.p.treeGrid=false;n.p.gridview=true;
}else{n.p.grouping=false;}}else{n.p.grouping=false;}});},groupingPrepare:function(j,a,d,c){this.each(function(){var f=a[0]?a[0].toString().split(" ").join(""):"",g=this.p.groupingView,e=this;if(d.hasOwnProperty(f)){d[f].push(j);}else{d[f]=[];d[f].push(j);g.sortitems[0].push(f);g.sortnames[0].push(b.trim(a[0].toString()));
g.summaryval[0][f]=b.extend(true,{},g.summary[0]);}g.groupSummary[0]&&b.each(g.summaryval[0][f],function(){this.v=b.isFunction(this.st)?this.st.call(e,this.v,this.nm,c):b(e).jqGrid("groupingCalculations."+this.st,this.v,this.nm,c);});});return d;},groupingToggle:function(a){this.each(function(){var d=this.p.groupingView,c=a.lastIndexOf("_"),e=a.substring(0,c+1);
c=parseInt(a.substring(c+1),10)+1;var g=d.minusicon,l=d.plusicon;if(b("#"+a+" span").hasClass(g)){d.showSummaryOnHide&&d.groupSummary[0]?b("#"+a).nextUntil(".jqfoot").hide():b("#"+a).nextUntil("#"+e+String(c)).hide();b("#"+a+" span").removeClass(g).addClass(l);}else{b("#"+a).nextUntil("#"+e+String(c)).show();
b("#"+a+" span").removeClass(l).addClass(g);}});return false;},groupingRender:function(c,a){return this.each(function(){var n=this,e=n.p.groupingView,g="",j="",l,d="";if(!e.groupDataSorted){e.sortitems[0].sort();e.sortnames[0].sort();if(e.groupOrder[0].toLowerCase()=="desc"){e.sortitems[0].reverse();
e.sortnames[0].reverse();}}d=e.groupCollapse?e.plusicon:e.minusicon;d+=" tree-wrap-"+n.p.direction;b.each(e.sortitems[0],function(w,m){l=n.p.id+"ghead_"+w;j="<span style='cursor:pointer;' class='ui-icon "+d+"' onclick=\"jQuery('#"+n.p.id+"').jqGrid('groupingToggle','"+l+"');return false;\"></span>";g+='<tr id="'+l+'" role="row" class= "ui-widget-content jqgroup ui-row-'+n.p.direction+'"><td colspan="'+a+'">'+j+b.jgrid.format(e.groupText[0],e.sortnames[0][w],c[m].length)+"</td></tr>";
for(w=0;w<c[m].length;w++){g+=c[m][w].join("");}if(e.groupSummary[0]){w="";if(e.groupCollapse&&!e.showSummaryOnHide){w=' style="display:none;"';}g+="<tr"+w+' role="row" class="ui-widget-content jqfoot ui-row-'+n.p.direction+'">';w=e.summaryval[0][m];for(var q=n.p.colModel,h,k=c[m].length,f=0;f<a;f++){var o="<td "+n.formatCol(f,1,"")+">&#160;</td>",p="{0}";
b.each(w,function(){if(this.nm==q[f].name){if(q[f].summaryTpl){p=q[f].summaryTpl;}if(this.st=="avg"){if(this.v&&k>0){this.v/=k;}}try{h=n.formatter("",this.v,f,this);}catch(r){h=this.v;}o="<td "+n.formatCol(f,1,"")+">"+b.jgrid.format(p,h)+"</td>";return false;}});g+=o;}g+="</tr>";}});b("#"+n.p.id+" tbody:first").append(g);
g=null;});},groupingGroupBy:function(c,a){return this.each(function(){var d=this;if(typeof c=="string"){c=[c];}var e=d.p.groupingView;d.p.grouping=true;for(var g=0;g<e.groupField.length;g++){e.groupColumnShow[g]||b(d).jqGrid("showCol",e.groupField[g]);}d.p.groupingView=b.extend(d.p.groupingView,a||{});
e.groupField=c;b(d).trigger("reloadGrid");});},groupingRemove:function(a){return this.each(function(){var c=this;if(typeof a=="undefined"){a=true;}c.p.grouping=false;a===true?b("tr.jqgroup, tr.jqfoot","#"+c.p.id+" tbody:first").remove():b(c).trigger("reloadGrid");});},groupingCalculations:{sum:function(g,a,c){return parseFloat(g||0)+parseFloat(c[a]||0);
},min:function(g,a,c){if(g===""){return parseFloat(c[a]||0);}return Math.min(parseFloat(g),parseFloat(c[a]||0));},max:function(g,a,c){if(g===""){return parseFloat(c[a]||0);}return Math.max(parseFloat(g),parseFloat(c[a]||0));},count:function(g,a,c){if(g===""){g=0;}return c.hasOwnProperty(a)?g+1:0;},avg:function(g,a,c){return parseFloat(g||0)+parseFloat(c[a]||0);
}}});})(jQuery);(function(b){b.jgrid.extend({setTreeNode:function(c,a){return this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){var p=e.p.expColInd,j=e.p.treeReader.expanded_field,k=e.p.treeReader.leaf_field,h=e.p.treeReader.level_field;a.level=c[h];if(e.p.treeGridModel=="nested"){var f=c[e.p.treeReader.left_field],d=c[e.p.treeReader.right_field];
c[k]||(c[k]=parseInt(d,10)===parseInt(f,10)+1?"true":"false");}d=parseInt(c[h],10);if(e.p.tree_root_level===0){f=d+1;d=d;}else{f=d;d=d-1;}f="<div class='tree-wrap tree-wrap-"+e.p.direction+"' style='width:"+f*18+"px;'>";f+="<div style='"+(e.p.direction=="rtl"?"right:":"left:")+d*18+"px;' class='ui-icon ";
if(c[k]=="true"||c[k]===true){f+=e.p.treeIcons.leaf+" tree-leaf'";c[k]=true;c[j]=false;}else{if(c[j]=="true"||c[j]===true){f+=e.p.treeIcons.minus+" tree-minus treeclick'";c[j]=true;}else{f+=e.p.treeIcons.plus+" tree-plus treeclick'";c[j]=false;}c[k]=false;}f+="</div></div>";if(!e.p.loadonce){c[e.p.localReader.id]=a.id;
e.p.data.push(c);e.p._index[a.id]=e.p.data.length-1;}if(parseInt(c[h],10)!==parseInt(e.p.tree_root_level,10)){b(e).jqGrid("isVisibleNode",c)||b(a).css("display","none");}b("td:eq("+p+")",a).wrapInner("<span></span>").prepend(f);b(".treeclick",a).bind("click",function(g){g=b(g.target||g.srcElement,e.rows).closest("tr.jqgrow")[0].id;
g=e.p._index[g];var l=e.p.treeReader.expanded_field;if(!e.p.data[g][e.p.treeReader.leaf_field]){if(e.p.data[g][l]){b(e).jqGrid("collapseRow",e.p.data[g]);b(e).jqGrid("collapseNode",e.p.data[g]);}else{b(e).jqGrid("expandRow",e.p.data[g]);b(e).jqGrid("expandNode",e.p.data[g]);}}return false;});e.p.ExpandColClick===true&&b("span",a).css("cursor","pointer").bind("click",function(g){g=b(g.target||g.srcElement,e.rows).closest("tr.jqgrow")[0].id;
var l=e.p._index[g],m=e.p.treeReader.expanded_field;if(!e.p.data[l][e.p.treeReader.leaf_field]){if(e.p.data[l][m]){b(e).jqGrid("collapseRow",e.p.data[l]);b(e).jqGrid("collapseNode",e.p.data[l]);}else{b(e).jqGrid("expandRow",e.p.data[l]);b(e).jqGrid("expandNode",e.p.data[l]);}}b(e).jqGrid("setSelection",g);
return false;});}});},setTreeGrid:function(){return this.each(function(){var g=this,a=0;if(g.p.treeGrid){g.p.treedatatype||b.extend(g.p,{treedatatype:g.p.datatype});g.p.subGrid=false;g.p.altRows=false;g.p.pgbuttons=false;g.p.pginput=false;g.p.multiselect=false;g.p.rowList=[];g.p.treeIcons=b.extend({plus:"ui-icon-triangle-1-"+(g.p.direction=="rtl"?"w":"e"),minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},g.p.treeIcons||{});
if(g.p.treeGridModel=="nested"){g.p.treeReader=b.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded"},g.p.treeReader);}else{if(g.p.treeGridModel=="adjacency"){g.p.treeReader=b.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded"},g.p.treeReader);
}}for(var c in g.p.colModel){if(g.p.colModel.hasOwnProperty(c)){if(g.p.colModel[c].name==g.p.ExpandColumn){g.p.expColInd=a;break;}a++;}}if(!g.p.expColInd){g.p.expColInd=0;}b.each(g.p.treeReader,function(d,e){if(e){g.p.colNames.push(e);g.p.colModel.push({name:e,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false});
}});}});},expandRow:function(a){this.each(function(){var f=this;if(f.grid&&f.p.treeGrid){var c=b(f).jqGrid("getNodeChildren",a),g=f.p.treeReader.expanded_field;b(c).each(function(){var d=b.jgrid.getAccessor(this,f.p.localReader.id);b("#"+d,f.grid.bDiv).css("display","");this[g]&&b(f).jqGrid("expandRow",this);
});}});},collapseRow:function(a){this.each(function(){var f=this;if(f.grid&&f.p.treeGrid){var c=b(f).jqGrid("getNodeChildren",a),g=f.p.treeReader.expanded_field;b(c).each(function(){var d=b.jgrid.getAccessor(this,f.p.localReader.id);b("#"+d,f.grid.bDiv).css("display","none");this[g]&&b(f).jqGrid("collapseRow",this);
});}});},getRootNodes:function(){var a=[];this.each(function(){var f=this;if(f.grid&&f.p.treeGrid){switch(f.p.treeGridModel){case"nested":var c=f.p.treeReader.level_field;b(f.p.data).each(function(){parseInt(this[c],10)===parseInt(f.p.tree_root_level,10)&&a.push(this);});break;case"adjacency":var g=f.p.treeReader.parent_id_field;
b(f.p.data).each(function(){if(this[g]===null||String(this[g]).toLowerCase()=="null"){a.push(this);}});break;}}});return a;},getNodeDepth:function(c){var a=null;this.each(function(){if(this.grid&&this.p.treeGrid){var d=this;switch(d.p.treeGridModel){case"nested":a=parseInt(c[d.p.treeReader.level_field],10)-parseInt(d.p.tree_root_level,10);
break;case"adjacency":a=b(d).jqGrid("getNodeAncestors",c).length;break;}}});return a;},getNodeParent:function(c){var a=null;this.each(function(){var t=this;if(t.grid&&t.p.treeGrid){switch(t.p.treeGridModel){case"nested":var e=t.p.treeReader.left_field,d=t.p.treeReader.right_field,k=t.p.treeReader.level_field,j=parseInt(c[e],10),h=parseInt(c[d],10),g=parseInt(c[k],10);
b(this.p.data).each(function(){if(parseInt(this[k],10)===g-1&&parseInt(this[e],10)<j&&parseInt(this[d],10)>h){a=this;return false;}});break;case"adjacency":var f=t.p.treeReader.parent_id_field,l=t.p.localReader.id;b(this.p.data).each(function(){if(this[l]==c[f]){a=this;return false;}});break;}}});return a;
},getNodeChildren:function(c){var a=[];this.each(function(){var t=this;if(t.grid&&t.p.treeGrid){switch(t.p.treeGridModel){case"nested":var e=t.p.treeReader.left_field,d=t.p.treeReader.right_field,k=t.p.treeReader.level_field,j=parseInt(c[e],10),h=parseInt(c[d],10),g=parseInt(c[k],10);b(this.p.data).each(function(){parseInt(this[k],10)===g+1&&parseInt(this[e],10)>j&&parseInt(this[d],10)<h&&a.push(this);
});break;case"adjacency":var f=t.p.treeReader.parent_id_field,l=t.p.localReader.id;b(this.p.data).each(function(){this[f]==c[l]&&a.push(this);});break;}}});return a;},getFullTreeNode:function(c){var a=[];this.each(function(){var l=this,v;if(l.grid&&l.p.treeGrid){switch(l.p.treeGridModel){case"nested":var m=l.p.treeReader.left_field,h=l.p.treeReader.right_field,g=l.p.treeReader.level_field,f=parseInt(c[m],10),e=parseInt(c[h],10),d=parseInt(c[g],10);
b(this.p.data).each(function(){parseInt(this[g],10)>=d&&parseInt(this[m],10)>=f&&parseInt(this[m],10)<=e&&a.push(this);});break;case"adjacency":a.push(c);var j=l.p.treeReader.parent_id_field,k=l.p.localReader.id;b(this.p.data).each(function(n){v=a.length;for(n=0;n<v;n++){if(a[n][k]==this[j]){a.push(this);
break;}}});break;}}});return a;},getNodeAncestors:function(c){var a=[];this.each(function(){if(this.grid&&this.p.treeGrid){for(var d=b(this).jqGrid("getNodeParent",c);d;){a.push(d);d=b(this).jqGrid("getNodeParent",d);}}});return a;},isVisibleNode:function(c){var a=true;this.each(function(){var d=this;
if(d.grid&&d.p.treeGrid){var f=b(d).jqGrid("getNodeAncestors",c),e=d.p.treeReader.expanded_field;b(f).each(function(){a=a&&this[e];if(!a){return false;}});}});return a;},isNodeLoaded:function(c){var a;this.each(function(){var d=this;if(d.grid&&d.p.treeGrid){var e=d.p.treeReader.leaf_field;a=c.loaded!==undefined?c.loaded:c[e]||b(d).jqGrid("getNodeChildren",c).length>0?true:false;
}});return a;},expandNode:function(a){return this.each(function(){if(this.grid&&this.p.treeGrid){var e=this.p.treeReader.expanded_field;if(!a[e]){var c=b.jgrid.getAccessor(a,this.p.localReader.id),j=b("#"+c,this.grid.bDiv)[0],f=this.p._index[c];if(b(this).jqGrid("isNodeLoaded",this.p.data[f])){a[e]=true;
b("div.treeclick",j).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");}else{a[e]=true;b("div.treeclick",j).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=j.rowIndex;this.p.datatype=this.p.treedatatype;
this.p.treeGridModel=="nested"?b(this).jqGrid("setGridParam",{postData:{nodeid:c,n_left:a.lft,n_right:a.rgt,n_level:a.level}}):b(this).jqGrid("setGridParam",{postData:{nodeid:c,parentid:a.parent_id,n_level:a.level}});b(this).trigger("reloadGrid");this.p.treeGridModel=="nested"?b(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):b(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}});
}}}});},collapseNode:function(a){return this.each(function(){if(this.grid&&this.p.treeGrid){if(a.expanded){a.expanded=false;var c=b.jgrid.getAccessor(a,this.p.localReader.id);c=b("#"+c,this.grid.bDiv)[0];b("div.treeclick",c).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus");
}}});},SortTree:function(j,a,f,c){return this.each(function(){if(this.grid&&this.p.treeGrid){var o,e,k,h=[],g=this,d;o=b(this).jqGrid("getRootNodes");o=b.jgrid.from(o);o.orderBy(j,a,f,c);d=o.select();o=0;for(e=d.length;o<e;o++){k=d[o];h.push(k);b(this).jqGrid("collectChildrenSortTree",h,k,j,a,f,c);}b.each(h,function(l){var m=b.jgrid.getAccessor(this,g.p.localReader.id);
if(l===0){l=b("#"+m,g.grid.bDiv);b("td",l).each(function(n){b(this).css("width",g.grid.headers[n].width+"px");});g.grid.cols=l[0].cells;}b("tbody",g.grid.bDiv).append(b("#"+m,g.grid.bDiv));});h=d=o=null;}});},collectChildrenSortTree:function(n,a,k,e,c,f){return this.each(function(){if(this.grid&&this.p.treeGrid){var d,j,h,g;
d=b(this).jqGrid("getNodeChildren",a);d=b.jgrid.from(d);d.orderBy(k,e,c,f);g=d.select();d=0;for(j=g.length;d<j;d++){h=g[d];n.push(h);b(this).jqGrid("collectChildrenSortTree",n,h,k,e,c,f);}}});},setTreeRow:function(g,a){var c=false;this.each(function(){var d=this;if(d.grid&&d.p.treeGrid){c=b(d).jqGrid("setRowData",g,a);
}});return c;},delTreeNode:function(a){return this.each(function(){var e=this;if(e.grid&&e.p.treeGrid){var c=b(e).jqGrid("getInd",a,true);if(c){var j=b(e).jqGrid("getNodeChildren",c);if(j.length>0){for(var f=0;f<j.length;f++){b(e).jqGrid("delRowData",j[f].id);}}b(e).jqGrid("delRowData",c.id);}}});}});
})(jQuery);(function(b){b.jgrid.extend({jqGridImport:function(a){a=b.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},a||{});return this.each(function(){var d=this,c=function(e,g){var f=b(g.xmlGrid.config,e)[0];
g=b(g.xmlGrid.data,e)[0];var n;if(xmlJsonClass.xml2json&&b.jgrid.parse){f=xmlJsonClass.xml2json(f," ");f=b.jgrid.parse(f);for(var h in f){if(f.hasOwnProperty(h)){n=f[h];}}if(g){h=f.grid.datatype;f.grid.datatype="xmlstring";f.grid.datastr=e;b(d).jqGrid(n).jqGrid("setGridParam",{datatype:h});}else{b(d).jqGrid(n);
}}else{alert("xml2json or parse are not present");}},j=function(e,g){if(e&&typeof e=="string"){var f=b.jgrid.parse(e);e=f[g.jsonGrid.config];if(g=f[g.jsonGrid.data]){f=e.datatype;e.datatype="jsonstring";e.datastr=g;b(d).jqGrid(e).jqGrid("setGridParam",{datatype:f});}else{b(d).jqGrid(e);}}};switch(a.imptype){case"xml":b.ajax(b.extend({url:a.impurl,type:a.mtype,data:a.impData,dataType:"xml",complete:function(e,f){if(f=="success"){c(e.responseXML,a);
b.isFunction(a.importComplete)&&a.importComplete(e);}}},a.ajaxOptions));break;case"xmlstring":if(a.impstring&&typeof a.impstring=="string"){var k=b.jgrid.stringToDoc(a.impstring);if(k){c(k,a);b.isFunction(a.importComplete)&&a.importComplete(k);a.impstring=null;}k=null;}break;case"json":b.ajax(b.extend({url:a.impurl,type:a.mtype,data:a.impData,dataType:"json",complete:function(e,f){if(f=="success"){j(e.responseText,a);
b.isFunction(a.importComplete)&&a.importComplete(e);}}},a.ajaxOptions));break;case"jsonstring":if(a.impstring&&typeof a.impstring=="string"){j(a.impstring,a);b.isFunction(a.importComplete)&&a.importComplete(a.impstring);a.impstring=null;}break;}});},jqGridExport:function(a){a=b.extend({exptype:"xmlstring",root:"grid",ident:"\t"},a||{});
var d=null;this.each(function(){if(this.grid){var c=b.extend({},b(this).jqGrid("getGridParam"));if(c.rownumbers){c.colNames.splice(0,1);c.colModel.splice(0,1);}if(c.multiselect){c.colNames.splice(0,1);c.colModel.splice(0,1);}if(c.subGrid){c.colNames.splice(0,1);c.colModel.splice(0,1);}c.knv=null;if(c.treeGrid){for(var f in c.treeReader){if(c.treeReader.hasOwnProperty(f)){c.colNames.splice(c.colNames.length-1);
c.colModel.splice(c.colModel.length-1);}}}switch(a.exptype){case"xmlstring":d="<"+a.root+">"+xmlJsonClass.json2xml(c,a.ident)+"</"+a.root+">";break;case"jsonstring":d="{"+xmlJsonClass.toJson(c,a.root,a.ident)+"}";if(c.postData.filters!==undefined){d=d.replace(/filters":"/,'filters":');d=d.replace(/}]}"/,"}]}");
}break;}}});return d;},excelExport:function(a){a=b.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},a||{});return this.each(function(){if(this.grid){var d;if(a.exptype=="remote"){d=b.extend({},this.p.postData);d[a.oper]=a.tag;d=jQuery.param(d);d=a.url.indexOf("?")!=-1?a.url+"&"+d:a.url+"?"+d;
window.location=d;}}});}});})(jQuery);var xmlJsonClass={xml2json:function(a,b){if(a.nodeType===9){a=a.documentElement;}a=this.toJson(this.toObj(this.removeWhite(a)),a.nodeName,"\t");return"{\n"+b+(b?a.replace(/\t/g,b):a.replace(/\t|\n/g,""))+"\n}";},json2xml:function(f,g){var e=function(d,o,l){var k="",c,j;
if(d instanceof Array){if(d.length===0){k+=l+"<"+o+">__EMPTY_ARRAY_</"+o+">\n";}else{c=0;for(j=d.length;c<j;c+=1){var h=l+e(d[c],o,l+"\t")+"\n";k+=h;}}}else{if(typeof d==="object"){c=false;k+=l+"<"+o;for(j in d){if(d.hasOwnProperty(j)){if(j.charAt(0)==="@"){k+=" "+j.substr(1)+'="'+d[j].toString()+'"';
}else{c=true;}}}k+=c?">":"/>";if(c){for(j in d){if(d.hasOwnProperty(j)){if(j==="#text"){k+=d[j];}else{if(j==="#cdata"){k+="<![CDATA["+d[j]+"]]>";}else{if(j.charAt(0)!=="@"){k+=e(d[j],j,l+"\t");}}}}}k+=(k.charAt(k.length-1)==="\n"?l:"")+"</"+o+">";}}else{k+=typeof d==="function"?l+"<"+o+"><![CDATA["+d+"]]></"+o+">":d.toString()==='""'||d.toString().length===0?l+"<"+o+">__EMPTY_STRING_</"+o+">":l+"<"+o+">"+d.toString()+"</"+o+">";
}}return k;},a="",b;for(b in f){if(f.hasOwnProperty(b)){a+=e(f[b],b,"");}}return g?a.replace(/\t/g,g):a.replace(/\t|\n/g,"");},toObj:function(d){var e={},c=/function/i;if(d.nodeType===1){if(d.attributes.length){var a;for(a=0;a<d.attributes.length;a+=1){e["@"+d.attributes[a].nodeName]=(d.attributes[a].nodeValue||"").toString();
}}if(d.firstChild){var b=a=0,g=false,f;for(f=d.firstChild;f;f=f.nextSibling){if(f.nodeType===1){g=true;}else{if(f.nodeType===3&&f.nodeValue.match(/[^ \f\n\r\t\v]/)){a+=1;}else{if(f.nodeType===4){b+=1;}}}}if(g){if(a<2&&b<2){this.removeWhite(d);for(f=d.firstChild;f;f=f.nextSibling){if(f.nodeType===3){e["#text"]=this.escape(f.nodeValue);
}else{if(f.nodeType===4){if(c.test(f.nodeValue)){e[f.nodeName]=[e[f.nodeName],f.nodeValue];}else{e["#cdata"]=this.escape(f.nodeValue);}}else{if(e[f.nodeName]){if(e[f.nodeName] instanceof Array){e[f.nodeName][e[f.nodeName].length]=this.toObj(f);}else{e[f.nodeName]=[e[f.nodeName],this.toObj(f)];}}else{e[f.nodeName]=this.toObj(f);
}}}}}else{if(d.attributes.length){e["#text"]=this.escape(this.innerXml(d));}else{e=this.escape(this.innerXml(d));}}}else{if(a){if(d.attributes.length){e["#text"]=this.escape(this.innerXml(d));}else{e=this.escape(this.innerXml(d));if(e==="__EMPTY_ARRAY_"){e="[]";}else{if(e==="__EMPTY_STRING_"){e="";}}}}else{if(b){if(b>1){e=this.escape(this.innerXml(d));
}else{for(f=d.firstChild;f;f=f.nextSibling){if(c.test(d.firstChild.nodeValue)){e=d.firstChild.nodeValue;break;}else{e["#cdata"]=this.escape(f.nodeValue);}}}}}}}if(!d.attributes.length&&!d.firstChild){e=null;}}else{if(d.nodeType===9){e=this.toObj(d.documentElement);}else{alert("unhandled node type: "+d.nodeType);
}}return e;},toJson:function(d,e,c){var a=e?'"'+e+'"':"";if(d==="[]"){a+=e?":[]":"[]";}else{if(d instanceof Array){var b,g,f=[];g=0;for(b=d.length;g<b;g+=1){f[g]=this.toJson(d[g],"",c+"\t");}a+=(e?":[":"[")+(f.length>1?"\n"+c+"\t"+f.join(",\n"+c+"\t")+"\n"+c:f.join(""))+"]";}else{if(d===null){a+=(e&&":")+"null";
}else{if(typeof d==="object"){b=[];for(g in d){if(d.hasOwnProperty(g)){b[b.length]=this.toJson(d[g],g,c+"\t");}}a+=(e?":{":"{")+(b.length>1?"\n"+c+"\t"+b.join(",\n"+c+"\t")+"\n"+c:b.join(""))+"}";}else{if(typeof d==="string"){c=/function/i;b=d.toString();a+=/(^-?\d+\.?\d*$)/.test(b)||c.test(b)||b==="false"||b==="true"?(e&&":")+b:(e&&":")+'"'+d+'"';
}else{a+=(e&&":")+d.toString();}}}}}return a;},innerXml:function(b){var f="";if("innerHTML" in b){f=b.innerHTML;}else{var a=function(c){var d="",e;if(c.nodeType===1){d+="<"+c.nodeName;for(e=0;e<c.attributes.length;e+=1){d+=" "+c.attributes[e].nodeName+'="'+(c.attributes[e].nodeValue||"").toString()+'"';
}if(c.firstChild){d+=">";for(e=c.firstChild;e;e=e.nextSibling){d+=a(e);}d+="</"+c.nodeName+">";}else{d+="/>";}}else{if(c.nodeType===3){d+=c.nodeValue;}else{if(c.nodeType===4){d+="<![CDATA["+c.nodeValue+"]]>";}}}return d;};for(b=b.firstChild;b;b=b.nextSibling){f+=a(b);}}return f;},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r");
},removeWhite:function(b){b.normalize();var f;for(f=b.firstChild;f;){if(f.nodeType===3){if(f.nodeValue.match(/[^ \f\n\r\t\v]/)){f=f.nextSibling;}else{var a=f.nextSibling;b.removeChild(f);f=a;}}else{f.nodeType===1&&this.removeWhite(f);f=f.nextSibling;}}return b;}};(function(b){b.jgrid.extend({setColumns:function(a){a=b.extend({top:0,left:0,width:200,height:"auto",dataheight:"auto",modal:false,drag:true,beforeShowForm:null,afterShowForm:null,afterSubmitForm:null,closeOnEscape:true,ShrinkToFit:false,jqModal:false,saveicon:[true,"left","ui-icon-disk"],closeicon:[true,"left","ui-icon-close"],onClose:null,colnameview:true,closeAfterSubmit:true,updateAfterCheck:false,recreateForm:false},b.jgrid.col,a||{});
return this.each(function(){var e=this;if(e.grid){var l=typeof a.beforeShowForm==="function"?true:false,c=typeof a.afterShowForm==="function"?true:false,d=typeof a.afterSubmitForm==="function"?true:false,g=e.p.id,f="ColTbl_"+g,j={themodal:"colmod"+g,modalhead:"colhd"+g,modalcontent:"colcnt"+g,scrollelm:f};
a.recreateForm===true&&b("#"+j.themodal).html()!=null&&b("#"+j.themodal).remove();if(b("#"+j.themodal).html()!=null){l&&a.beforeShowForm(b("#"+f));viewModal("#"+j.themodal,{gbox:"#gbox_"+g,jqm:a.jqModal,jqM:false,modal:a.modal});}else{var k=isNaN(a.dataheight)?a.dataheight:a.dataheight+"px";k="<div id='"+f+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+k+";'>";
k+="<table class='ColTable' cellspacing='1' cellpading='2' border='0'><tbody>";for(i=0;i<this.p.colNames.length;i++){e.p.colModel[i].hidedlg||(k+="<tr><td style='white-space: pre;'><input type='checkbox' style='margin-right:5px;' id='col_"+this.p.colModel[i].name+"' class='cbox' value='T' "+(this.p.colModel[i].hidden===false?"checked":"")+"/><label for='col_"+this.p.colModel[i].name+"'>"+this.p.colNames[i]+(a.colnameview?" ("+this.p.colModel[i].name+")":"")+"</label></td></tr>");
}k+="</tbody></table></div>";k+="<table border='0' class='EditTable' id='"+f+"_2'><tbody><tr style='display:block;height:3px;'><td></td></tr><tr><td class='DataTD ui-widget-content'></td></tr><tr><td class='ColButton EditButton'>"+(!a.updateAfterCheck?"<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+a.bSubmit+"</a>":"")+"&#160;"+("<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+a.bCancel+"</a>")+"</td></tr></tbody></table>";
a.gbox="#gbox_"+g;createModal(j,k,a,"#gview_"+e.p.id,b("#gview_"+e.p.id)[0]);if(a.saveicon[0]==true){b("#dData","#"+f+"_2").addClass(a.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.saveicon[2]+"'></span>");}if(a.closeicon[0]==true){b("#eData","#"+f+"_2").addClass(a.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+a.closeicon[2]+"'></span>");
}a.updateAfterCheck?b(":input","#"+f).click(function(){var h=this.id.substr(4);if(h){this.checked?b(e).jqGrid("showCol",h):b(e).jqGrid("hideCol",h);a.ShrinkToFit===true&&b(e).jqGrid("setGridWidth",e.grid.width-0.001,true);}return this;}):b("#dData","#"+f+"_2").click(function(){for(i=0;i<e.p.colModel.length;
i++){if(!e.p.colModel[i].hidedlg){var h=e.p.colModel[i].name.replace(/\./g,"\\.");if(b("#col_"+h,"#"+f).attr("checked")){b(e).jqGrid("showCol",e.p.colModel[i].name);b("#col_"+h,"#"+f).attr("defaultChecked",true);}else{b(e).jqGrid("hideCol",e.p.colModel[i].name);b("#col_"+h,"#"+f).attr("defaultChecked","");
}}}a.ShrinkToFit===true&&b(e).jqGrid("setGridWidth",e.grid.width-0.001,true);a.closeAfterSubmit&&hideModal("#"+j.themodal,{gb:"#gbox_"+g,jqm:a.jqModal,onClose:a.onClose});d&&a.afterSubmitForm(b("#"+f));return false;});b("#eData","#"+f+"_2").click(function(){hideModal("#"+j.themodal,{gb:"#gbox_"+g,jqm:a.jqModal,onClose:a.onClose});
return false;});b("#dData, #eData","#"+f+"_2").hover(function(){b(this).addClass("ui-state-hover");},function(){b(this).removeClass("ui-state-hover");});l&&a.beforeShowForm(b("#"+f));viewModal("#"+j.themodal,{gbox:"#gbox_"+g,jqm:a.jqModal,jqM:true,modal:a.modal});}c&&a.afterShowForm(b("#"+f));}});}});
})(jQuery);(function(b){b.jgrid.extend({getPostData:function(){var a=this[0];if(a.grid){return a.p.postData;}},setPostData:function(a){var e=this[0];if(e.grid){if(typeof a==="object"){e.p.postData=a;}else{alert("Error: cannot add a non-object postData value. postData unchanged.");}}},appendPostData:function(a){var e=this[0];
if(e.grid){typeof a==="object"?b.extend(e.p.postData,a):alert("Error: cannot append a non-object postData value. postData unchanged.");}},setPostDataItem:function(d,g){var a=this[0];if(a.grid){a.p.postData[d]=g;}},getPostDataItem:function(a){var e=this[0];if(e.grid){return e.p.postData[a];}},removePostDataItem:function(a){var e=this[0];
e.grid&&delete e.p.postData[a];},getUserData:function(){var a=this[0];if(a.grid){return a.p.userData;}},getUserDataItem:function(a){var e=this[0];if(e.grid){return e.p.userData[a];}}});})(jQuery);function tableToGrid(c,d){jQuery(c).each(function(){if(!this.grid){jQuery(this).width("99%");var a=jQuery(this).width(),g=jQuery("input[type=checkbox]:first",jQuery(this)),b=jQuery("input[type=radio]:first",jQuery(this));
g=g.length>0;b=!g&&b.length>0;var u=g||b,f=[],l=[];jQuery("th",jQuery(this)).each(function(){if(f.length===0&&u){f.push({name:"__selection__",index:"__selection__",width:0,hidden:true});l.push("__selection__");}else{f.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150});
l.push(jQuery(this).html());}});var h=[],s=[],t=[];jQuery("tbody > tr",jQuery(this)).each(function(){var j={},e=0;jQuery("td",jQuery(this)).each(function(){if(e===0&&u){var k=jQuery("input",jQuery(this)),m=k.attr("value");s.push(m||h.length);k.attr("checked")&&t.push(m);j[f[e].name]=k.attr("value");}else{j[f[e].name]=jQuery(this).html();
}e++;});e>0&&h.push(j);});jQuery(this).empty();jQuery(this).addClass("scroll");jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:a,colNames:l,colModel:f,multiselect:g},d||{}));for(a=0;a<h.length;a++){b=null;if(s.length>0){if((b=s[a])&&b.replace){b=encodeURIComponent(b).replace(/[.\-%]/g,"_");
}}if(b===null){b=a+1;}jQuery(this).jqGrid("addRowData",b,h[a]);}for(a=0;a<t.length;a++){jQuery(this).jqGrid("setSelection",t[a]);}}});}(function(a){if(a.browser.msie&&a.browser.version==8){a.expr[":"].hidden=function(b){return b.offsetWidth===0||b.offsetHeight===0||b.style.display=="none";};}a.jgrid._multiselect=false;
if(a.ui){if(a.ui.multiselect){if(a.ui.multiselect.prototype._setSelected){var q=a.ui.multiselect.prototype._setSelected;a.ui.multiselect.prototype._setSelected=function(b,j){b=q.call(this,b,j);if(j&&this.selectedList){var c=this.element;this.selectedList.find("li").each(function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(c);
});}return b;};}if(a.ui.multiselect.prototype.destroy){a.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();a.Widget===undefined?a.widget.prototype.destroy.apply(this,arguments):a.Widget.prototype.destroy.apply(this,arguments);};}a.jgrid._multiselect=true;}}a.jgrid.extend({sortableColumns:function(b){return this.each(function(){function j(){c.p.disableClick=true;
}var c=this,g={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_cb,#jqgh_rn,#jqgh_subgrid),:hidden)",placeholder:{element:function(e){return a(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];
},update:function(e,h){h.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10));h.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10));}},update:function(e,h){e=a(h.item).parent();
e=a(">th",e);var i={};a.each(c.p.colModel,function(m){i[this.name]=m;});var l=[];e.each(function(){var m=a(">div",this).get(0).id.replace(/^jqgh_/,"");m in i&&l.push(i[m]);});a(c).jqGrid("remapColumns",l,true,true);a.isFunction(c.p.sortable.update)&&c.p.sortable.update(l);setTimeout(function(){c.p.disableClick=false;
},50);}};if(c.p.sortable.options){a.extend(g,c.p.sortable.options);}else{if(a.isFunction(c.p.sortable)){c.p.sortable={update:c.p.sortable};}}if(g.start){var d=g.start;g.start=function(e,h){j();d.call(this,e,h);};}else{g.start=j;}if(c.p.sortable.exclude){g.items+=":not("+c.p.sortable.exclude+")";}b.sortable(g).data("sortable").floating=true;
});},columnChooser:function(b){function j(f,k,p){if(k>=0){var o=f.slice(),r=o.splice(k,Math.max(f.length-k,k));if(k>f.length){k=f.length;}o[k]=p;return o.concat(r);}}function c(f,k){if(f){if(typeof f=="string"){a.fn[f]&&a.fn[f].apply(k,a.makeArray(arguments).slice(2));}else{a.isFunction(f)&&f.apply(k,a.makeArray(arguments).slice(2));
}}}var g=this;if(!a("#colchooser_"+g[0].p.id).length){var d=a('<div id="colchooser_'+g[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),e=a("select",d);b=a.extend({width:420,height:240,classname:null,done:function(f){f&&g.jqGrid("remapColumns",f,true);
},msel:"multiselect",dlog:"dialog",dlog_opts:function(f){var k={};k[f.bSubmit]=function(){f.apply_perm();f.cleanup(false);};k[f.bCancel]=function(){f.cleanup(true);};return{buttons:k,close:function(){f.cleanup(true);},modal:false,resizable:false,width:f.width+20};},apply_perm:function(){a("option",e).each(function(){this.selected?g.jqGrid("showCol",h[this.value].name):g.jqGrid("hideCol",h[this.value].name);
});var f=[];a("option[selected]",e).each(function(){f.push(parseInt(this.value,10));});a.each(f,function(){delete l[h[parseInt(this,10)].name];});a.each(l,function(){var k=parseInt(this,10);f=j(f,k,k);});b.done&&b.done.call(g,f);},cleanup:function(f){c(b.dlog,d,"destroy");c(b.msel,e,"destroy");d.remove();
f&&b.done&&b.done.call(g);},msel_opts:{}},a.jgrid.col,b||{});if(a.ui){if(a.ui.multiselect){if(b.msel=="multiselect"){if(!a.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return;}b.msel_opts=a.extend(a.ui.multiselect.defaults,b.msel_opts);
}}}b.caption&&d.attr("title",b.caption);if(b.classname){d.addClass(b.classname);e.addClass(b.classname);}if(b.width){a(">div",d).css({width:b.width,margin:"0 auto"});e.css("width",b.width);}if(b.height){a(">div",d).css("height",b.height);e.css("height",b.height-10);}var h=g.jqGrid("getGridParam","colModel"),i=g.jqGrid("getGridParam","colNames"),l={},m=[];
e.empty();a.each(h,function(f){l[this.name]=f;if(this.hidedlg){this.hidden||m.push(f);}else{e.append("<option value='"+f+"' "+(this.hidden?"":"selected='selected'")+">"+i[f]+"</option>");}});var n=a.isFunction(b.dlog_opts)?b.dlog_opts.call(g,b):b.dlog_opts;c(b.dlog,d,n);n=a.isFunction(b.msel_opts)?b.msel_opts.call(g,b):b.msel_opts;
c(b.msel,e,n);}},sortableRows:function(b){return this.each(function(){var j=this;if(j.grid){if(!j.p.treeGrid){if(a.fn.sortable){b=a.extend({cursor:"move",axis:"y",items:".jqgrow"},b||{});if(b.start&&a.isFunction(b.start)){b._start_=b.start;delete b.start;}else{b._start_=false;}if(b.update&&a.isFunction(b.update)){b._update_=b.update;
delete b.update;}else{b._update_=false;}b.start=function(c,g){a(g.item).css("border-width","0px");a("td",g.item).each(function(h){this.style.width=j.grid.cols[h].style.width;});if(j.p.subGrid){var d=a(g.item).attr("id");try{a(j).jqGrid("collapseSubGridRow",d);}catch(e){}}b._start_&&b._start_.apply(this,[c,g]);
};b.update=function(c,g){a(g.item).css("border-width","");j.p.rownumbers===true&&a("td.jqgrid-rownum",j.rows).each(function(d){a(this).html(d+1);});b._update_&&b._update_.apply(this,[c,g]);};a("tbody:first",j).sortable(b);a("tbody:first",j).disableSelection();}}}});},gridDnD:function(b){return this.each(function(){function j(){var d=a.data(c,"dnd");
a("tr.jqgrow:not(.ui-draggable)",c).draggable(a.isFunction(d.drag)?d.drag.call(a(c),d):d.drag);}var c=this;if(c.grid){if(!c.p.treeGrid){if(a.fn.draggable&&a.fn.droppable){a("#jqgrid_dnd").html()===null&&a("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>");if(typeof b=="string"&&b=="updateDnD"&&c.p.jqgdnd===true){j();
}else{b=a.extend({drag:function(d){return a.extend({start:function(e,h){if(c.p.subGrid){var i=a(h.helper).attr("id");try{a(c).jqGrid("collapseSubGridRow",i);}catch(l){}}for(i=0;i<a.data(c,"dnd").connectWith.length;i++){a(a.data(c,"dnd").connectWith[i]).jqGrid("getGridParam","reccount")=="0"&&a(a.data(c,"dnd").connectWith[i]).jqGrid("addRowData","jqg_empty_row",{});
}h.helper.addClass("ui-state-highlight");a("td",h.helper).each(function(m){this.style.width=c.grid.headers[m].width+"px";});d.onstart&&a.isFunction(d.onstart)&&d.onstart.call(a(c),e,h);},stop:function(e,h){if(h.helper.dropped){var i=a(h.helper).attr("id");a(c).jqGrid("delRowData",i);}for(i=0;i<a.data(c,"dnd").connectWith.length;
i++){a(a.data(c,"dnd").connectWith[i]).jqGrid("delRowData","jqg_empty_row");}d.onstop&&a.isFunction(d.onstop)&&d.onstop.call(a(c),e,h);}},d.drag_opts||{});},drop:function(d){return a.extend({accept:function(e){var h=a(e).closest("table.ui-jqgrid-btable");if(a.data(h[0],"dnd")!==undefined){e=a.data(h[0],"dnd").connectWith;
return a.inArray("#"+this.id,e)!=-1?true:false;}return e;},drop:function(e,h){var i=a(h.draggable).attr("id");i=h.draggable.parent().parent().jqGrid("getRowData",i);if(!d.dropbyname){var l=0,m={},n,f=a("#"+this.id).jqGrid("getGridParam","colModel");try{for(var k in i){if(i.hasOwnProperty(k)&&f[l]){n=f[l].name;
m[n]=i[k];}l++;}i=m;}catch(p){}}h.helper.dropped=true;if(d.beforedrop&&a.isFunction(d.beforedrop)){n=d.beforedrop.call(this,e,h,i,a("#"+c.id),a(this));if(typeof n!="undefined"&&n!==null&&typeof n=="object"){i=n;}}if(h.helper.dropped){var o;if(d.autoid){if(a.isFunction(d.autoid)){o=d.autoid.call(this,i);
}else{o=Math.ceil(Math.random()*1000);o=d.autoidprefix+o;}}a("#"+this.id).jqGrid("addRowData",o,i,d.droppos);}d.ondrop&&a.isFunction(d.ondrop)&&d.ondrop.call(this,e,h,i);}},d.drop_opts||{});},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5000},dropbyname:false,droppos:"first",autoid:true,autoidprefix:"dnd_"},b||{});
if(b.connectWith){b.connectWith=b.connectWith.split(",");b.connectWith=a.map(b.connectWith,function(d){return a.trim(d);});a.data(c,"dnd",b);c.p.reccount!="0"&&!c.p.jqgdnd&&j();c.p.jqgdnd=true;for(var g=0;g<b.connectWith.length;g++){a(b.connectWith[g]).droppable(a.isFunction(b.drop)?b.drop.call(a(c),b):b.drop);
}}}}}}});},gridResize:function(b){return this.each(function(){var j=this;if(j.grid&&a.fn.resizable){b=a.extend({},b||{});if(b.alsoResize){b._alsoResize_=b.alsoResize;delete b.alsoResize;}else{b._alsoResize_=false;}if(b.stop&&a.isFunction(b.stop)){b._stop_=b.stop;delete b.stop;}else{b._stop_=false;}b.stop=function(c,g){a(j).jqGrid("setGridParam",{height:a("#gview_"+j.p.id+" .ui-jqgrid-bdiv").height()});
a(j).jqGrid("setGridWidth",g.size.width,b.shrinkToFit);b._stop_&&b._stop_.call(j,c,g);};b.alsoResize=b._alsoResize_?eval("("+("{'#gview_"+j.p.id+" .ui-jqgrid-bdiv':true,'"+b._alsoResize_+"':true}")+")"):a(".ui-jqgrid-bdiv","#gview_"+j.p.id);delete b._alsoResize_;a("#gbox_"+j.p.id).resizable(b);}});}});
})(jQuery);
