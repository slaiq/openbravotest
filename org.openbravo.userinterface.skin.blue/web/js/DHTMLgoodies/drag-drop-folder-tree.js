var JSTreeObj;var treeUlCounter=0;var nodeId=1;function JSDragDropTree(){var x;var u;var h;var y;var H;var B;var D;var c;var I;var g;var j;var F;var q;var i;var A;var v;var o;var p;var e;var n;var l;var k;this.imageFolder="images/";this.blankImage="blank.gif";this.folderClosedClass="DragDropTree_folderClosed_icon";
this.folderOpenedClass="DragDropTree_folderOpened_icon";this.elementClass="DragDropTree_element_icon";this.plusClass="DragDropTree_plus_icon";this.minusClass="DragDropTree_minus_icon";this.dragDrop_ind1="DragDropTree_sibling_pos_icon";this.dragDrop_ind2="DragDropTree_child_pos_icon";this.maximumDepth=6;
var f;var m;var E;var C={};var a={};var s;var J;var z;var r;var K;var d;var G;var t;var b;var w;this.contextMenu=false;this.floatingContainer=document.createElement("UL");this.floatingContainer.style.position="absolute";this.floatingContainer.style.display="none";this.floatingContainer.id="floatingContainer";
this.insertAsSub=false;document.body.appendChild(this.floatingContainer);this.dragDropTimer=-1;this.dragNode_noSiblings=false;this.currentItemToEdit=false;if(document.all){this.indicator_offsetX=2;this.indicator_offsetX_sub=4;this.indicator_offsetY=8;}else{this.indicator_offsetX=0;this.indicator_offsetX_sub=2;
this.indicator_offsetY=11;}if(navigator.userAgent.indexOf("MSIE")>=0){this.indicator_offsetX=1;this.indicator_offsetX_sub=3;this.indicator_offsetY=2;}if(navigator.userAgent.indexOf("Opera")>=0){this.indicator_offsetX=2;this.indicator_offsetX_sub=3;this.indicator_offsetY=-7;}this.messageMaximumDepthReached="";
this.renameAllowed=false;this.deleteAllowed=false;this.currentlyActiveItem=false;this.filePathRenameItem="folderTree_updateItem.php";this.filePathDeleteItem="folderTree_updateItem.php";this.ajaxObjects=new Array();this.helpObj=false;this.RENAME_STATE_BEGIN=1;this.RENAME_STATE_CANCELED=2;this.RENAME_STATE_REQUEST_SENDED=3;
this.renameState=null;}JSDragDropTree.prototype={addEvent:function(b,a,c){if(b.attachEvent){b["e"+a+c]=c;b[a+c]=function(){b["e"+a+c](window.event);};b.attachEvent("on"+a,b[a+c]);}else{b.addEventListener(a,c,false);}},removeEvent:function(b,a,c){if(b.detachEvent){b.detachEvent("on"+a,b[a+c]);b[a+c]=null;
}else{b.removeEventListener(a,c,false);}},Get_Cookie:function(c){var d=document.cookie.indexOf(c+"=");var a=d+c.length+1;if((!d)&&(c!=document.cookie.substring(0,c.length))){return null;}if(d==-1){return null;}var b=document.cookie.indexOf(";",a);if(b==-1){b=document.cookie.length;}return unescape(document.cookie.substring(a,b));
},Set_Cookie:function(b,f,c,i,d,a){c=c*60*60*24*1000;var e=new Date();var g=new Date(e.getTime()+(c));var h=b+"="+escape(f)+((c)?";expires="+g.toGMTString():"")+((i)?";path="+i:"")+((d)?";domain="+d:"")+((a)?";secure":"");document.cookie=h;},setFileNameRename:function(a){this.filePathRenameItem=a;},setFileNameDelete:function(a){this.filePathDeleteItem=a;
},setAdditionalRenameRequestParameters:function(a){this.additionalRenameRequestParameters=a;},setAdditionalDeleteRequestParameters:function(a){this.additionalDeleteRequestParameters=a;},setRenameAllowed:function(a){this.renameAllowed=a;},setDeleteAllowed:function(a){this.deleteAllowed=a;},setMaximumDepth:function(a){this.maximumDepth=a;
},setMessageMaximumDepthReached:function(a){this.messageMaximumDepthReached=a;},setBlankImage:function(a){this.blankImage=a;},setImageFolder:function(a){this.imageFolder=a;},setfolderClosedClass:function(a){this.folderClosedClass=a;},setfolderOpenedClass:function(a){this.folderOpenedClass=a;},setElementClass:function(a){this.elementClass=a;
},setPlusClass:function(a){this.plusClass=a;},setMinusClass:function(a){this.minusClass=a;},setTreeId:function(a){this.idOfTree=a;},lockTree:function(){JSTreeObj.isLocked=true;return true;},unlockTree:function(){JSTreeObj.isLocked=false;return true;},expandAll:function(){var b=document.getElementById(this.idOfTree).getElementsByTagName("LI");
for(var c=0;c<b.length;c++){var a=b[c].getElementsByTagName("UL");if(a.length>0&&a[0].style.display!="block"){JSTreeObj.showHideNode(false,b[c].id);}}},collapseAll:function(){var b=document.getElementById(this.idOfTree).getElementsByTagName("LI");for(var c=0;c<b.length;c++){var a=b[c].getElementsByTagName("UL");
if(a.length>0&&a[0].style.display=="block"){JSTreeObj.showHideNode(false,b[c].id);}}},expandNode:function(c){var d=c;var b=document.getElementById(this.idOfTree).getElementsByTagName("LI");if(d<b.length){var a=b[d].getElementsByTagName("UL");if(a.length>0&&a[0].style.display!="block"){JSTreeObj.showHideNode(false,b[d].id);
}}},getTopPos:function(c){var a=document.getElementById(this.idOfTree);var b=(c.offsetTop-a.scrollTop)/1;while((c=c.offsetParent)!=null){if(c.tagName!="HTML"){b+=c.offsetTop;}}if(document.all){b=b/1+13;}else{b=b/1+4;}return b;},getLeftPos:function(b){var a=b.offsetLeft/1+1;while((b=b.offsetParent)!=null){if(b.tagName!="HTML"){a+=b.offsetLeft;
}}if(document.all){a=a/1-2;}return a;},showHideNode:function(d,b){if(b){if(!document.getElementById(b)){return;}thisNode=document.getElementById(b).getElementsByTagName("IMG")[0];thisNode2=document.getElementById(b).getElementsByTagName("IMG")[1];}else{thisNode=this.parentNode.getElementsByTagName("IMG")[0];
thisNode2=this.parentNode.getElementsByTagName("IMG")[1];}if(thisNode.style.visibility=="hidden"){return;}var a=thisNode.parentNode;b=a.id.replace(/[^0-9]/g,"");if(thisNode.className.indexOf(JSTreeObj.plusClass)>=0||thisNode2.className.indexOf(JSTreeObj.folderClosedClass)>=0){thisNode.className=thisNode.className.replace(JSTreeObj.plusClass,JSTreeObj.minusClass);
thisNode2.className=thisNode2.className.replace(JSTreeObj.folderClosedClass,JSTreeObj.folderOpenedClass);var c=a.getElementsByTagName("UL")[0];c.style.display="block";if(!initExpandedNodes){initExpandedNodes=",";}if(initExpandedNodes.indexOf(","+b+",")<0){initExpandedNodes=initExpandedNodes+b+",";}}else{thisNode.className=thisNode.className.replace(JSTreeObj.minusClass,JSTreeObj.plusClass);
thisNode2.className=thisNode2.className.replace(JSTreeObj.folderOpenedClass,JSTreeObj.folderClosedClass);a.getElementsByTagName("UL")[0].style.display="none";initExpandedNodes=initExpandedNodes.replace(","+b,"");}JSTreeObj.Set_Cookie("dhtmlgoodies_expandedNodes",initExpandedNodes,500);return false;},showNode:function(c,d){if(JSTreeObj.isDragging==true&&JSTreeObj.isOnPlusMinus==true){if(c.style.visibility=="hidden"){return;
}var a=c.parentNode;inputId=a.id.replace(/[^0-9]/g,"");if(c.className.indexOf(JSTreeObj.plusClass)>=0||d.className.indexOf(JSTreeObj.folderClosedClass)>=0){c.className=c.className.replace(JSTreeObj.plusClass,JSTreeObj.minusClass);d.className=d.className.replace(JSTreeObj.folderClosedClass,JSTreeObj.folderOpenedClass);
var b=a.getElementsByTagName("UL")[0];b.style.display="block";if(!initExpandedNodes){initExpandedNodes=",";}if(initExpandedNodes.indexOf(","+inputId+",")<0){initExpandedNodes=initExpandedNodes+inputId+",";}}JSTreeObj.Set_Cookie("dhtmlgoodies_expandedNodes",initExpandedNodes,500);return false;}},showNodeToDrag:function(a){JSTreeObj.isOnPlusMinus=true;
thisNode=this.parentNode.getElementsByTagName("IMG")[0];thisNode2=this.parentNode.getElementsByTagName("IMG")[1];setTimeout("JSTreeObj.showNode(thisNode, thisNode2)",750);},PlusMinusOut:function(){JSTreeObj.isOnPlusMinus=false;},initDrag:function(b){if(JSTreeObj.isLocked!=true){if(document.all){b=event;
}var a=JSTreeObj.floatingContainer.getElementsByTagName("LI");if(a.length>0){if(JSTreeObj.dragNode_sourceNextSib){JSTreeObj.dragNode_parent.insertBefore(JSTreeObj.dragNode_source,JSTreeObj.dragNode_sourceNextSib);}else{JSTreeObj.dragNode_parent.appendChild(JSTreeObj.dragNode_source);}}JSTreeObj.dragNode_source=this.parentNode;
JSTreeObj.dragNode_parent=this.parentNode.parentNode;JSTreeObj.dragNode_sourceNextSib=false;if(JSTreeObj.dragNode_source.nextSibling){JSTreeObj.dragNode_sourceNextSib=JSTreeObj.dragNode_source.nextSibling;}JSTreeObj.dragStarPos_X=b.clientX/1;JSTreeObj.dragStarPos_Y=b.clientY/1;JSTreeObj.dragNode_destination=false;
JSTreeObj.dragDropTimer=0;JSTreeObj.isDragging=false;JSTreeObj.timerDrag();return false;}},timerDrag:function(){if(this.dragDropTimer>=0&&this.dragDropTimer<10){this.dragDropTimer=this.dragDropTimer+1;setTimeout("JSTreeObj.timerDrag()",20);return;}if(this.dragDropTimer==10){JSTreeObj.isInitializingDrag=true;
}},moveDragableNodes:function(f){if(JSTreeObj.dragDropTimer<10){return;}if(document.all){f=event;}if(f.clientY/1>(JSTreeObj.dragStarPos_Y-10)&&f.clientY/1<(JSTreeObj.dragStarPos_Y+10)&&f.clientX/1>(JSTreeObj.dragStarPos_X-15)&&f.clientX/1<(JSTreeObj.dragStarPos_X+15)&&JSTreeObj.isDragging==false){return;
}if(JSTreeObj.isInitializingDrag==true){JSTreeObj.floatingContainer.style.display="block";JSTreeObj.floatingContainer.appendChild(JSTreeObj.dragNode_source);JSTreeObj.isInitializingDrag=false;}enableScroll(true);JSTreeObj.isDragging=true;dragDrop_x=f.clientX/1+5+document.body.scrollLeft;dragDrop_y=f.clientY/1+5+document.body.scrollTop;
JSTreeObj.floatingContainer.style.left=dragDrop_x+"px";JSTreeObj.floatingContainer.style.top=dragDrop_y+"px";var g=this;if(g.tagName=="A"||g.tagName=="IMG"){g=g.parentNode;}JSTreeObj.dragNode_noSiblings=false;var d=g.getAttribute("noSiblings");if(!d){d=g.noSiblings;}if(d=="true"){JSTreeObj.dragNode_noSiblings=true;
}if(g&&g.id){JSTreeObj.dragNode_destination=g;var a=g.getElementsByTagName("IMG")[1];var h=JSTreeObj.dropTargetIndicator;h.style.display="block";var b=this;if(JSTreeObj.dragNode_noSiblings&&b.tagName=="IMG"){b=b.nextSibling;}var c=h.getElementsByTagName("IMG")[0];if(this.tagName=="A"||JSTreeObj.dragNode_noSiblings){c.className=JSTreeObj.dragDrop_ind2;
JSTreeObj.insertAsSub=true;h.style.left=(JSTreeObj.getLeftPos(b)+JSTreeObj.indicator_offsetX_sub)+"px";}else{c.className=JSTreeObj.dragDrop_ind1;JSTreeObj.insertAsSub=false;h.style.left=(JSTreeObj.getLeftPos(b)+JSTreeObj.indicator_offsetX)+"px";}h.style.top=(JSTreeObj.getTopPos(g)+JSTreeObj.indicator_offsetY)+"px";
}return false;},dropDragableNodes:function(){var b;var c;var e;if(JSTreeObj.dragDropTimer<10){JSTreeObj.dragDropTimer=-1;return;}var l=false;if(JSTreeObj.dragNode_destination){var k=JSTreeObj.dragDropCountLevels(JSTreeObj.dragNode_destination,"up");var d=JSTreeObj.dragDropCountLevels(JSTreeObj.dragNode_source,"down");
var i=k/1+d/1+(JSTreeObj.insertAsSub?1:0);if(i>JSTreeObj.maximumDepth){JSTreeObj.dragNode_destination=false;l=true;}}if(JSTreeObj.dragNode_destination){c=JSTreeObj.dragNode_destination.id;e=JSTreeObj.dragNode_source.id;if(JSTreeObj.insertAsSub){b="Y";var m=JSTreeObj.dragNode_destination.getElementsByTagName("UL");
if(m.length>0){j=m[0];j.style.display="block";var n=j.getElementsByTagName("LI");if(n.length>0){j.insertBefore(JSTreeObj.dragNode_source,n[0]);}else{j.appendChild(JSTreeObj.dragNode_source);}}else{var j=document.createElement("UL");j.style.display="block";JSTreeObj.dragNode_destination.appendChild(j);
j.appendChild(JSTreeObj.dragNode_source);}var h=JSTreeObj.dragNode_destination.getElementsByTagName("IMG")[0];var f=JSTreeObj.dragNode_destination.getElementsByTagName("IMG")[1];h.style.visibility="visible";h.className=h.className.replace(JSTreeObj.plusClass,JSTreeObj.minusClass);f.className=f.className.replace(JSTreeObj.folderClosedClass,JSTreeObj.folderOpenedClass);
}else{b="N";if(JSTreeObj.dragNode_destination.nextSibling){var a=JSTreeObj.dragNode_destination.nextSibling;a.parentNode.insertBefore(JSTreeObj.dragNode_source,a);}else{JSTreeObj.dragNode_destination.parentNode.appendChild(JSTreeObj.dragNode_source);}}var g=JSTreeObj.dragNode_parent;var n=g.getElementsByTagName("LI");
if(n.length==0){var h=g.parentNode.getElementsByTagName("IMG")[0];var f=g.parentNode.getElementsByTagName("IMG")[1];h.style.visibility="hidden";f.className=f.className.replace(JSTreeObj.folderOpenedClass,JSTreeObj.folderClosedClass);g.parentNode.removeChild(g);}submitDraggingInfo(c,e,b);}else{if(JSTreeObj.dragNode_sourceNextSib){JSTreeObj.dragNode_parent.insertBefore(JSTreeObj.dragNode_source,JSTreeObj.dragNode_sourceNextSib);
}else{JSTreeObj.dragNode_parent.appendChild(JSTreeObj.dragNode_source);}}enableScroll(false);JSTreeObj.isDragging=false;JSTreeObj.dropTargetIndicator.style.display="none";JSTreeObj.dragDropTimer=-1;if(l&&JSTreeObj.messageMaximumDepthReached){alert(JSTreeObj.messageMaximumDepthReached);}},createDropIndicator:function(){this.dropTargetIndicator=document.createElement("DIV");
this.dropTargetIndicator.style.position="absolute";this.dropTargetIndicator.style.display="none";var a=document.createElement("IMG");a.src=this.imageFolder+this.blankImage;a.className=this.dragDrop_ind1;a.id="dragDropIndicatorImage";this.dropTargetIndicator.appendChild(a);document.body.appendChild(this.dropTargetIndicator);
},dragDropCountLevels:function(e,d,a){var c=0;if(d=="up"){while(e.parentNode&&e.parentNode!=a){e=e.parentNode;if(e.tagName=="UL"){c=c/1+1;}}return c;}if(d=="down"){var b=e.getElementsByTagName("LI");for(var f=0;f<b.length;f++){c=Math.max(c,JSTreeObj.dragDropCountLevels(b[f],"up",e));}return c;}},cancelEvent:function(){return false;
},cancelSelectionEvent:function(){if(JSTreeObj.dragDropTimer<10){return true;}return false;},getNodeOrders:function(b,e){if(!e){var e="";}if(!b){b=document.getElementById(this.idOfTree);}var c=b.getElementsByTagName("LI");if(c.length>0){var a=c[0];while(a){if(a.id){if(e.length>0){e=e+",";}var g=a.id.replace(/[^0-9]/gi,"");
if(g.length==0){g="A";}var f=a.parentNode.parentNode.id.replace(/[^0-9]/gi,"");if(g!="0"){e=e+g;e=e+"-";if(a.parentNode.id!=this.idOfTree){e=e+f;}else{e=e+"0";}}var d=a.getElementsByTagName("UL");if(d.length>0){e=this.getNodeOrders(d[0],e);}}a=a.nextSibling;}}if(b.id==this.idOfTree){return e;}return e;
},highlightItem:function(a,b){if(JSTreeObj.currentlyActiveItem){JSTreeObj.currentlyActiveItem.className="";}this.className="highlightedNodeItem";JSTreeObj.currentlyActiveItem=this;},removeHighlight:function(){if(JSTreeObj.currentlyActiveItem){JSTreeObj.currentlyActiveItem.className="";}JSTreeObj.currentlyActiveItem=false;
},hasSubNodes:function(b){var a=b.getElementsByTagName("LI");if(a.length>0){return true;}return false;},deleteItem:function(c,b){var a="Click OK to delete item "+b.innerHTML;if(this.hasSubNodes(b.parentNode)){a=a+" and it's sub nodes";}if(confirm(a)){this.__deleteItem_step2(b.parentNode);}},__refreshDisplay:function(b){if(this.hasSubNodes(b)){return;
}var a=b.getElementsByTagName("IMG")[0];a.style.visibility="hidden";},__deleteItem_step2:function(d){var c=d.id.replace(/[^0-9]/gi,"");var a=d.getElementsByTagName("LI");for(var e=0;e<a.length;e++){c=c+","+a[e].id.replace(/[^0-9]/gi,"");}var b=JSTreeObj.ajaxObjects.length;JSTreeObj.ajaxObjects[b]=new sack();
JSTreeObj.ajaxObjects[b].method="GET";JSTreeObj.ajaxObjects[b].setVar("deleteIds",c);JSTreeObj.__addAdditionalRequestParameters(JSTreeObj.ajaxObjects[b],JSTreeObj.additionalDeleteRequestParameters);JSTreeObj.ajaxObjects[b].requestFile=JSTreeObj.filePathDeleteItem;JSTreeObj.ajaxObjects[b].onCompletion=function(){JSTreeObj.__deleteComplete(b,d);
};JSTreeObj.ajaxObjects[b].runAJAX();},__deleteComplete:function(b,c){if(this.ajaxObjects[b].response!="OK"){alert("ERROR WHEN TRYING TO DELETE NODE: "+this.ajaxObjects[b].response);}else{var a=c.parentNode.parentNode;c.parentNode.removeChild(c);this.__refreshDisplay(a);}},__renameComplete:function(a){if(this.ajaxObjects[a].response!="OK"){alert("ERROR WHEN TRYING TO RENAME NODE: "+this.ajaxObjects[a].response);
}},__saveTextBoxChanges:function(c,a){if(!a&&this){a=this;}if(document.all){c=event;}if(c.keyCode&&c.keyCode==27){JSTreeObj.__cancelRename(c,a);return;}a.style.display="none";a.nextSibling.style.visibility="visible";if(a.value.length>0){a.nextSibling.innerHTML=a.value;if(JSTreeObj.renameState!=JSTreeObj.RENAME_STATE_BEGIN){return;
}JSTreeObj.renameState=JSTreeObj.RENAME_STATE_REQUEST_SENDED;var b=JSTreeObj.ajaxObjects.length;JSTreeObj.ajaxObjects[b]=new sack();JSTreeObj.ajaxObjects[b].method="GET";JSTreeObj.ajaxObjects[b].setVar("renameId",a.parentNode.id.replace(/[^0-9]/gi,""));JSTreeObj.ajaxObjects[b].setVar("newName",a.value);
JSTreeObj.__addAdditionalRequestParameters(JSTreeObj.ajaxObjects[b],JSTreeObj.additionalRenameRequestParameters);JSTreeObj.ajaxObjects[b].requestFile=JSTreeObj.filePathRenameItem;JSTreeObj.ajaxObjects[b].onCompletion=function(){JSTreeObj.__renameComplete(b);};JSTreeObj.ajaxObjects[b].runAJAX();}},__cancelRename:function(b,a){JSTreeObj.renameState=JSTreeObj.RENAME_STATE_CANCELD;
if(!a&&this){a=this;}a.value=JSTreeObj.helpObj.innerHTML;a.nextSibling.innerHTML=JSTreeObj.helpObj.innerHTML;a.style.display="none";a.nextSibling.style.visibility="visible";},__renameCheckKeyCode:function(a){if(document.all){a=event;}if(a.keyCode==13){JSTreeObj.__saveTextBoxChanges(false,this);}if(a.keyCode==27){JSTreeObj.__cancelRename(false,this);
}},__createTextBox:function(a){var b=document.createElement("INPUT");b.className="folderTreeTextBox";b.value=a.innerHTML;a.parentNode.insertBefore(b,a);b.id="textBox"+a.parentNode.id.replace(/[^0-9]/gi,"");b.onblur=this.__saveTextBoxChanges;b.onkeydown=this.__renameCheckKeyCode;this.__renameEnableTextBox(a);
},__renameEnableTextBox:function(a){JSTreeObj.renameState=JSTreeObj.RENAME_STATE_BEGIN;a.style.visibility="hidden";a.previousSibling.value=a.innerHTML;a.previousSibling.style.display="inline";a.previousSibling.select();},renameItem:function(b,a){currentItemToEdit=a.parentNode;if(!a.previousSibling||a.previousSibling.tagName.toLowerCase()!="input"){this.__createTextBox(a);
}else{this.__renameEnableTextBox(a);}this.helpObj.innerHTML=a.innerHTML;},clearDestination:function(a){JSTreeObj.dropTargetIndicator.style.display="none";JSTreeObj.dragNode_destination=false;},initTree:function(){JSTreeObj=this;JSTreeObj.createDropIndicator();document.documentElement.onselectstart=JSTreeObj.cancelSelectionEvent;
document.documentElement.ondragstart=JSTreeObj.cancelEvent;document.documentElement.onmousedown=JSTreeObj.removeHighlight;this.helpObj=document.createElement("DIV");this.helpObj.style.display="none";document.body.appendChild(this.helpObj);if(this.deleteAllowed||this.renameAllowed){try{var m=new DHTMLGoodies_menuModel();
if(this.deleteAllowed){m.addItem(1,"Delete","","",false,"JSTreeObj.deleteItem");}if(this.renameAllowed){m.addItem(2,"Rename","","",false,"JSTreeObj.renameItem");}m.init();var d=new DHTMLGoodies_menuModel();if(this.renameAllowed){d.addItem(3,"Rename","","",false,"JSTreeObj.renameItem");}d.init();var q=new DHTMLGoodies_menuModel();
if(this.deleteAllowed){q.addItem(4,"Delete","","",false,"JSTreeObj.deleteItem");}q.init();window.refToDragDropTree=this;this.contextMenu=new DHTMLGoodies_contextMenu();this.contextMenu.setWidth(120);referenceToDHTMLSuiteContextMenu=this.contextMenu;}catch(t){}}var k=0;var g=document.getElementById(this.idOfTree);
var u=g.getElementsByTagName("LI");var r=u.length;for(var b=0;b<r;b++){var i=u[b];var o=false;var j=i.getAttribute("isElement");if(!j){j=i.isElement;}if(j=="true"){o=true;}var n=false;var j=i.getAttribute("noChildren");if(!j){j=i.noChildren;}if(j=="true"){n=true;}var v=false;var j=i.getAttribute("noDrag");
if(!j){j=i.noDrag;}if(j=="true"){v=true;}var f=false;var j=i.getAttribute("noSiblings");if(!j){j=i.noSiblings;}if(j=="true"){f=true;}k++;var c=i.getElementsByTagName("UL");var w=document.createElement("IMG");w.src=this.imageFolder+this.blankImage;w.className=this.plusClass;w.onmouseover=JSTreeObj.showNodeToDrag;
w.onmouseout=JSTreeObj.PlusMinusOut;w.onclick=JSTreeObj.showHideNode;if(c.length==0){w.style.visibility="hidden";}else{c[0].id="tree_ul_"+treeUlCounter;treeUlCounter++;}var s=i.getElementsByTagName("A")[0];s.id="nodeATag"+i.id.replace(/[^0-9]/gi,"");s.ondblclick=JSTreeObj.showHideNode;if(!v){s.onmousedown=JSTreeObj.initDrag;
}if(!n){s.onmousemove=JSTreeObj.moveDragableNodes;}s.onmouseout=JSTreeObj.clearDestination;i.insertBefore(w,s);var h=document.createElement("IMG");if(!v){h.onmousedown=JSTreeObj.initDrag;}if(!f){h.onmousemove=JSTreeObj.moveDragableNodes;}h.onmouseout=JSTreeObj.clearDestination;if(i.className){h.src=this.imageFolder+i.className;
}else{h.src=this.imageFolder+this.blankImage;if(o){h.className=this.elementClass;}else{h.className=this.folderClosedClass;}}h.ondblclick=JSTreeObj.showHideNode;i.insertBefore(h,s);if(this.contextMenu){var a=i.getAttribute("noDelete");if(!a){a=i.noDelete;}var l=i.getAttribute("noRename");if(!l){l=i.noRename;
}if(l=="true"&&a=="true"){}else{if(a=="true"){this.contextMenu.attachToElement(s,false,d);}else{if(l=="true"){this.contextMenu.attachToElement(s,false,q);}else{this.contextMenu.attachToElement(s,false,m);}}}}this.addEvent(s,"contextmenu",this.highlightItem);}initExpandedNodes=this.Get_Cookie("dhtmlgoodies_expandedNodes");
if(initExpandedNodes){var p=initExpandedNodes.split(",");for(var b=0;b<p.length;b++){if(p[b]){this.showHideNode(false,p[b]);}}}document.documentElement.onmousemove=JSTreeObj.moveDragableNodes;document.documentElement.onmouseup=JSTreeObj.dropDragableNodes;},__addAdditionalRequestParameters:function(b,a){for(var c in a){b.setVar(c,a[c]);
}}};