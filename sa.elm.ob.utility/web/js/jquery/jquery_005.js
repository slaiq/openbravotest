(function(n,k){var p,i="ui-button ui-widget ui-state-default ui-corner-all",l="ui-state-hover ui-state-active ",m="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",o=function(a){n(":ui-button",a.target.form).each(function(){var b=n(this).data("button");
setTimeout(function(){b.refresh();},1);});},j=function(c){var d=c.name,b=c.form,a=n([]);if(d){if(b){a=n(b).find("[name='"+d+"']");}else{a=n("[name='"+d+"']",c.ownerDocument).filter(function(){return !this.form;});}}return a;};n.widget("ui.button",{options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",o);
if(typeof this.options.disabled!=="boolean"){this.options.disabled=this.element.attr("disabled");}this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var e=this,c=this.options,b=this.type==="checkbox"||this.type==="radio",a="ui-state-hover"+(!b?" ui-state-active":""),d="ui-state-focus";
if(c.label===null){c.label=this.buttonElement.html();}if(this.element.is(":disabled")){c.disabled=true;}this.buttonElement.addClass(i).attr("role","button").bind("mouseenter.button",function(){if(c.disabled){return;}n(this).addClass("ui-state-hover");if(this===p){n(this).addClass("ui-state-active");}}).bind("mouseleave.button",function(){if(c.disabled){return;
}n(this).removeClass(a);}).bind("focus.button",function(){n(this).addClass(d);}).bind("blur.button",function(){n(this).removeClass(d);});if(b){this.element.bind("change.button",function(){e.refresh();});}if(this.type==="checkbox"){this.buttonElement.bind("click.button",function(){if(c.disabled){return false;
}n(this).toggleClass("ui-state-active");e.buttonElement.attr("aria-pressed",e.element[0].checked);});}else{if(this.type==="radio"){this.buttonElement.bind("click.button",function(){if(c.disabled){return false;}n(this).addClass("ui-state-active");e.buttonElement.attr("aria-pressed",true);var f=e.element[0];
j(f).not(f).map(function(){return n(this).button("widget")[0];}).removeClass("ui-state-active").attr("aria-pressed",false);});}else{this.buttonElement.bind("mousedown.button",function(){if(c.disabled){return false;}n(this).addClass("ui-state-active");p=this;n(document).one("mouseup",function(){p=null;
});}).bind("mouseup.button",function(){if(c.disabled){return false;}n(this).removeClass("ui-state-active");}).bind("keydown.button",function(f){if(c.disabled){return false;}if(f.keyCode==n.ui.keyCode.SPACE||f.keyCode==n.ui.keyCode.ENTER){n(this).addClass("ui-state-active");}}).bind("keyup.button",function(){n(this).removeClass("ui-state-active");
});if(this.buttonElement.is("a")){this.buttonElement.keyup(function(f){if(f.keyCode===n.ui.keyCode.SPACE){n(this).click();}});}}}this._setOption("disabled",c.disabled);},_determineButtonType:function(){if(this.element.is(":checkbox")){this.type="checkbox";}else{if(this.element.is(":radio")){this.type="radio";
}else{if(this.element.is("input")){this.type="input";}else{this.type="button";}}}if(this.type==="checkbox"||this.type==="radio"){this.buttonElement=this.element.parents().last().find("label[for="+this.element.attr("id")+"]");this.element.addClass("ui-helper-hidden-accessible");var a=this.element.is(":checked");
if(a){this.buttonElement.addClass("ui-state-active");}this.buttonElement.attr("aria-pressed",a);}else{this.buttonElement=this.element;}},widget:function(){return this.buttonElement;},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(i+" "+l+" "+m).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
if(!this.hasTitle){this.buttonElement.removeAttr("title");}n.Widget.prototype.destroy.call(this);},_setOption:function(b,a){n.Widget.prototype._setOption.apply(this,arguments);if(b==="disabled"){if(a){this.element.attr("disabled",true);}else{this.element.removeAttr("disabled");}}this._resetButton();},refresh:function(){var a=this.element.is(":disabled");
if(a!==this.options.disabled){this._setOption("disabled",a);}if(this.type==="radio"){j(this.element[0]).each(function(){if(n(this).is(":checked")){n(this).button("widget").addClass("ui-state-active").attr("aria-pressed",true);}else{n(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",false);
}});}else{if(this.type==="checkbox"){if(this.element.is(":checked")){this.buttonElement.addClass("ui-state-active").attr("aria-pressed",true);}else{this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",false);}}}},_resetButton:function(){if(this.type==="input"){if(this.options.label){this.element.val(this.options.label);
}return;}var a=this.buttonElement.removeClass(m),b=n("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(a.empty()).text(),c=this.options.icons,d=c.primary&&c.secondary;if(c.primary||c.secondary){a.addClass("ui-button-text-icon"+(d?"s":(c.primary?"-primary":"-secondary")));if(c.primary){a.prepend("<span class='ui-button-icon-primary ui-icon "+c.primary+"'></span>");
}if(c.secondary){a.append("<span class='ui-button-icon-secondary ui-icon "+c.secondary+"'></span>");}if(!this.options.text){a.addClass(d?"ui-button-icons-only":"ui-button-icon-only").removeClass("ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary");if(!this.hasTitle){a.attr("title",b);
}}}else{a.addClass("ui-button-text-only");}}});n.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset");},_init:function(){this.refresh();},_setOption:function(b,a){if(b==="disabled"){this.buttons.button("option",b,a);
}n.Widget.prototype._setOption.apply(this,arguments);},refresh:function(){this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return n(this).button("widget")[0];}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end();
},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return n(this).button("widget")[0];}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");n.Widget.prototype.destroy.call(this);}});}(jQuery));